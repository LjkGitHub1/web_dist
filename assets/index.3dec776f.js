import{X as M,q as V,p as N}from"./index.ab2bd5b7.js";import U from"./index.8fcbfedb.js";import{_ as X}from"./index.vue_vue_type_script_setup_true_lang.72cfd2b8.js";import E from"./index.f67aebe2.js";import G from"./index.e74c24a8.js";import{G as j,D as q}from"./api.cb0b4d38.js";import{a as C,r,l as z,al as s,o as y,Q as w,R as n,X as o,b as f,u,U as A,H}from"./vue.562ccee8.js";import{_ as I}from"./_plugin-vue_export-helper.c27b6911.js";import"./index.es.d2375c1e.js";import"./index.vue_vue_type_script_setup_true_name_svgIcon_lang.6e64cb5c.js";import"./crud.5c739bbe.js";import"./authFunction.ff362cdf.js";import"./crud.5d2f62f3.js";import"./api.1e82473c.js";const K={class:"menu-box menu-left-box"},L={style:{height:"80vh"}},O={style:{height:"80vh"}},P=C({name:"menuPages"}),Q=C({...P,setup(J){let i=r([]),p=r([]),l=r(!1),m=r({}),h=r(null),D=r(null),v=r(null);const _=()=>{j({}).then(a=>{const t=a.data,e=M.toArrayTree(t,{parentKey:"parent",children:"children",strict:!0});i.value=e})},T=a=>{var t,e;(t=D.value)==null||t.handleRefreshTable(a),(e=v.value)==null||e.handleRefreshTable(a)},R=(a,t)=>{var e,c;if(a==="update"&&t){const d=((c=(e=h.value)==null?void 0:e.treeRef)==null?void 0:c.currentNode.parent.data)||{};p.value=[d],m.value=t}l.value=!0},b=a=>{a==="submit"&&_(),l.value=!1,m.value={}},g=(a,t)=>{V.confirm("您确认删除该菜单项吗?","温馨提示",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then(async()=>{const e=await q(a);t(),(e==null?void 0:e.code)===2e3&&(N(e.msg),_())})};return z(()=>{_()}),(a,t)=>{const e=s("el-col"),c=s("el-tab-pane"),d=s("el-tabs"),k=s("el-row"),B=s("el-drawer"),F=s("fs-page");return y(),w(F,null,{default:n(()=>[o(k,{class:"menu-el-row"},{default:n(()=>[o(e,{span:6},{default:n(()=>[f("div",K,[o(U,{ref_key:"menuTreeRef",ref:h,treeData:u(i),onTreeClick:T,onUpdateDept:R,onDeleteDept:g},null,8,["treeData"])])]),_:1}),o(e,{span:18},{default:n(()=>[o(d,{type:"border-card"},{default:n(()=>[o(c,{label:"按钮权限配置"},{default:n(()=>[f("div",L,[o(X,{ref_key:"menuButtonRef",ref:D},null,512)])]),_:1}),o(c,{label:"列权限配置"},{default:n(()=>[f("div",O,[o(G,{ref_key:"menuFieldRef",ref:v},null,512)])]),_:1})]),_:1})]),_:1})]),_:1}),o(B,{modelValue:u(l),"onUpdate:modelValue":t[0]||(t[0]=x=>H(l)?l.value=x:l=x),title:"菜单配置",direction:"rtl",size:"500px","close-on-click-modal":!1,"before-close":b},{default:n(()=>[u(l)?(y(),w(E,{key:0,initFormData:u(m),cacheData:u(p),treeData:u(i),onDrawerClose:b},null,8,["initFormData","cacheData","treeData"])):A("",!0)]),_:1},8,["modelValue"])]),_:1})}}});const ce=I(Q,[["__scopeId","data-v-20a93e69"]]);export{ce as default};
