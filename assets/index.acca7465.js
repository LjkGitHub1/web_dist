import{u as w,b as k}from"./api.1e82473c.js";import{p as U}from"./index.ab2bd5b7.js";import{a as I,r as V,a0 as b,l as R,al as d,o as N,c as j,X as l,R as r,u as a,V as y}from"./vue.562ccee8.js";import{_ as B}from"./_plugin-vue_export-helper.c27b6911.js";const M={class:"columns-form-com"},O=I({__name:"index",props:{currentInfo:{type:Object,required:!0,default:()=>{}},initFormData:{type:Object,default:()=>{}}},emits:["drawerClose"],setup(C,{emit:D}){const o=C,g=D,m=V(),v=b({field_name:[{required:!0,message:"请输入字段名！",trigger:"blur"}],title:[{required:!0,message:"请输入列名！",trigger:"blur"}]});let t=b({field_name:"",title:"",is_create:!0,is_update:!0,is_query:!0}),f=V(!1);const F=()=>{var u,e;(u=o.initFormData)!=null&&u.id&&(t.id=((e=o.initFormData)==null?void 0:e.id)||"",t.field_name=o.initFormData.field_name||"",t.title=o.initFormData.title||"",t.is_create=!!o.initFormData.is_create,t.is_update=!!o.initFormData.is_update,t.is_query=!!o.initFormData.is_query)},x=()=>{var u;(u=m.value)==null||u.validate(async e=>{if(e)try{f.value=!0;let i;t.id?i=await w({...t,...o.currentInfo}):i=await k({...t,...o.currentInfo}),(i==null?void 0:i.code)===2e3&&(U(i.msg),p("submit"))}finally{f.value=!1}})},p=(u="")=>{var e;g("drawerClose",u),(e=m.value)==null||e.resetFields()};return R(()=>{F()}),(u,e)=>{const i=d("el-input"),s=d("el-form-item"),_=d("el-switch"),c=d("el-button"),q=d("el-form");return N(),j("div",M,[l(q,{ref_key:"formRef",ref:m,model:a(t),rules:v,"label-width":"80px"},{default:r(()=>[l(s,{label:"字段名",prop:"field_name"},{default:r(()=>[l(i,{modelValue:a(t).field_name,"onUpdate:modelValue":e[0]||(e[0]=n=>a(t).field_name=n),placeholder:"请输入字段名"},null,8,["modelValue"])]),_:1}),l(s,{label:"列名",prop:"title"},{default:r(()=>[l(i,{modelValue:a(t).title,"onUpdate:modelValue":e[1]||(e[1]=n=>a(t).title=n),placeholder:"请输入列名"},null,8,["modelValue"])]),_:1}),l(s,{label:"创建显示"},{default:r(()=>[l(_,{modelValue:a(t).is_create,"onUpdate:modelValue":e[2]||(e[2]=n=>a(t).is_create=n)},null,8,["modelValue"])]),_:1}),l(s,{label:"编辑显示"},{default:r(()=>[l(_,{modelValue:a(t).is_update,"onUpdate:modelValue":e[3]||(e[3]=n=>a(t).is_update=n)},null,8,["modelValue"])]),_:1}),l(s,{label:"查询显示"},{default:r(()=>[l(_,{modelValue:a(t).is_query,"onUpdate:modelValue":e[4]||(e[4]=n=>a(t).is_query=n)},null,8,["modelValue"])]),_:1}),l(s,null,{default:r(()=>[l(c,{type:"primary",onClick:x,loading:a(f)},{default:r(()=>e[5]||(e[5]=[y(" 确定 ")])),_:1},8,["loading"]),l(c,{onClick:p},{default:r(()=>e[6]||(e[6]=[y("取消")])),_:1})]),_:1})]),_:1},8,["model","rules"])])}}});const X=B(O,[["__scopeId","data-v-7c3f6e9f"]]);export{X as default};
