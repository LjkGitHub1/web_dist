import{c as P,G as b}from"./crud.900154aa.js";import{J as D,O as R}from"./index.ab2bd5b7.js";import k from"./index.0d251c28.js";import{a as C,r as l,l as F,al as c,o as B,Q as I,R as f,X as m,V as O,W as q,O as G,u as _,H as S}from"./vue.562ccee8.js";import"./dictionary.100483c1.js";import"./authFunction.ff362cdf.js";import"./_plugin-vue_export-helper.c27b6911.js";const z=async(p,a,n=[])=>{const t=await p();a.pagination==null&&(a.pagination={show:!0});const o=a.columns,r=["_index","id","create_datetime","update_datetime"].concat(n);for(let e in o)if(!r.includes(e)){o[e].column?o[e].column.show=!1:o[e].column={show:!1},o[e].addForm={show:!1},o[e].editForm={show:!1};for(let s of t.data)r.includes(s.field_name)||s.field_name===e&&(o[e].column.show=s.is_query,s.is_query||(o[e].column.columnSetDisabled=!0),o[e].addForm={show:s.is_create},o[e].editForm={show:s.is_update})}return a},E=C({name:"role"}),X=C({...E,setup(p,{expose:a}){let n=l(!1),t=l(null),o=l(null);const r=l(),e=l(),s=l(),g=d=>{t.value=d.id,o.value=d.name,n.value=!0},x=()=>{n.value=!1},{crudExpose:u}=D({crudRef:e,crudBinding:s}),{crudOptions:w}=P({crudExpose:u,rolePermission:r,handleDrawerOpen:g});return R({crudExpose:u,crudOptions:w,context:{}}),F(async()=>{await z(b,w),u.doRefresh()}),a(r),(d,h)=>{const v=c("el-tag"),y=c("fs-crud"),V=c("permission"),N=c("fs-page");return B(),I(N,null,{default:f(()=>[m(y,G({ref_key:"crudRef",ref:e},s.value),{cell_url:f(i=>[m(v,{size:"small"},{default:f(()=>[O(q(i.row.url),1)]),_:2},1024)]),_:1},16),m(V,{ref_key:"rolePermission",ref:r},null,512),m(k,{drawerVisible:_(n),"onUpdate:drawerVisible":h[0]||(h[0]=i=>S(n)?n.value=i:n=i),roleId:_(t),roleName:_(o),onDrawerClose:x},null,8,["drawerVisible","roleId","roleName"])]),_:1})}}});export{X as default};
