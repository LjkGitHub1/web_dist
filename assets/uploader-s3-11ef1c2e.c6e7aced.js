import{a2 as Go,l as Jr,Z as Zo,a0 as Xo}from"./index.ab2bd5b7.js";import{c as Nr}from"./_commonjsHelpers-2f131a27.d3569fbf.js";import"./vue.562ccee8.js";var Qr;(function(e){e.HEADER="header",e.QUERY="query"})(Qr||(Qr={}));var wt;(function(e){e.HTTP="http",e.HTTPS="https"})(wt||(wt={}));var en;(function(e){e[e.HEADER=0]="HEADER",e[e.TRAILER=1]="TRAILER"})(en||(en={}));var tn;(function(e){e.HTTP_0_9="http/0.9",e.HTTP_1_0="http/1.0",e.TDS_8_0="tds/8.0"})(tn||(tn={}));class ae{constructor(t){this.method=t.method||"GET",this.hostname=t.hostname||"localhost",this.port=t.port,this.query=t.query||{},this.headers=t.headers||{},this.body=t.body,this.protocol=t.protocol?t.protocol.slice(-1)!==":"?`${t.protocol}:`:t.protocol:"https:",this.path=t.path?t.path.charAt(0)!=="/"?`/${t.path}`:t.path:"/",this.username=t.username,this.password=t.password,this.fragment=t.fragment}static isInstance(t){if(!t)return!1;const r=t;return"method"in r&&"protocol"in r&&"hostname"in r&&"path"in r&&typeof r.query=="object"&&typeof r.headers=="object"}clone(){const t=new ae({...this,headers:{...this.headers}});return t.query&&(t.query=Yo(t.query)),t}}function Yo(e){return Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{})}class Tt{constructor(t){this.statusCode=t.statusCode,this.reason=t.reason,this.headers=t.headers||{},this.body=t.body}static isInstance(t){if(!t)return!1;const r=t;return typeof r.statusCode=="number"&&typeof r.headers=="object"}}function Jo(e){return t=>async r=>{const{request:n}=r;return ae.isInstance(n)&&n.body&&e.runtime==="node"&&(n.headers={...n.headers,Expect:"100-continue"}),t({...r,request:n})}}const Qo={step:"build",tags:["SET_EXPECT_HEADER","EXPECT_HEADER"],name:"addExpectContinueMiddleware",override:!0},ea=e=>({applyToStack:t=>{t.add(Jo(e),Qo)}}),ta=e=>t=>async r=>{if(!ae.isInstance(r.request))return t(r);const{request:n}=r,{handlerProtocol:s=""}=e.requestHandler.metadata||{};if(s.indexOf("h2")>=0&&!n.headers[":authority"])delete n.headers.host,n.headers[":authority"]="";else if(!n.headers.host){let i=n.hostname;n.port!=null&&(i+=`:${n.port}`),n.headers.host=i}return t(r)},ra={name:"hostHeaderMiddleware",step:"build",priority:"low",tags:["HOST"],override:!0},na=e=>({applyToStack:t=>{t.add(ta(e),ra)}}),sa=()=>(e,t)=>async r=>{var n,s;try{const i=await e(r),{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:u={}}=t,{overrideInputFilterSensitiveLog:d,overrideOutputFilterSensitiveLog:p}=u,f=d??t.inputFilterSensitiveLog,m=p??t.outputFilterSensitiveLog,{$metadata:g,...A}=i.output;return(n=c==null?void 0:c.info)==null||n.call(c,{clientName:o,commandName:a,input:f(r.input),output:m(A),metadata:g}),i}catch(i){const{clientName:o,commandName:a,logger:c,dynamoDbDocumentClientOptions:u={}}=t,{overrideInputFilterSensitiveLog:d}=u,p=d??t.inputFilterSensitiveLog;throw(s=c==null?void 0:c.error)==null||s.call(c,{clientName:o,commandName:a,input:p(r.input),error:i,metadata:i.$metadata}),i}},ia={name:"loggerMiddleware",tags:["LOGGER"],step:"initialize",override:!0},oa=e=>({applyToStack:t=>{t.add(sa(),ia)}}),rn="X-Amzn-Trace-Id",aa="AWS_LAMBDA_FUNCTION_NAME",ca="_X_AMZN_TRACE_ID",ua=e=>t=>async r=>{const{request:n}=r;if(!ae.isInstance(n)||e.runtime!=="node"||n.headers.hasOwnProperty(rn))return t(r);const s=process.env[aa],i=process.env[ca],o=a=>typeof a=="string"&&a.length>0;return o(s)&&o(i)&&(n.headers[rn]=i),t({...r,request:n})},da={step:"build",tags:["RECURSION_DETECTION"],name:"recursionDetectionMiddleware",override:!0,priority:"low"},la=e=>({applyToStack:t=>{t.add(ua(e),da)}}),ha="content-length";function fa(){return(e,t)=>async r=>{var n;const{request:s}=r;if(ae.isInstance(s)&&!s.headers[ha]){const i="Are you using a Stream of unknown length as the Body of a PutObject request? Consider using Upload instead from @aws-sdk/lib-storage.";typeof((n=t==null?void 0:t.logger)==null?void 0:n.warn)=="function"&&t.logger.warn(i)}return e({...r})}}const pa={step:"finalizeRequest",tags:["CHECK_CONTENT_LENGTH_HEADER"],name:"getCheckContentLengthHeaderPlugin",override:!0},ga=e=>({applyToStack:t=>{t.add(fa(),pa)}}),ma=e=>({...e,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1}),ya=e=>typeof e=="string"&&e.indexOf("arn:")===0&&e.split(":").length>=6;function ba(){return e=>async t=>{const{input:{Bucket:r}}=t;if(typeof r=="string"&&!ya(r)&&r.indexOf("/")>=0){const n=new Error(`Bucket name shouldn't contain '/', received '${r}'`);throw n.name="InvalidBucketName",n}return e({...t})}}const wa={step:"initialize",tags:["VALIDATE_BUCKET_NAME"],name:"validateBucketNameMiddleware",override:!0},va=e=>({applyToStack:t=>{t.add(ba(),wa)}}),Ai=(e,t,r)=>{let n,s,i,o=!1;const a=async()=>{s||(s=e());try{n=await s,i=!0,o=!1}finally{s=void 0}return n};return t===void 0?async c=>((!i||c!=null&&c.forceRefresh)&&(n=await a()),n):async c=>((!i||c!=null&&c.forceRefresh)&&(n=await a()),o?n:r&&!r(n)?(o=!0,n):(t(n)&&await a(),n))};var nn={};/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var wr=function(e,t){return wr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,n){r.__proto__=n}||function(r,n){for(var s in n)n.hasOwnProperty(s)&&(r[s]=n[s])},wr(e,t)};function Sa(e,t){wr(e,t);function r(){this.constructor=e}e.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var vr=function(){return vr=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++){t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},vr.apply(this,arguments)};function Aa(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]]);return r}function Ea(e,t,r,n){var s=arguments.length,i=s<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function xa(e,t){return function(r,n){t(r,n,e)}}function ka(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}function Ca(e,t,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(d){try{u(n.next(d))}catch(p){o(p)}}function c(d){try{u(n.throw(d))}catch(p){o(p)}}function u(d){d.done?i(d.value):s(d.value).then(a,c)}u((n=n.apply(e,t||[])).next())})}function Pa(e,t){var r={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(u){return function(d){return c([u,d])}}function c(u){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,s&&(i=u[0]&2?s.return:u[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,u[1])).done)return i;switch(s=0,i&&(u=[u[0]&2,i.value]),u[0]){case 0:case 1:i=u;break;case 4:return r.label++,{value:u[1],done:!1};case 5:r.label++,s=u[1],u=[0];continue;case 7:u=r.ops.pop(),r.trys.pop();continue;default:if(i=r.trys,!(i=i.length>0&&i[i.length-1])&&(u[0]===6||u[0]===2)){r=0;continue}if(u[0]===3&&(!i||u[1]>i[0]&&u[1]<i[3])){r.label=u[1];break}if(u[0]===6&&r.label<i[1]){r.label=i[1],i=u;break}if(i&&r.label<i[2]){r.label=i[2],r.ops.push(u);break}i[2]&&r.ops.pop(),r.trys.pop();continue}u=t.call(e,r)}catch(d){u=[6,d],s=0}finally{n=i=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function Ra(e,t,r,n){n===void 0&&(n=r),e[n]=t[r]}function Ta(e,t){for(var r in e)r!=="default"&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function Sr(e){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ei(e,t){var r=typeof Symbol=="function"&&e[Symbol.iterator];if(!r)return e;var n=r.call(e),s,i=[],o;try{for(;(t===void 0||t-- >0)&&!(s=n.next()).done;)i.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return i}function _a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(Ei(arguments[t]));return e}function Oa(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;for(var n=Array(e),s=0,t=0;t<r;t++)for(var i=arguments[t],o=0,a=i.length;o<a;o++,s++)n[s]=i[o];return n}function vt(e){return this instanceof vt?(this.v=e,this):new vt(e)}function Ma(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(e,t||[]),s,i=[];return s={},o("next"),o("throw"),o("return"),s[Symbol.asyncIterator]=function(){return this},s;function o(f){n[f]&&(s[f]=function(m){return new Promise(function(g,A){i.push([f,m,g,A])>1||a(f,m)})})}function a(f,m){try{c(n[f](m))}catch(g){p(i[0][3],g)}}function c(f){f.value instanceof vt?Promise.resolve(f.value.v).then(u,d):p(i[0][2],f)}function u(f){a("next",f)}function d(f){a("throw",f)}function p(f,m){f(m),i.shift(),i.length&&a(i[0][0],i[0][1])}}function Na(e){var t,r;return t={},n("next"),n("throw",function(s){throw s}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(s,i){t[s]=e[s]?function(o){return(r=!r)?{value:vt(e[s](o)),done:s==="return"}:i?i(o):o}:i}}function Ia(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof Sr=="function"?Sr(e):e[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(i){r[i]=e[i]&&function(o){return new Promise(function(a,c){o=e[i](o),s(a,c,o.done,o.value)})}}function s(i,o,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},o)}}function Ua(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function Ba(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function $a(e){return e&&e.__esModule?e:{default:e}}function La(e,t){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}function ja(e,t,r){if(!t.has(e))throw new TypeError("attempted to set private field on non-instance");return t.set(e,r),r}const Da=Object.freeze(Object.defineProperty({__proto__:null,get __assign(){return vr},__asyncDelegator:Na,__asyncGenerator:Ma,__asyncValues:Ia,__await:vt,__awaiter:Ca,__classPrivateFieldGet:La,__classPrivateFieldSet:ja,__createBinding:Ra,__decorate:Ea,__exportStar:Ta,__extends:Sa,__generator:Pa,__importDefault:$a,__importStar:Ba,__makeTemplateObject:Ua,__metadata:ka,__param:xa,__read:Ei,__rest:Aa,__spread:_a,__spreadArrays:Oa,__values:Sr},Symbol.toStringTag,{value:"Module"})),ge=Nr(Da);var sn={},Ke={};const Fa=e=>{const t=[];for(let r=0,n=e.length;r<n;r++){const s=e.charCodeAt(r);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192,s&63|128);else if(r+1<e.length&&(s&64512)===55296&&(e.charCodeAt(r+1)&64512)===56320){const i=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023);t.push(i>>18|240,i>>12&63|128,i>>6&63|128,i&63|128)}else t.push(s>>12|224,s>>6&63|128,s&63|128)}return Uint8Array.from(t)},Ha=e=>{let t="";for(let r=0,n=e.length;r<n;r++){const s=e[r];if(s<128)t+=String.fromCharCode(s);else if(192<=s&&s<224){const i=e[++r];t+=String.fromCharCode((s&31)<<6|i&63)}else if(240<=s&&s<365){const i="%"+[s,e[++r],e[++r],e[++r]].map(o=>o.toString(16)).join("%");t+=decodeURIComponent(i)}else t+=String.fromCharCode((s&15)<<12|(e[++r]&63)<<6|e[++r]&63)}return t};function za(e){return new TextEncoder().encode(e)}function qa(e){return new TextDecoder("utf-8").decode(e)}const Va=e=>typeof TextEncoder=="function"?za(e):Fa(e),Wa=e=>typeof TextDecoder=="function"?qa(e):Ha(e),Ka=Object.freeze(Object.defineProperty({__proto__:null,fromUtf8:Va,toUtf8:Wa},Symbol.toStringTag,{value:"Module"})),Ut=Nr(Ka);var on;function Ga(){if(on)return Ke;on=1,Object.defineProperty(Ke,"__esModule",{value:!0}),Ke.convertToBuffer=void 0;var e=Ut,t=typeof Buffer<"u"&&Buffer.from?function(n){return Buffer.from(n,"utf8")}:e.fromUtf8;function r(n){return n instanceof Uint8Array?n:typeof n=="string"?t(n):ArrayBuffer.isView(n)?new Uint8Array(n.buffer,n.byteOffset,n.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(n)}return Ke.convertToBuffer=r,Ke}var Ge={},an;function Za(){if(an)return Ge;an=1,Object.defineProperty(Ge,"__esModule",{value:!0}),Ge.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return Ge.isEmptyData=e,Ge}var Ze={},cn;function Xa(){if(cn)return Ze;cn=1,Object.defineProperty(Ze,"__esModule",{value:!0}),Ze.numToUint8=void 0;function e(t){return new Uint8Array([(t&4278190080)>>24,(t&16711680)>>16,(t&65280)>>8,t&255])}return Ze.numToUint8=e,Ze}var Xe={},un;function Ya(){if(un)return Xe;un=1,Object.defineProperty(Xe,"__esModule",{value:!0}),Xe.uint32ArrayFrom=void 0;function e(t){if(!Uint32Array.from){for(var r=new Uint32Array(t.length),n=0;n<t.length;)r[n]=t[n],n+=1;return r}return Uint32Array.from(t)}return Xe.uint32ArrayFrom=e,Xe}var dn;function Oe(){return dn||(dn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.uint32ArrayFrom=e.numToUint8=e.isEmptyData=e.convertToBuffer=void 0;var t=Ga();Object.defineProperty(e,"convertToBuffer",{enumerable:!0,get:function(){return t.convertToBuffer}});var r=Za();Object.defineProperty(e,"isEmptyData",{enumerable:!0,get:function(){return r.isEmptyData}});var n=Xa();Object.defineProperty(e,"numToUint8",{enumerable:!0,get:function(){return n.numToUint8}});var s=Ya();Object.defineProperty(e,"uint32ArrayFrom",{enumerable:!0,get:function(){return s.uint32ArrayFrom}})}(sn)),sn}var Ye={},ln;function Ja(){if(ln)return Ye;ln=1,Object.defineProperty(Ye,"__esModule",{value:!0}),Ye.AwsCrc32=void 0;var e=ge,t=Oe(),r=xi(),n=function(){function s(){this.crc32=new r.Crc32}return s.prototype.update=function(i){(0,t.isEmptyData)(i)||this.crc32.update((0,t.convertToBuffer)(i))},s.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,(0,t.numToUint8)(this.crc32.digest())]})})},s.prototype.reset=function(){this.crc32=new r.Crc32},s}();return Ye.AwsCrc32=n,Ye}var hn;function xi(){return hn||(hn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32=e.Crc32=e.crc32=void 0;var t=ge,r=Oe();function n(c){return new s().update(c).digest()}e.crc32=n;var s=function(){function c(){this.checksum=4294967295}return c.prototype.update=function(u){var d,p;try{for(var f=t.__values(u),m=f.next();!m.done;m=f.next()){var g=m.value;this.checksum=this.checksum>>>8^o[(this.checksum^g)&255]}}catch(A){d={error:A}}finally{try{m&&!m.done&&(p=f.return)&&p.call(f)}finally{if(d)throw d.error}}return this},c.prototype.digest=function(){return(this.checksum^4294967295)>>>0},c}();e.Crc32=s;var i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],o=(0,r.uint32ArrayFrom)(i),a=Ja();Object.defineProperty(e,"AwsCrc32",{enumerable:!0,get:function(){return a.AwsCrc32}})}(nn)),nn}var Ir=xi();const ki={},Ar={};for(let e=0;e<256;e++){let t=e.toString(16).toLowerCase();t.length===1&&(t=`0${t}`),ki[e]=t,Ar[t]=e}function Qa(e){if(e.length%2!==0)throw new Error("Hex encoded strings must have an even number length");const t=new Uint8Array(e.length/2);for(let r=0;r<e.length;r+=2){const n=e.slice(r,r+2).toLowerCase();if(n in Ar)t[r/2]=Ar[n];else throw new Error(`Cannot decode unrecognized sequence ${n} as hexadecimal`)}return t}function oe(e){let t="";for(let r=0;r<e.byteLength;r++)t+=ki[e[r]];return t}class mt{constructor(t){if(this.bytes=t,t.byteLength!==8)throw new Error("Int64 buffers must be exactly 8 bytes")}static fromNumber(t){if(t>9223372036854776e3||t<-9223372036854776e3)throw new Error(`${t} is too large (or, if negative, too small) to represent as an Int64`);const r=new Uint8Array(8);for(let n=7,s=Math.abs(Math.round(t));n>-1&&s>0;n--,s/=256)r[n]=s;return t<0&&fn(r),new mt(r)}valueOf(){const t=this.bytes.slice(0),r=t[0]&128;return r&&fn(t),parseInt(oe(t),16)*(r?-1:1)}toString(){return String(this.valueOf())}}function fn(e){for(let t=0;t<8;t++)e[t]^=255;for(let t=7;t>-1&&(e[t]++,e[t]===0);t--);}class Ci{constructor(t,r){this.toUtf8=t,this.fromUtf8=r}format(t){const r=[];for(const i of Object.keys(t)){const o=this.fromUtf8(i);r.push(Uint8Array.from([o.byteLength]),o,this.formatHeaderValue(t[i]))}const n=new Uint8Array(r.reduce((i,o)=>i+o.byteLength,0));let s=0;for(const i of r)n.set(i,s),s+=i.byteLength;return n}formatHeaderValue(t){switch(t.type){case"boolean":return Uint8Array.from([t.value?0:1]);case"byte":return Uint8Array.from([2,t.value]);case"short":const r=new DataView(new ArrayBuffer(3));return r.setUint8(0,3),r.setInt16(1,t.value,!1),new Uint8Array(r.buffer);case"integer":const n=new DataView(new ArrayBuffer(5));return n.setUint8(0,4),n.setInt32(1,t.value,!1),new Uint8Array(n.buffer);case"long":const s=new Uint8Array(9);return s[0]=5,s.set(t.value.bytes,1),s;case"binary":const i=new DataView(new ArrayBuffer(3+t.value.byteLength));i.setUint8(0,6),i.setUint16(1,t.value.byteLength,!1);const o=new Uint8Array(i.buffer);return o.set(t.value,3),o;case"string":const a=this.fromUtf8(t.value),c=new DataView(new ArrayBuffer(3+a.byteLength));c.setUint8(0,7),c.setUint16(1,a.byteLength,!1);const u=new Uint8Array(c.buffer);return u.set(a,3),u;case"timestamp":const d=new Uint8Array(9);return d[0]=8,d.set(mt.fromNumber(t.value.valueOf()).bytes,1),d;case"uuid":if(!cc.test(t.value))throw new Error(`Invalid UUID received: ${t.value}`);const p=new Uint8Array(17);return p[0]=9,p.set(Qa(t.value.replace(/\-/g,"")),1),p}}parse(t){const r={};let n=0;for(;n<t.byteLength;){const s=t.getUint8(n++),i=this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,s));switch(n+=s,t.getUint8(n++)){case 0:r[i]={type:gn,value:!0};break;case 1:r[i]={type:gn,value:!1};break;case 2:r[i]={type:ec,value:t.getInt8(n++)};break;case 3:r[i]={type:tc,value:t.getInt16(n,!1)},n+=2;break;case 4:r[i]={type:rc,value:t.getInt32(n,!1)},n+=4;break;case 5:r[i]={type:nc,value:new mt(new Uint8Array(t.buffer,t.byteOffset+n,8))},n+=8;break;case 6:const o=t.getUint16(n,!1);n+=2,r[i]={type:sc,value:new Uint8Array(t.buffer,t.byteOffset+n,o)},n+=o;break;case 7:const a=t.getUint16(n,!1);n+=2,r[i]={type:ic,value:this.toUtf8(new Uint8Array(t.buffer,t.byteOffset+n,a))},n+=a;break;case 8:r[i]={type:oc,value:new Date(new mt(new Uint8Array(t.buffer,t.byteOffset+n,8)).valueOf())},n+=8;break;case 9:const c=new Uint8Array(t.buffer,t.byteOffset+n,16);n+=16,r[i]={type:ac,value:`${oe(c.subarray(0,4))}-${oe(c.subarray(4,6))}-${oe(c.subarray(6,8))}-${oe(c.subarray(8,10))}-${oe(c.subarray(10))}`};break;default:throw new Error("Unrecognized header type tag")}}return r}}var pn;(function(e){e[e.boolTrue=0]="boolTrue",e[e.boolFalse=1]="boolFalse",e[e.byte=2]="byte",e[e.short=3]="short",e[e.integer=4]="integer",e[e.long=5]="long",e[e.byteArray=6]="byteArray",e[e.string=7]="string",e[e.timestamp=8]="timestamp",e[e.uuid=9]="uuid"})(pn||(pn={}));const gn="boolean",ec="byte",tc="short",rc="integer",nc="long",sc="binary",ic="string",oc="timestamp",ac="uuid",cc=/^[a-f0-9]{8}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{4}-[a-f0-9]{12}$/,Pi=4,Pe=Pi*2,Ie=4,uc=Pe+Ie*2;function dc({byteLength:e,byteOffset:t,buffer:r}){if(e<uc)throw new Error("Provided message too short to accommodate event stream message overhead");const n=new DataView(r,t,e),s=n.getUint32(0,!1);if(e!==s)throw new Error("Reported message length does not match received message length");const i=n.getUint32(Pi,!1),o=n.getUint32(Pe,!1),a=n.getUint32(e-Ie,!1),c=new Ir.Crc32().update(new Uint8Array(r,t,Pe));if(o!==c.digest())throw new Error(`The prelude checksum specified in the message (${o}) does not match the calculated CRC32 checksum (${c.digest()})`);if(c.update(new Uint8Array(r,t+Pe,e-(Pe+Ie))),a!==c.digest())throw new Error(`The message checksum (${c.digest()}) did not match the expected value of ${a}`);return{headers:new DataView(r,t+Pe+Ie,i),body:new Uint8Array(r,t+Pe+Ie+i,s-i-(Pe+Ie+Ie))}}class lc{constructor(t,r){this.headerMarshaller=new Ci(t,r),this.messageBuffer=[],this.isEndOfStream=!1}feed(t){this.messageBuffer.push(this.decode(t))}endOfStream(){this.isEndOfStream=!0}getMessage(){const t=this.messageBuffer.pop(),r=this.isEndOfStream;return{getMessage(){return t},isEndOfStream(){return r}}}getAvailableMessages(){const t=this.messageBuffer;this.messageBuffer=[];const r=this.isEndOfStream;return{getMessages(){return t},isEndOfStream(){return r}}}encode({headers:t,body:r}){const n=this.headerMarshaller.format(t),s=n.byteLength+r.byteLength+16,i=new Uint8Array(s),o=new DataView(i.buffer,i.byteOffset,i.byteLength),a=new Ir.Crc32;return o.setUint32(0,s,!1),o.setUint32(4,n.byteLength,!1),o.setUint32(8,a.update(i.subarray(0,8)).digest(),!1),i.set(n,12),i.set(r,n.byteLength+12),o.setUint32(s-4,a.update(i.subarray(8,s-4)).digest(),!1),i}decode(t){const{headers:r,body:n}=dc(t);return{headers:this.headerMarshaller.parse(r),body:n}}formatHeaders(t){return this.headerMarshaller.format(t)}}class hc{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.decoder.decode(t)}}class fc{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream)yield this.options.encoder.encode(t);this.options.includeEndFrame&&(yield new Uint8Array(0))}}class pc{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.messageStream){const r=await this.options.deserializer(t);r!==void 0&&(yield r)}}}class gc{constructor(t){this.options=t}[Symbol.asyncIterator](){return this.asyncIterator()}async*asyncIterator(){for await(const t of this.options.inputStream)yield this.options.serializer(t)}}const pe=e=>{if(typeof e=="function")return e;const t=Promise.resolve(e);return()=>t},At=e=>new TextEncoder().encode(e),Fe=e=>typeof e=="string"?At(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e),Bt=e=>new TextDecoder("utf-8").decode(e),mc="X-Amz-Algorithm",yc="X-Amz-Credential",Ri="X-Amz-Date",bc="X-Amz-SignedHeaders",wc="X-Amz-Expires",Ti="X-Amz-Signature",_i="X-Amz-Security-Token",Oi="authorization",Mi=Ri.toLowerCase(),vc="date",Sc=[Oi,Mi,vc],Ac=Ti.toLowerCase(),Er="x-amz-content-sha256",Ec=_i.toLowerCase(),xc={authorization:!0,"cache-control":!0,connection:!0,expect:!0,from:!0,"keep-alive":!0,"max-forwards":!0,pragma:!0,referer:!0,te:!0,trailer:!0,"transfer-encoding":!0,upgrade:!0,"user-agent":!0,"x-amzn-trace-id":!0},kc=/^proxy-/,Cc=/^sec-/,Ft="AWS4-HMAC-SHA256",Pc="AWS4-HMAC-SHA256-PAYLOAD",Rc="UNSIGNED-PAYLOAD",Tc=50,Ni="aws4_request",_c=60*60*24*7,Et={},Ht=[],zt=(e,t,r)=>`${e}/${t}/${r}/${Ni}`,Oc=async(e,t,r,n,s)=>{const i=await mn(e,t.secretAccessKey,t.accessKeyId),o=`${r}:${n}:${s}:${oe(i)}:${t.sessionToken}`;if(o in Et)return Et[o];for(Ht.push(o);Ht.length>Tc;)delete Et[Ht.shift()];let a=`AWS4${t.secretAccessKey}`;for(const c of[r,n,s,Ni])a=await mn(e,a,c);return Et[o]=a},mn=(e,t,r)=>{const n=new e(t);return n.update(Fe(r)),n.digest()},yn=({headers:e},t,r)=>{const n={};for(const s of Object.keys(e).sort()){if(e[s]==null)continue;const i=s.toLowerCase();(i in xc||t!=null&&t.has(i)||kc.test(i)||Cc.test(i))&&(!r||r&&!r.has(i))||(n[i]=e[s].trim().replace(/\s+/g," "))}return n},Ue=e=>encodeURIComponent(e).replace(/[!'()*]/g,Mc),Mc=e=>`%${e.charCodeAt(0).toString(16).toUpperCase()}`,Nc=({query:e={}})=>{const t=[],r={};for(const n of Object.keys(e).sort()){if(n.toLowerCase()===Ac)continue;t.push(n);const s=e[n];typeof s=="string"?r[n]=`${Ue(n)}=${Ue(s)}`:Array.isArray(s)&&(r[n]=s.slice(0).sort().reduce((i,o)=>i.concat([`${Ue(n)}=${Ue(o)}`]),[]).join("&"))}return t.map(n=>r[n]).filter(n=>n).join("&")},Ii=e=>typeof ArrayBuffer=="function"&&e instanceof ArrayBuffer||Object.prototype.toString.call(e)==="[object ArrayBuffer]",qt=async({headers:e,body:t},r)=>{for(const n of Object.keys(e))if(n.toLowerCase()===Er)return e[n];if(t==null)return"e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855";if(typeof t=="string"||ArrayBuffer.isView(t)||Ii(t)){const n=new r;return n.update(Fe(t)),oe(await n.digest())}return Rc},Ic=(e,t)=>{e=e.toLowerCase();for(const r of Object.keys(t))if(e===r.toLowerCase())return!0;return!1},Ui=({headers:e,query:t,...r})=>({...r,headers:{...e},query:t?Uc(t):void 0}),Uc=e=>Object.keys(e).reduce((t,r)=>{const n=e[r];return{...t,[r]:Array.isArray(n)?[...n]:n}},{}),Bc=(e,t={})=>{var r;const{headers:n,query:s={}}=typeof e.clone=="function"?e.clone():Ui(e);for(const i of Object.keys(n)){const o=i.toLowerCase();o.slice(0,6)==="x-amz-"&&!((r=t.unhoistableHeaders)!=null&&r.has(o))&&(s[i]=n[i],delete n[i])}return{...e,headers:n,query:s}},bn=e=>{e=typeof e.clone=="function"?e.clone():Ui(e);for(const t of Object.keys(e.headers))Sc.indexOf(t.toLowerCase())>-1&&delete e.headers[t];return e},$c=e=>Lc(e).toISOString().replace(/\.\d{3}Z$/,"Z"),Lc=e=>typeof e=="number"?new Date(e*1e3):typeof e=="string"?Number(e)?new Date(Number(e)*1e3):new Date(e):e;class xr{constructor({applyChecksum:t,credentials:r,region:n,service:s,sha256:i,uriEscapePath:o=!0}){this.headerMarshaller=new Ci(Bt,At),this.service=s,this.sha256=i,this.uriEscapePath=o,this.applyChecksum=typeof t=="boolean"?t:!0,this.regionProvider=pe(n),this.credentialProvider=pe(r)}async presign(t,r={}){const{signingDate:n=new Date,expiresIn:s=3600,unsignableHeaders:i,unhoistableHeaders:o,signableHeaders:a,signingRegion:c,signingService:u}=r,d=await this.credentialProvider();this.validateResolvedCredentials(d);const p=c??await this.regionProvider(),{longDate:f,shortDate:m}=xt(n);if(s>_c)return Promise.reject("Signature version 4 presigned URLs must have an expiration date less than one week in the future");const g=zt(m,p,u??this.service),A=Bc(bn(t),{unhoistableHeaders:o});d.sessionToken&&(A.query[_i]=d.sessionToken),A.query[mc]=Ft,A.query[yc]=`${d.accessKeyId}/${g}`,A.query[Ri]=f,A.query[wc]=s.toString(10);const N=yn(A,i,a);return A.query[bc]=wn(N),A.query[Ti]=await this.getSignature(f,g,this.getSigningKey(d,p,m,u),this.createCanonicalRequest(A,N,await qt(t,this.sha256))),A}async sign(t,r){return typeof t=="string"?this.signString(t,r):t.headers&&t.payload?this.signEvent(t,r):t.message?this.signMessage(t,r):this.signRequest(t,r)}async signEvent({headers:t,payload:r},{signingDate:n=new Date,priorSignature:s,signingRegion:i,signingService:o}){const a=i??await this.regionProvider(),{shortDate:c,longDate:u}=xt(n),d=zt(c,a,o??this.service),p=await qt({headers:{},body:r},this.sha256),f=new this.sha256;f.update(t);const m=oe(await f.digest()),g=[Pc,u,d,s,m,p].join(`
`);return this.signString(g,{signingDate:n,signingRegion:a,signingService:o})}async signMessage(t,{signingDate:r=new Date,signingRegion:n,signingService:s}){return this.signEvent({headers:this.headerMarshaller.format(t.message.headers),payload:t.message.body},{signingDate:r,signingRegion:n,signingService:s,priorSignature:t.priorSignature}).then(i=>({message:t.message,signature:i}))}async signString(t,{signingDate:r=new Date,signingRegion:n,signingService:s}={}){const i=await this.credentialProvider();this.validateResolvedCredentials(i);const o=n??await this.regionProvider(),{shortDate:a}=xt(r),c=new this.sha256(await this.getSigningKey(i,o,a,s));return c.update(Fe(t)),oe(await c.digest())}async signRequest(t,{signingDate:r=new Date,signableHeaders:n,unsignableHeaders:s,signingRegion:i,signingService:o}={}){const a=await this.credentialProvider();this.validateResolvedCredentials(a);const c=i??await this.regionProvider(),u=bn(t),{longDate:d,shortDate:p}=xt(r),f=zt(p,c,o??this.service);u.headers[Mi]=d,a.sessionToken&&(u.headers[Ec]=a.sessionToken);const m=await qt(u,this.sha256);!Ic(Er,u.headers)&&this.applyChecksum&&(u.headers[Er]=m);const g=yn(u,s,n),A=await this.getSignature(d,f,this.getSigningKey(a,c,p,o),this.createCanonicalRequest(u,g,m));return u.headers[Oi]=`${Ft} Credential=${a.accessKeyId}/${f}, SignedHeaders=${wn(g)}, Signature=${A}`,u}createCanonicalRequest(t,r,n){const s=Object.keys(r).sort();return`${t.method}
${this.getCanonicalPath(t)}
${Nc(t)}
${s.map(i=>`${i}:${r[i]}`).join(`
`)}

${s.join(";")}
${n}`}async createStringToSign(t,r,n){const s=new this.sha256;s.update(Fe(n));const i=await s.digest();return`${Ft}
${t}
${r}
${oe(i)}`}getCanonicalPath({path:t}){if(this.uriEscapePath){const r=[];for(const s of t.split("/"))(s==null?void 0:s.length)!==0&&s!=="."&&(s===".."?r.pop():r.push(s));const n=`${t!=null&&t.startsWith("/")?"/":""}${r.join("/")}${r.length>0&&t!=null&&t.endsWith("/")?"/":""}`;return encodeURIComponent(n).replace(/%2F/g,"/")}return t}async getSignature(t,r,n,s){const i=await this.createStringToSign(t,r,s),o=new this.sha256(await n);return o.update(Fe(i)),oe(await o.digest())}getSigningKey(t,r,n,s){return Oc(this.sha256,t,n,r,s||this.service)}validateResolvedCredentials(t){if(typeof t!="object"||typeof t.accessKeyId!="string"||typeof t.secretAccessKey!="string")throw new Error("Resolved credential object is not valid")}}const xt=e=>{const t=$c(e).replace(/[\-:]/g,"");return{longDate:t,shortDate:t.slice(0,8)}},wn=e=>Object.keys(e).sort().join(";"),jc=3e5,Dc=e=>{const t=e.credentials?Fc(e.credentials):e.credentialDefaultProvider(e),{signingEscapePath:r=!0,systemClockOffset:n=e.systemClockOffset||0,sha256:s}=e;let i;return e.signer?i=pe(e.signer):e.regionInfoProvider?i=()=>pe(e.region)().then(async o=>[await e.regionInfoProvider(o,{useFipsEndpoint:await e.useFipsEndpoint(),useDualstackEndpoint:await e.useDualstackEndpoint()})||{},o]).then(([o,a])=>{const{signingRegion:c,signingService:u}=o;e.signingRegion=e.signingRegion||c||a,e.signingName=e.signingName||u||e.serviceId;const d={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r},p=e.signerConstructor||xr;return new p(d)}):i=async o=>{o=Object.assign({},{name:"sigv4",signingName:e.signingName||e.defaultSigningName,signingRegion:await pe(e.region)(),properties:{}},o);const a=o.signingRegion,c=o.signingName;e.signingRegion=e.signingRegion||a,e.signingName=e.signingName||c||e.serviceId;const u={...e,credentials:t,region:e.signingRegion,service:e.signingName,sha256:s,uriEscapePath:r},d=e.signerConstructor||xr;return new d(u)},{...e,systemClockOffset:n,signingEscapePath:r,credentials:t,signer:i}},Fc=e=>typeof e=="function"?Ai(e,t=>t.expiration!==void 0&&t.expiration.getTime()-Date.now()<jc,t=>t.expiration!==void 0):pe(e),Bi=e=>new Date(Date.now()+e),Hc=(e,t)=>Math.abs(Bi(t).getTime()-e)>=3e5,vn=(e,t)=>{const r=Date.parse(e);return Hc(r,t)?r-Date.now():t},zc=e=>(t,r)=>async function(n){var s,i,o,a;if(!ae.isInstance(n.request))return t(n);const c=(o=(i=(s=r.endpointV2)==null?void 0:s.properties)==null?void 0:i.authSchemes)==null?void 0:o[0],u=(c==null?void 0:c.name)==="sigv4a"?(a=c==null?void 0:c.signingRegionSet)==null?void 0:a.join(","):void 0,d=await e.signer(c),p=await t({...n,request:await d.sign(n.request,{signingDate:Bi(e.systemClockOffset),signingRegion:u||r.signing_region,signingService:r.signing_service})}).catch(m=>{const g=m.ServerTime??Sn(m.$response);throw g&&(e.systemClockOffset=vn(g,e.systemClockOffset)),m}),f=Sn(p.response);return f&&(e.systemClockOffset=vn(f,e.systemClockOffset)),p},Sn=e=>{var t,r;return Tt.isInstance(e)?((t=e.headers)==null?void 0:t.date)??((r=e.headers)==null?void 0:r.Date):void 0},qc={name:"awsAuthMiddleware",tags:["SIGNATURE","AWSAUTH"],relation:"after",toMiddleware:"retryMiddleware",override:!0},Vc=e=>({applyToStack:t=>{t.addRelativeTo(zc(e),qc)}});function Wc(e){return{...e,customUserAgent:typeof e.customUserAgent=="string"?[[e.customUserAgent]]:e.customUserAgent}}const Kc=[{id:"aws",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^(us|eu|ap|sa|ca|me|af|il)\\-\\w+\\-\\d+$",regions:{"af-south-1":{description:"Africa (Cape Town)"},"ap-east-1":{description:"Asia Pacific (Hong Kong)"},"ap-northeast-1":{description:"Asia Pacific (Tokyo)"},"ap-northeast-2":{description:"Asia Pacific (Seoul)"},"ap-northeast-3":{description:"Asia Pacific (Osaka)"},"ap-south-1":{description:"Asia Pacific (Mumbai)"},"ap-south-2":{description:"Asia Pacific (Hyderabad)"},"ap-southeast-1":{description:"Asia Pacific (Singapore)"},"ap-southeast-2":{description:"Asia Pacific (Sydney)"},"ap-southeast-3":{description:"Asia Pacific (Jakarta)"},"ap-southeast-4":{description:"Asia Pacific (Melbourne)"},"aws-global":{description:"AWS Standard global region"},"ca-central-1":{description:"Canada (Central)"},"eu-central-1":{description:"Europe (Frankfurt)"},"eu-central-2":{description:"Europe (Zurich)"},"eu-north-1":{description:"Europe (Stockholm)"},"eu-south-1":{description:"Europe (Milan)"},"eu-south-2":{description:"Europe (Spain)"},"eu-west-1":{description:"Europe (Ireland)"},"eu-west-2":{description:"Europe (London)"},"eu-west-3":{description:"Europe (Paris)"},"me-central-1":{description:"Middle East (UAE)"},"me-south-1":{description:"Middle East (Bahrain)"},"sa-east-1":{description:"South America (Sao Paulo)"},"us-east-1":{description:"US East (N. Virginia)"},"us-east-2":{description:"US East (Ohio)"},"us-west-1":{description:"US West (N. California)"},"us-west-2":{description:"US West (Oregon)"}}},{id:"aws-cn",outputs:{dnsSuffix:"amazonaws.com.cn",dualStackDnsSuffix:"api.amazonwebservices.com.cn",name:"aws-cn",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^cn\\-\\w+\\-\\d+$",regions:{"aws-cn-global":{description:"AWS China global region"},"cn-north-1":{description:"China (Beijing)"},"cn-northwest-1":{description:"China (Ningxia)"}}},{id:"aws-us-gov",outputs:{dnsSuffix:"amazonaws.com",dualStackDnsSuffix:"api.aws",name:"aws-us-gov",supportsDualStack:!0,supportsFIPS:!0},regionRegex:"^us\\-gov\\-\\w+\\-\\d+$",regions:{"aws-us-gov-global":{description:"AWS GovCloud (US) global region"},"us-gov-east-1":{description:"AWS GovCloud (US-East)"},"us-gov-west-1":{description:"AWS GovCloud (US-West)"}}},{id:"aws-iso",outputs:{dnsSuffix:"c2s.ic.gov",dualStackDnsSuffix:"c2s.ic.gov",name:"aws-iso",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-iso\\-\\w+\\-\\d+$",regions:{"aws-iso-global":{description:"AWS ISO (US) global region"},"us-iso-east-1":{description:"US ISO East"},"us-iso-west-1":{description:"US ISO WEST"}}},{id:"aws-iso-b",outputs:{dnsSuffix:"sc2s.sgov.gov",dualStackDnsSuffix:"sc2s.sgov.gov",name:"aws-iso-b",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isob\\-\\w+\\-\\d+$",regions:{"aws-iso-b-global":{description:"AWS ISOB (US) global region"},"us-isob-east-1":{description:"US ISOB East (Ohio)"}}},{id:"aws-iso-e",outputs:{dnsSuffix:"cloud.adc-e.uk",dualStackDnsSuffix:"cloud.adc-e.uk",name:"aws-iso-e",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^eu\\-isoe\\-\\w+\\-\\d+$",regions:{}},{id:"aws-iso-f",outputs:{dnsSuffix:"csp.hci.ic.gov",dualStackDnsSuffix:"csp.hci.ic.gov",name:"aws-iso-f",supportsDualStack:!1,supportsFIPS:!0},regionRegex:"^us\\-isof\\-\\w+\\-\\d+$",regions:{}}],Gc="1.1",$i={partitions:Kc,version:Gc};let Li=$i,ji="";const Zc=e=>{const{partitions:t}=Li;for(const n of t){const{regions:s,outputs:i}=n;for(const[o,a]of Object.entries(s))if(o===e)return{...i,...a}}for(const n of t){const{regionRegex:s,outputs:i}=n;if(new RegExp(s).test(e))return{...i}}const r=t.find(n=>n.id==="aws");if(!r)throw new Error("Provided region was not found in the partition array or regex, and default partition with id 'aws' doesn't exist.");return{...r.outputs}},Di=(e,t="")=>{Li=e,ji=t},Xc=()=>{Di($i,"")},Fi=()=>ji,Yc=new RegExp("^(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}$"),Hi=e=>Yc.test(e)||e.startsWith("[")&&e.endsWith("]"),St="endpoints";function Te(e){return typeof e!="object"||e==null?e:"ref"in e?`$${Te(e.ref)}`:"fn"in e?`${e.fn}(${(e.argv||[]).map(Te).join(", ")})`:JSON.stringify(e,null,2)}class ce extends Error{constructor(t){super(t),this.name="EndpointError"}}const Jc=new RegExp("^(?!.*-$)(?!-)[a-zA-Z0-9-]{1,63}$"),Ur=(e,t=!1)=>{if(!t)return Jc.test(e);const r=e.split(".");for(const n of r)if(!Ur(n))return!1;return!0},zi=(e,t=!1)=>{if(t){for(const r of e.split("."))if(!zi(r))return!1;return!0}return!(!Ur(e)||e.length<3||e.length>63||e!==e.toLowerCase()||Hi(e))},Qc=e=>{const t=e.split(":");if(t.length<6)return null;const[r,n,s,i,o,...a]=t;return r!=="arn"||n===""||s===""||a[0]===""?null:{partition:n,service:s,region:i,accountId:o,resourceId:a[0].includes("/")?a[0].split("/"):a}},eu=Object.freeze(Object.defineProperty({__proto__:null,getUserAgentPrefix:Fi,isVirtualHostableS3Bucket:zi,parseArn:Qc,partition:Zc,setPartitionInfo:Di,useDefaultPartitionInfo:Xc},Symbol.toStringTag,{value:"Module"})),tu=(e,t)=>e===t,ru=e=>{const t=e.split("."),r=[];for(const n of t){const s=n.indexOf("[");if(s!==-1){if(n.indexOf("]")!==n.length-1)throw new ce(`Path: '${e}' does not end with ']'`);const i=n.slice(s+1,-1);if(Number.isNaN(parseInt(i)))throw new ce(`Invalid array index: '${i}' in path: '${e}'`);s!==0&&r.push(n.slice(0,s)),r.push(i)}else r.push(n)}return r},qi=(e,t)=>ru(t).reduce((r,n)=>{if(typeof r!="object")throw new ce(`Index '${n}' in '${t}' not found in '${JSON.stringify(e)}'`);return Array.isArray(r)?r[parseInt(n)]:r[n]},e),nu=e=>e!=null,su=e=>!e;var An;(function(e){e.AAAA="AAAA",e.A="A"})(An||(An={}));const Vt={[wt.HTTP]:80,[wt.HTTPS]:443},iu=e=>{const t=(()=>{try{if(e instanceof URL)return e;if(typeof e=="object"&&"hostname"in e){const{hostname:f,port:m,protocol:g="",path:A="",query:N={}}=e,me=new URL(`${g}//${f}${m?`:${m}`:""}${A}`);return me.search=Object.entries(N).map(([we,je])=>`${we}=${je}`).join("&"),me}return new URL(e)}catch{return null}})();if(!t)return null;const r=t.href,{host:n,hostname:s,pathname:i,protocol:o,search:a}=t;if(a)return null;const c=o.slice(0,-1);if(!Object.values(wt).includes(c))return null;const u=Hi(s),d=r.includes(`${n}:${Vt[c]}`)||typeof e=="string"&&e.includes(`${n}:${Vt[c]}`),p=`${n}${d?`:${Vt[c]}`:""}`;return{scheme:c,authority:p,path:i,normalizedPath:i.endsWith("/")?i:`${i}/`,isIp:u}},ou=(e,t)=>e===t,au=(e,t,r,n)=>t>=r||e.length<r?null:n?e.substring(e.length-r,e.length-t):e.substring(t,r),cu=e=>encodeURIComponent(e).replace(/[!*'()]/g,t=>`%${t.charCodeAt(0).toString(16).toUpperCase()}`),uu=Object.freeze(Object.defineProperty({__proto__:null,aws:eu,booleanEquals:tu,getAttr:qi,isSet:nu,isValidHostLabel:Ur,not:su,parseURL:iu,stringEquals:ou,substring:au,uriEncode:cu},Symbol.toStringTag,{value:"Module"})),Vi=(e,t)=>{const r=[],n={...t.endpointParams,...t.referenceRecord};let s=0;for(;s<e.length;){const i=e.indexOf("{",s);if(i===-1){r.push(e.slice(s));break}r.push(e.slice(s,i));const o=e.indexOf("}",i);if(o===-1){r.push(e.slice(i));break}e[i+1]==="{"&&e[o+1]==="}"&&(r.push(e.slice(i+1,o)),s=o+2);const a=e.substring(i+1,o);if(a.includes("#")){const[c,u]=a.split("#");r.push(qi(n[c],u))}else r.push(n[a]);s=o+1}return r.join("")},du=({ref:e},t)=>({...t.endpointParams,...t.referenceRecord})[e],$t=(e,t,r)=>{if(typeof e=="string")return Vi(e,r);if(e.fn)return Wi(e,r);if(e.ref)return du(e,r);throw new ce(`'${t}': ${String(e)} is not a string, function or reference.`)},Wi=({fn:e,argv:t},r)=>{const n=t.map(s=>["boolean","number"].includes(typeof s)?s:$t(s,"arg",r));return e.split(".").reduce((s,i)=>s[i],uu)(...n)},lu=({assign:e,...t},r)=>{var n,s;if(e&&e in r.referenceRecord)throw new ce(`'${e}' is already defined in Reference Record.`);const i=Wi(t,r);return(s=(n=r.logger)==null?void 0:n.debug)==null||s.call(n,St,`evaluateCondition: ${Te(t)} = ${Te(i)}`),{result:i===""?!0:!!i,...e!=null&&{toAssign:{name:e,value:i}}}},Br=(e=[],t)=>{var r,n;const s={};for(const i of e){const{result:o,toAssign:a}=lu(i,{...t,referenceRecord:{...t.referenceRecord,...s}});if(!o)return{result:o};a&&(s[a.name]=a.value,(n=(r=t.logger)==null?void 0:r.debug)==null||n.call(r,St,`assign: ${a.name} := ${Te(a.value)}`))}return{result:!0,referenceRecord:s}},hu=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:s.map(i=>{const o=$t(i,"Header value entry",t);if(typeof o!="string")throw new ce(`Header '${n}' value '${o}' is not a string`);return o})}),{}),Ki=(e,t)=>{if(Array.isArray(e))return e.map(r=>Ki(r,t));switch(typeof e){case"string":return Vi(e,t);case"object":if(e===null)throw new ce(`Unexpected endpoint property: ${e}`);return Gi(e,t);case"boolean":return e;default:throw new ce(`Unexpected endpoint property type: ${typeof e}`)}},Gi=(e,t)=>Object.entries(e).reduce((r,[n,s])=>({...r,[n]:Ki(s,t)}),{}),fu=(e,t)=>{const r=$t(e,"Endpoint URL",t);if(typeof r=="string")try{return new URL(r)}catch(n){throw n}throw new ce(`Endpoint URL must be a string, got ${typeof r}`)},pu=(e,t)=>{var r,n;const{conditions:s,endpoint:i}=e,{result:o,referenceRecord:a}=Br(s,t);if(!o)return;const c={...t,referenceRecord:{...t.referenceRecord,...a}},{url:u,properties:d,headers:p}=i;return(n=(r=t.logger)==null?void 0:r.debug)==null||n.call(r,St,`Resolving endpoint from template: ${Te(i)}`),{...p!=null&&{headers:hu(p,c)},...d!=null&&{properties:Gi(d,c)},url:fu(u,c)}},gu=(e,t)=>{const{conditions:r,error:n}=e,{result:s,referenceRecord:i}=Br(r,t);if(s)throw new ce($t(n,"Error",{...t,referenceRecord:{...t.referenceRecord,...i}}))},mu=(e,t)=>{const{conditions:r,rules:n}=e,{result:s,referenceRecord:i}=Br(r,t);if(s)return Zi(n,{...t,referenceRecord:{...t.referenceRecord,...i}})},Zi=(e,t)=>{for(const r of e)if(r.type==="endpoint"){const n=pu(r,t);if(n)return n}else if(r.type==="error")gu(r,t);else if(r.type==="tree"){const n=mu(r,t);if(n)return n}else throw new ce(`Unknown endpoint rule: ${r}`);throw new ce("Rules evaluation failed")},yu=(e,t)=>{var r,n,s,i,o;const{endpointParams:a,logger:c}=t,{parameters:u,rules:d}=e;(n=(r=t.logger)==null?void 0:r.debug)==null||n.call(r,`${St} Initial EndpointParams: ${Te(a)}`);const p=Object.entries(u).filter(([,g])=>g.default!=null).map(([g,A])=>[g,A.default]);if(p.length>0)for(const[g,A]of p)a[g]=a[g]??A;const f=Object.entries(u).filter(([,g])=>g.required).map(([g])=>g);for(const g of f)if(a[g]==null)throw new ce(`Missing required parameter: '${g}'`);const m=Zi(d,{endpointParams:a,logger:c,referenceRecord:{}});if((s=t.endpointParams)!=null&&s.Endpoint)try{const g=new URL(t.endpointParams.Endpoint),{protocol:A,port:N}=g;m.url.protocol=A,m.url.port=N}catch{}return(o=(i=t.logger)==null?void 0:i.debug)==null||o.call(i,`${St} Resolved endpoint: ${Te(m)}`),m},En="user-agent",Wt="x-amz-user-agent",xn=" ",Kt="/",bu=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w]/g,wu=/[^\!\$\%\&\'\*\+\-\.\^\_\`\|\~\d\w\#]/g,kn="-",vu=e=>(t,r)=>async n=>{var s,i;const{request:o}=n;if(!ae.isInstance(o))return t(n);const{headers:a}=o,c=((s=r==null?void 0:r.userAgent)==null?void 0:s.map(Gt))||[],u=(await e.defaultUserAgentProvider()).map(Gt),d=((i=e==null?void 0:e.customUserAgent)==null?void 0:i.map(Gt))||[],p=Fi(),f=(p?[p]:[]).concat([...u,...c,...d]).join(xn),m=[...u.filter(g=>g.startsWith("aws-sdk-")),...d].join(xn);return e.runtime!=="browser"?(m&&(a[Wt]=a[Wt]?`${a[En]} ${m}`:m),a[En]=f):a[Wt]=f,t({...n,request:o})},Gt=e=>{var t;const r=e[0].split(Kt).map(a=>a.replace(bu,kn)).join(Kt),n=(t=e[1])==null?void 0:t.replace(wu,kn),s=r.indexOf(Kt),i=r.substring(0,s);let o=r.substring(s+1);return i==="api"&&(o=o.toLowerCase()),[i,o,n].filter(a=>a&&a.length>0).reduce((a,c,u)=>{switch(u){case 0:return c;case 1:return`${a}/${c}`;default:return`${a}#${c}`}},"")},Su={name:"getUserAgentMiddleware",step:"build",priority:"low",tags:["SET_USER_AGENT","USER_AGENT"],override:!0},Au=e=>({applyToStack:t=>{t.add(vu(e),Su)}});var Cn;(function(e){e.ENV="env",e.CONFIG="shared config entry"})(Cn||(Cn={}));const Eu=!1,xu=!1,Xi=e=>typeof e=="string"&&(e.startsWith("fips-")||e.endsWith("-fips")),Pn=e=>Xi(e)?["fips-aws-global","aws-fips"].includes(e)?"us-east-1":e.replace(/fips-(dkr-|prod-)?|-fips/,""):e,ku=e=>{const{region:t,useFipsEndpoint:r}=e;if(!t)throw new Error("Region is missing");return{...e,region:async()=>{if(typeof t=="string")return Pn(t);const n=await t();return Pn(n)},useFipsEndpoint:async()=>{const n=typeof t=="string"?t:await t();return Xi(n)?!0:typeof r!="function"?Promise.resolve(!!r):r()}}},Cu=e=>({...e,eventStreamMarshaller:e.eventStreamSerdeProvider(e)}),Rn="content-length";function Pu(e){return t=>async r=>{const n=r.request;if(ae.isInstance(n)){const{body:s,headers:i}=n;if(s&&Object.keys(i).map(o=>o.toLowerCase()).indexOf(Rn)===-1)try{const o=e(s);n.headers={...n.headers,[Rn]:String(o)}}catch{}}return t({...r,request:n})}}const Ru={step:"build",tags:["SET_CONTENT_LENGTH","CONTENT_LENGTH"],name:"contentLengthMiddleware",override:!0},Tu=e=>({applyToStack:t=>{t.add(Pu(e.bodyLengthChecker),Ru)}}),_u=async e=>{const t=(e==null?void 0:e.Bucket)||"";if(typeof e.Bucket=="string"&&(e.Bucket=t.replace(/#/g,encodeURIComponent("#")).replace(/\?/g,encodeURIComponent("?"))),Uu(t)){if(e.ForcePathStyle===!0)throw new Error("Path-style addressing cannot be used with ARN buckets")}else(!Iu(t)||t.indexOf(".")!==-1&&!String(e.Endpoint).startsWith("http:")||t.toLowerCase()!==t||t.length<3)&&(e.ForcePathStyle=!0);return e.DisableMultiRegionAccessPoints&&(e.disableMultiRegionAccessPoints=!0,e.DisableMRAP=!0),e},Ou=/^[a-z0-9][a-z0-9\.\-]{1,61}[a-z0-9]$/,Mu=/(\d+\.){3}\d+/,Nu=/\.\./,Iu=e=>Ou.test(e)&&!Mu.test(e)&&!Nu.test(e),Uu=e=>{const[t,r,n,s,i,o]=e.split(":"),a=t==="arn"&&e.split(":").length>=6,c=[t,r,n,i,o].filter(Boolean).length===5;if(a&&!c)throw new Error(`Invalid ARN: ${e} was an invalid ARN.`);return t==="arn"&&!!r&&!!n&&!!i&&!!o},Bu=(e,t,r)=>{const n=async()=>{const s=r[e]??r[t];return typeof s=="function"?s():s};return e==="endpoint"||t==="endpoint"?async()=>{const s=await n();if(s&&typeof s=="object"){if("url"in s)return s.url.href;if("hostname"in s){const{protocol:i,hostname:o,port:a,path:c}=s;return`${i}//${o}${a?":"+a:""}${c}`}}return s}:n},$u=async(e,t,r,n)=>{const s=await Lu(e,t,r);if(typeof r.endpointProvider!="function")throw new Error("config.endpointProvider is not set.");return r.endpointProvider(s,n)},Lu=async(e,t,r)=>{var n;const s={},i=((n=t==null?void 0:t.getEndpointParameterInstructions)==null?void 0:n.call(t))||{};for(const[o,a]of Object.entries(i))switch(a.type){case"staticContextParams":s[o]=a.value;break;case"contextParams":s[o]=e[a.name];break;case"clientContextParams":case"builtInParams":s[o]=await Bu(a.name,o,r)();break;default:throw new Error("Unrecognized endpoint parameter instruction: "+JSON.stringify(a))}return Object.keys(i).length===0&&Object.assign(s,r),String(r.serviceId).toLowerCase()==="s3"&&await _u(s),s};function ju(e){const t={};if(e=e.replace(/^\?/,""),e)for(const r of e.split("&")){let[n,s=null]=r.split("=");n=decodeURIComponent(n),s&&(s=decodeURIComponent(s)),n in t?Array.isArray(t[n])?t[n].push(s):t[n]=[t[n],s]:t[n]=s}return t}const _t=e=>{if(typeof e=="string")return _t(new URL(e));const{hostname:t,pathname:r,port:n,protocol:s,search:i}=e;let o;return i&&(o=ju(i)),{hostname:t,port:n?parseInt(n):void 0,protocol:s,path:r,query:o}},Du=e=>typeof e=="object"?"url"in e?_t(e.url):e:_t(e),Fu=({config:e,instructions:t})=>(r,n)=>async s=>{var i,o;const a=await $u(s.input,{getEndpointParameterInstructions(){return t}},{...e},n);n.endpointV2=a,n.authSchemes=(i=a.properties)==null?void 0:i.authSchemes;const c=(o=n.authSchemes)==null?void 0:o[0];return c&&(n.signing_region=c.signingRegion,n.signing_service=c.signingName),r({...s})},Hu=(e,t)=>(r,n)=>async s=>{const{response:i}=await r(s);try{const o=await t(i,e);return{response:i,output:o}}catch(o){if(Object.defineProperty(o,"$response",{value:i}),!("$metadata"in o)){const a="Deserialization error: to see the raw response, inspect the hidden field {error}.$response on this object.";o.message+=`
  `+a}throw o}},zu=(e,t)=>(r,n)=>async s=>{var i;const o=(i=n.endpointV2)!=null&&i.url&&e.urlParser?async()=>e.urlParser(n.endpointV2.url):e.endpoint;if(!o)throw new Error("No valid endpoint provider available.");const a=await t(s.input,{...e,endpoint:o});return r({...s,request:a})},qu={name:"deserializerMiddleware",step:"deserialize",tags:["DESERIALIZER"],override:!0},Yi={name:"serializerMiddleware",step:"serialize",tags:["SERIALIZER"],override:!0};function Vu(e,t,r){return{applyToStack:n=>{n.add(Hu(e,r),qu),n.add(zu(e,t),Yi)}}}const Wu={step:"serialize",tags:["ENDPOINT_PARAMETERS","ENDPOINT_V2","ENDPOINT"],name:"endpointV2Middleware",override:!0,relation:"before",toMiddleware:Yi.name},Ku=(e,t)=>({applyToStack:r=>{r.addRelativeTo(Fu({config:e,instructions:t}),Wu)}}),Gu=e=>{const t=e.tls??!0,{endpoint:r}=e,n=r!=null?async()=>Du(await pe(r)()):void 0;return{...e,endpoint:n,tls:t,isCustomEndpoint:!!r,useDualstackEndpoint:pe(e.useDualstackEndpoint??!1),useFipsEndpoint:pe(e.useFipsEndpoint??!1)}};var ze;(function(e){e.STANDARD="standard",e.ADAPTIVE="adaptive"})(ze||(ze={}));const $r=3,Zu=ze.STANDARD,Xu=["BandwidthLimitExceeded","EC2ThrottledException","LimitExceededException","PriorRequestNotComplete","ProvisionedThroughputExceededException","RequestLimitExceeded","RequestThrottled","RequestThrottledException","SlowDown","ThrottledException","Throttling","ThrottlingException","TooManyRequestsException","TransactionInProgressException"],Yu=["TimeoutError","RequestTimeout","RequestTimeoutException"],Ju=[500,502,503,504],Qu=["ECONNRESET","ECONNREFUSED","EPIPE","ETIMEDOUT"],Ji=e=>{var t,r;return((t=e.$metadata)==null?void 0:t.httpStatusCode)===429||Xu.includes(e.name)||((r=e.$retryable)==null?void 0:r.throttling)==!0},Qi=e=>{var t;return Yu.includes(e.name)||Qu.includes((e==null?void 0:e.code)||"")||Ju.includes(((t=e.$metadata)==null?void 0:t.httpStatusCode)||0)},ed=e=>{var t;if(((t=e.$metadata)==null?void 0:t.httpStatusCode)!==void 0){const r=e.$metadata.httpStatusCode;return 500<=r&&r<=599&&!Qi(e)}return!1};class td{constructor(t){this.currentCapacity=0,this.enabled=!1,this.lastMaxRate=0,this.measuredTxRate=0,this.requestCount=0,this.lastTimestamp=0,this.timeWindow=0,this.beta=(t==null?void 0:t.beta)??.7,this.minCapacity=(t==null?void 0:t.minCapacity)??1,this.minFillRate=(t==null?void 0:t.minFillRate)??.5,this.scaleConstant=(t==null?void 0:t.scaleConstant)??.4,this.smooth=(t==null?void 0:t.smooth)??.8;const r=this.getCurrentTimeInSeconds();this.lastThrottleTime=r,this.lastTxRateBucket=Math.floor(this.getCurrentTimeInSeconds()),this.fillRate=this.minFillRate,this.maxCapacity=this.minCapacity}getCurrentTimeInSeconds(){return Date.now()/1e3}async getSendToken(){return this.acquireTokenBucket(1)}async acquireTokenBucket(t){if(this.enabled){if(this.refillTokenBucket(),t>this.currentCapacity){const r=(t-this.currentCapacity)/this.fillRate*1e3;await new Promise(n=>setTimeout(n,r))}this.currentCapacity=this.currentCapacity-t}}refillTokenBucket(){const t=this.getCurrentTimeInSeconds();if(!this.lastTimestamp){this.lastTimestamp=t;return}const r=(t-this.lastTimestamp)*this.fillRate;this.currentCapacity=Math.min(this.maxCapacity,this.currentCapacity+r),this.lastTimestamp=t}updateClientSendingRate(t){let r;if(this.updateMeasuredRate(),Ji(t)){const s=this.enabled?Math.min(this.measuredTxRate,this.fillRate):this.measuredTxRate;this.lastMaxRate=s,this.calculateTimeWindow(),this.lastThrottleTime=this.getCurrentTimeInSeconds(),r=this.cubicThrottle(s),this.enableTokenBucket()}else this.calculateTimeWindow(),r=this.cubicSuccess(this.getCurrentTimeInSeconds());const n=Math.min(r,2*this.measuredTxRate);this.updateTokenBucketRate(n)}calculateTimeWindow(){this.timeWindow=this.getPrecise(Math.pow(this.lastMaxRate*(1-this.beta)/this.scaleConstant,1/3))}cubicThrottle(t){return this.getPrecise(t*this.beta)}cubicSuccess(t){return this.getPrecise(this.scaleConstant*Math.pow(t-this.lastThrottleTime-this.timeWindow,3)+this.lastMaxRate)}enableTokenBucket(){this.enabled=!0}updateTokenBucketRate(t){this.refillTokenBucket(),this.fillRate=Math.max(t,this.minFillRate),this.maxCapacity=Math.max(t,this.minCapacity),this.currentCapacity=Math.min(this.currentCapacity,this.maxCapacity)}updateMeasuredRate(){const t=this.getCurrentTimeInSeconds(),r=Math.floor(t*2)/2;if(this.requestCount++,r>this.lastTxRateBucket){const n=this.requestCount/(r-this.lastTxRateBucket);this.measuredTxRate=this.getPrecise(n*this.smooth+this.measuredTxRate*(1-this.smooth)),this.requestCount=0,this.lastTxRateBucket=r}}getPrecise(t){return parseFloat(t.toFixed(8))}}const kr=100,eo=20*1e3,rd=500,Tn=500,nd=5,sd=10,id=1,od="amz-sdk-invocation-id",ad="amz-sdk-request",cd=()=>{let e=kr;return{computeNextBackoffDelay:t=>Math.floor(Math.min(eo,Math.random()*2**t*e)),setDelayBase:t=>{e=t}}},_n=({retryDelay:e,retryCount:t,retryCost:r})=>({getRetryCount:()=>t,getRetryDelay:()=>Math.min(eo,e),getRetryCost:()=>r});class to{constructor(t){this.maxAttempts=t,this.mode=ze.STANDARD,this.capacity=Tn,this.retryBackoffStrategy=cd(),this.maxAttemptsProvider=typeof t=="function"?t:async()=>t}async acquireInitialRetryToken(t){return _n({retryDelay:kr,retryCount:0})}async refreshRetryTokenForRetry(t,r){const n=await this.getMaxAttempts();if(this.shouldRetry(t,r,n)){const s=r.errorType;this.retryBackoffStrategy.setDelayBase(s==="THROTTLING"?rd:kr);const i=this.retryBackoffStrategy.computeNextBackoffDelay(t.getRetryCount()),o=r.retryAfterHint?Math.max(r.retryAfterHint.getTime()-Date.now()||0,i):i,a=this.getCapacityCost(s);return this.capacity-=a,_n({retryDelay:o,retryCount:t.getRetryCount()+1,retryCost:a})}throw new Error("No retry token available")}recordSuccess(t){this.capacity=Math.max(Tn,this.capacity+(t.getRetryCost()??id))}getCapacity(){return this.capacity}async getMaxAttempts(){try{return await this.maxAttemptsProvider()}catch{return $r}}shouldRetry(t,r,n){return t.getRetryCount()+1<n&&this.capacity>=this.getCapacityCost(r.errorType)&&this.isRetryableError(r.errorType)}getCapacityCost(t){return t==="TRANSIENT"?sd:nd}isRetryableError(t){return t==="THROTTLING"||t==="TRANSIENT"}}class ud{constructor(t,r){this.maxAttemptsProvider=t,this.mode=ze.ADAPTIVE;const{rateLimiter:n}=r??{};this.rateLimiter=n??new td,this.standardRetryStrategy=new to(t)}async acquireInitialRetryToken(t){return await this.rateLimiter.getSendToken(),this.standardRetryStrategy.acquireInitialRetryToken(t)}async refreshRetryTokenForRetry(t,r){return this.rateLimiter.updateClientSendingRate(r),this.standardRetryStrategy.refreshRetryTokenForRetry(t,r)}recordSuccess(t){this.rateLimiter.updateClientSendingRate({}),this.standardRetryStrategy.recordSuccess(t)}}var kt,dd=new Uint8Array(16);function ld(){if(!kt&&(kt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!kt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return kt(dd)}const hd=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function fd(e){return typeof e=="string"&&hd.test(e)}var G=[];for(var Zt=0;Zt<256;++Zt)G.push((Zt+256).toString(16).substr(1));function pd(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=(G[e[t+0]]+G[e[t+1]]+G[e[t+2]]+G[e[t+3]]+"-"+G[e[t+4]]+G[e[t+5]]+"-"+G[e[t+6]]+G[e[t+7]]+"-"+G[e[t+8]]+G[e[t+9]]+"-"+G[e[t+10]]+G[e[t+11]]+G[e[t+12]]+G[e[t+13]]+G[e[t+14]]+G[e[t+15]]).toLowerCase();if(!fd(r))throw TypeError("Stringified UUID is invalid");return r}function gd(e,t,r){e=e||{};var n=e.random||(e.rng||ld)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,t){r=r||0;for(var s=0;s<16;++s)t[r+s]=n[s];return t}return pd(n)}const md=e=>e instanceof Error?e:e instanceof Object?Object.assign(new Error,e):typeof e=="string"?new Error(e):new Error(`AWS SDK error wrapper for ${e}`),yd=e=>{const{retryStrategy:t}=e,r=pe(e.maxAttempts??$r);return{...e,maxAttempts:r,retryStrategy:async()=>t||(await pe(e.retryMode)()===ze.ADAPTIVE?new ud(r):new to(r))}},bd=e=>(t,r)=>async n=>{let s=await e.retryStrategy();const i=await e.maxAttempts();if(wd(s)){s=s;let o=await s.acquireInitialRetryToken(r.partition_id),a=new Error,c=0,u=0;const{request:d}=n;for(ae.isInstance(d)&&(d.headers[od]=gd());;)try{ae.isInstance(d)&&(d.headers[ad]=`attempt=${c+1}; max=${i}`);const{response:p,output:f}=await t(n);return s.recordSuccess(o),f.$metadata.attempts=c+1,f.$metadata.totalRetryDelay=u,{response:p,output:f}}catch(p){const f=vd(p);a=md(p);try{o=await s.refreshRetryTokenForRetry(o,f)}catch{throw a.$metadata||(a.$metadata={}),a.$metadata.attempts=c+1,a.$metadata.totalRetryDelay=u,a}c=o.getRetryCount();const m=o.getRetryDelay();u+=m,await new Promise(g=>setTimeout(g,m))}}else return s=s,s!=null&&s.mode&&(r.userAgent=[...r.userAgent||[],["cfg/retry-mode",s.mode]]),s.retry(t,n)},wd=e=>typeof e.acquireInitialRetryToken<"u"&&typeof e.refreshRetryTokenForRetry<"u"&&typeof e.recordSuccess<"u",vd=e=>{const t={errorType:Sd(e)},r=xd(e.$response);return r&&(t.retryAfterHint=r),t},Sd=e=>Ji(e)?"THROTTLING":Qi(e)?"TRANSIENT":ed(e)?"SERVER_ERROR":"CLIENT_ERROR",Ad={name:"retryMiddleware",tags:["RETRY"],step:"finalizeRequest",priority:"high",override:!0},Ed=e=>({applyToStack:t=>{t.add(bd(e),Ad)}}),xd=e=>{if(!Tt.isInstance(e))return;const t=Object.keys(e.headers).find(s=>s.toLowerCase()==="retry-after");if(!t)return;const r=e.headers[t],n=Number(r);return Number.isNaN(n)?new Date(r):new Date(n*1e3)};class kd{trace(){}debug(){}info(){}warn(){}error(){}}const Ot=()=>{let e=[],t=[];const r=new Set,n=d=>d.sort((p,f)=>On[f.step]-On[p.step]||Mn[f.priority||"normal"]-Mn[p.priority||"normal"]),s=d=>{let p=!1;const f=m=>m.name&&m.name===d?(p=!0,r.delete(d),!1):!0;return e=e.filter(f),t=t.filter(f),p},i=d=>{let p=!1;const f=m=>m.middleware===d?(p=!0,m.name&&r.delete(m.name),!1):!0;return e=e.filter(f),t=t.filter(f),p},o=d=>(e.forEach(p=>{d.add(p.middleware,{...p})}),t.forEach(p=>{d.addRelativeTo(p.middleware,{...p})}),d),a=d=>{const p=[];return d.before.forEach(f=>{f.before.length===0&&f.after.length===0?p.push(f):p.push(...a(f))}),p.push(d),d.after.reverse().forEach(f=>{f.before.length===0&&f.after.length===0?p.push(f):p.push(...a(f))}),p},c=(d=!1)=>{const p=[],f=[],m={};return e.forEach(g=>{const A={...g,before:[],after:[]};A.name&&(m[A.name]=A),p.push(A)}),t.forEach(g=>{const A={...g,before:[],after:[]};A.name&&(m[A.name]=A),f.push(A)}),f.forEach(g=>{if(g.toMiddleware){const A=m[g.toMiddleware];if(A===void 0){if(d)return;throw new Error(`${g.toMiddleware} is not found when adding ${g.name||"anonymous"} middleware ${g.relation} ${g.toMiddleware}`)}g.relation==="after"&&A.after.push(g),g.relation==="before"&&A.before.push(g)}}),n(p).map(a).reduce((g,A)=>(g.push(...A),g),[])},u={add:(d,p={})=>{const{name:f,override:m}=p,g={step:"initialize",priority:"normal",middleware:d,...p};if(f){if(r.has(f)){if(!m)throw new Error(`Duplicate middleware name '${f}'`);const A=e.findIndex(me=>me.name===f),N=e[A];if(N.step!==g.step||N.priority!==g.priority)throw new Error(`"${f}" middleware with ${N.priority} priority in ${N.step} step cannot be overridden by same-name middleware with ${g.priority} priority in ${g.step} step.`);e.splice(A,1)}r.add(f)}e.push(g)},addRelativeTo:(d,p)=>{const{name:f,override:m}=p,g={middleware:d,...p};if(f){if(r.has(f)){if(!m)throw new Error(`Duplicate middleware name '${f}'`);const A=t.findIndex(me=>me.name===f),N=t[A];if(N.toMiddleware!==g.toMiddleware||N.relation!==g.relation)throw new Error(`"${f}" middleware ${N.relation} "${N.toMiddleware}" middleware cannot be overridden by same-name middleware ${g.relation} "${g.toMiddleware}" middleware.`);t.splice(A,1)}r.add(f)}t.push(g)},clone:()=>o(Ot()),use:d=>{d.applyToStack(u)},remove:d=>typeof d=="string"?s(d):i(d),removeByTag:d=>{let p=!1;const f=m=>{const{tags:g,name:A}=m;return g&&g.includes(d)?(A&&r.delete(A),p=!0,!1):!0};return e=e.filter(f),t=t.filter(f),p},concat:d=>{const p=o(Ot());return p.use(d),p},applyToStack:o,identify:()=>c(!0).map(d=>d.name+": "+(d.tags||[]).join(",")),resolve:(d,p)=>{for(const f of c().map(m=>m.middleware).reverse())d=f(d,p);return d}};return u},On={initialize:5,serialize:4,build:3,finalizeRequest:2,deserialize:1},Mn={high:3,normal:2,low:1};class Cd{constructor(t){this.middlewareStack=Ot(),this.config=t}send(t,r,n){const s=typeof r!="function"?r:void 0,i=typeof r=="function"?r:n,o=t.resolveMiddleware(this.middlewareStack,this.config,s);if(i)o(t).then(a=>i(null,a.output),a=>i(a)).catch(()=>{});else return o(t).then(a=>a.output)}destroy(){this.config.requestHandler.destroy&&this.config.requestHandler.destroy()}}const _e={},Ve=new Array(64);for(let e=0,t="A".charCodeAt(0),r="Z".charCodeAt(0);e+t<=r;e++){const n=String.fromCharCode(e+t);_e[n]=e,Ve[e]=n}for(let e=0,t="a".charCodeAt(0),r="z".charCodeAt(0);e+t<=r;e++){const n=String.fromCharCode(e+t),s=e+26;_e[n]=s,Ve[s]=n}for(let e=0;e<10;e++){_e[e.toString(10)]=e+52;const t=e.toString(10),r=e+52;_e[t]=r,Ve[r]=t}_e["+"]=62;Ve[62]="+";_e["/"]=63;Ve[63]="/";const He=6,yt=8,Pd=63,Lr=e=>{let t=e.length/4*3;e.slice(-2)==="=="?t-=2:e.slice(-1)==="="&&t--;const r=new ArrayBuffer(t),n=new DataView(r);for(let s=0;s<e.length;s+=4){let i=0,o=0;for(let u=s,d=s+3;u<=d;u++)if(e[u]!=="="){if(!(e[u]in _e))throw new TypeError(`Invalid character ${e[u]} in base64 string.`);i|=_e[e[u]]<<(d-u)*He,o+=He}else i>>=He;const a=s/4*3;i>>=o%yt;const c=Math.floor(o/yt);for(let u=0;u<c;u++){const d=(c-u-1)*yt;n.setUint8(a+u,(i&255<<d)>>d)}}return new Uint8Array(r)};function jr(e){let t="";for(let r=0;r<e.length;r+=3){let n=0,s=0;for(let o=r,a=Math.min(r+3,e.length);o<a;o++)n|=e[o]<<(a-o-1)*yt,s+=yt;const i=Math.ceil(s/He);n<<=i*He-s;for(let o=1;o<=i;o++){const a=(i-o)*He;t+=Ve[(n&Pd<<a)>>a]}t+="==".slice(0,4-i)}return t}function Rd(e,t="utf-8"){return t==="base64"?jr(e):Bt(e)}function Td(e,t){return t==="base64"?$e.mutate(Lr(e)):$e.mutate(At(e))}class $e extends Uint8Array{static fromString(t,r="utf-8"){switch(typeof t){case"string":return Td(t,r);default:throw new Error(`Unsupported conversion from ${typeof t} to Uint8ArrayBlobAdapter.`)}}static mutate(t){return Object.setPrototypeOf(t,$e.prototype),t}transformToString(t="utf-8"){return Rd(this,t)}}const _d=(e,t)=>{const{base64Encoder:r,bodyLengthChecker:n,checksumAlgorithmFn:s,checksumLocationName:i,streamHasher:o}=t,a=r!==void 0&&n!==void 0&&s!==void 0&&i!==void 0&&o!==void 0,c=a?o(s,e):void 0,u=e.getReader();return new ReadableStream({async pull(d){const{value:p,done:f}=await u.read();if(f){if(d.enqueue(`0\r
`),a){const m=r(await c);d.enqueue(`${i}:${m}\r
`),d.enqueue(`\r
`)}d.close()}else d.enqueue(`${(n(p)||0).toString(16)}\r
${p}\r
`)}})};function Od(e){const t=[];for(let r of Object.keys(e).sort()){const n=e[r];if(r=Ue(r),Array.isArray(n))for(let s=0,i=n.length;s<i;s++)t.push(`${r}=${Ue(n[s])}`);else{let s=r;(n||typeof n=="string")&&(s+=`=${Ue(n)}`),t.push(s)}}return t.join("&")}function Md(e=0){return new Promise((t,r)=>{e&&setTimeout(()=>{const n=new Error(`Request did not complete within ${e} ms`);n.name="TimeoutError",r(n)},e)})}class Nd{constructor(t){typeof t=="function"?this.configProvider=t().then(r=>r||{}):(this.config=t??{},this.configProvider=Promise.resolve(this.config))}destroy(){}async handle(t,{abortSignal:r}={}){this.config||(this.config=await this.configProvider);const n=this.config.requestTimeout;if(r!=null&&r.aborted){const m=new Error("Request aborted");return m.name="AbortError",Promise.reject(m)}let s=t.path;const i=Od(t.query||{});i&&(s+=`?${i}`),t.fragment&&(s+=`#${t.fragment}`);let o="";if(t.username!=null||t.password!=null){const m=t.username??"",g=t.password??"";o=`${m}:${g}@`}const{port:a,method:c}=t,u=`${t.protocol}//${o}${t.hostname}${a?`:${a}`:""}${s}`,d={body:c==="GET"||c==="HEAD"?void 0:t.body,headers:new Headers(t.headers),method:c};typeof AbortController<"u"&&(d.signal=r);const p=new Request(u,d),f=[fetch(p).then(m=>{const g=m.headers,A={};for(const N of g.entries())A[N[0]]=N[1];return m.body!=null?{response:new Tt({headers:A,reason:m.statusText,statusCode:m.status,body:m.body})}:m.blob().then(N=>({response:new Tt({headers:A,reason:m.statusText,statusCode:m.status,body:N})}))}),Md(n)];return r&&f.push(new Promise((m,g)=>{r.onabort=()=>{const A=new Error("Request aborted");A.name="AbortError",g(A)}})),Promise.race(f)}}const ro=e=>typeof Blob=="function"&&e instanceof Blob?Id(e):Ud(e);async function Id(e){const t=await Bd(e),r=Lr(t);return new Uint8Array(r)}async function Ud(e){let t=new Uint8Array(0);const r=e.getReader();let n=!1;for(;!n;){const{done:s,value:i}=await r.read();if(i){const o=t;t=new Uint8Array(o.length+i.length),t.set(o),t.set(i,o.length)}n=s}return t}function Bd(e){return new Promise((t,r)=>{const n=new FileReader;n.onloadend=()=>{if(n.readyState!==2)return r(new Error("Reader aborted too early"));const s=n.result??"",i=s.indexOf(","),o=i>-1?i+1:s.length;t(s.substring(o))},n.onabort=()=>r(new Error("Read aborted")),n.onerror=()=>r(n.error),n.readAsDataURL(e)})}const Nn="The stream has already been transformed.",$d=e=>{var t,r;if(!In(e)&&!Un(e)){const o=((r=(t=e==null?void 0:e.__proto__)==null?void 0:t.constructor)==null?void 0:r.name)||e;throw new Error(`Unexpected stream implementation, expect Blob or ReadableStream, got ${o}`)}let n=!1;const s=async()=>{if(n)throw new Error(Nn);return n=!0,await ro(e)},i=o=>{if(typeof o.stream!="function")throw new Error(`Cannot transform payload Blob to web stream. Please make sure the Blob.stream() is polyfilled.
If you are using React Native, this API is not yet supported, see: https://react-native.canny.io/feature-requests/p/fetch-streaming-body`);return o.stream()};return Object.assign(e,{transformToByteArray:s,transformToString:async o=>{const a=await s();if(o==="base64")return jr(a);if(o==="hex")return oe(a);if(o===void 0||o==="utf8"||o==="utf-8")return Bt(a);if(typeof TextDecoder=="function")return new TextDecoder(o).decode(a);throw new Error("TextDecoder is not available, please make sure polyfill is provided.")},transformToWebStream:()=>{if(n)throw new Error(Nn);if(n=!0,In(e))return i(e);if(Un(e))return e;throw new Error(`Cannot transform payload to web stream, got ${e}`)}})},In=e=>typeof Blob=="function"&&e instanceof Blob,Un=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,no=async(e=new Uint8Array,t)=>{if(e instanceof Uint8Array)return $e.mutate(e);if(!e)return $e.mutate(new Uint8Array);const r=t.streamCollector(e);return $e.mutate(await r)};class Ld{constructor(){this.middlewareStack=Ot()}}const bt="***SensitiveInformation***",jd=e=>{switch(e){case"true":return!0;case"false":return!1;default:throw new Error(`Unable to parse boolean value "${e}"`)}},Dd=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],Fd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function Hd(e){const t=e.getUTCFullYear(),r=e.getUTCMonth(),n=e.getUTCDay(),s=e.getUTCDate(),i=e.getUTCHours(),o=e.getUTCMinutes(),a=e.getUTCSeconds(),c=s<10?`0${s}`:`${s}`,u=i<10?`0${i}`:`${i}`,d=o<10?`0${o}`:`${o}`,p=a<10?`0${a}`:`${a}`;return`${Dd[n]}, ${c} ${Fd[r]} ${t} ${u}:${d}:${p} GMT`}class Dr extends Error{constructor(t){super(t.message),Object.setPrototypeOf(this,Dr.prototype),this.name=t.name,this.$fault=t.$fault,this.$metadata=t.$metadata}}const zd=(e,t={})=>{Object.entries(t).filter(([,n])=>n!==void 0).forEach(([n,s])=>{(e[n]==null||e[n]==="")&&(e[n]=s)});const r=e.message||e.Message||"UnknownError";return e.message=r,delete e.Message,e},qd=({output:e,parsedBody:t,exceptionCtor:r,errorCode:n})=>{const s=Wd(e),i=s.httpStatusCode?s.httpStatusCode+"":void 0,o=new r({name:(t==null?void 0:t.code)||(t==null?void 0:t.Code)||n||i||"UnknownError",$fault:"client",$metadata:s});throw zd(o,t)},Vd=e=>({output:t,parsedBody:r,errorCode:n})=>{qd({output:t,parsedBody:r,exceptionCtor:e,errorCode:n})},Wd=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),Kd=e=>{switch(e){case"standard":return{retryMode:"standard",connectionTimeout:3100};case"in-region":return{retryMode:"standard",connectionTimeout:1100};case"cross-region":return{retryMode:"standard",connectionTimeout:3100};case"mobile":return{retryMode:"standard",connectionTimeout:3e4};default:return{}}};function Bn(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}const so=e=>{const t="#text";for(const r in e)e.hasOwnProperty(r)&&e[r][t]!==void 0?e[r]=e[r][t]:typeof e[r]=="object"&&e[r]!==null&&(e[r]=so(e[r]));return e},Cr=function(){const e=Object.getPrototypeOf(this).constructor,t=Function.bind.apply(String,[null,...arguments]),r=new t;return Object.setPrototypeOf(r,e.prototype),r};Cr.prototype=Object.create(String.prototype,{constructor:{value:Cr,enumerable:!1,writable:!0,configurable:!0}});Object.setPrototypeOf(Cr,String);function Mt(e,t,r){let n,s,i;if(typeof t>"u"&&typeof r>"u")n={},i=e;else{if(n=e,typeof t=="function")return s=t,i=r,Gd(n,s,i);i=t}for(const o of Object.keys(i)){if(!Array.isArray(i[o])){n[o]=i[o];continue}Zd(n,null,i,o)}return n}const Gd=(e,t,r)=>Mt(e,Object.entries(r).reduce((n,[s,i])=>(Array.isArray(i)?n[s]=i:typeof i=="function"?n[s]=[t,i()]:n[s]=[t,i],n),{})),Zd=(e,t,r,n)=>{if(t!==null){let o=r[n];typeof o=="function"&&(o=[,o]);const[a=Xd,c=Yd,u=n]=o;(typeof a=="function"&&a(t[u])||typeof a!="function"&&a)&&(e[n]=c(t[u]));return}let[s,i]=r[n];if(typeof i=="function"){let o;const a=s===void 0&&(o=i())!=null,c=typeof s=="function"&&!!s(void 0)||typeof s!="function"&&!!s;a?e[n]=o:c&&(e[n]=i())}else{const o=s===void 0&&i!=null,a=typeof s=="function"&&!!s(i)||typeof s!="function"&&!!s;(o||a)&&(e[n]=i)}},Xd=e=>e!=null,Yd=e=>e,$n=(e,t,r,n,s,i)=>{if(t!=null&&t[r]!==void 0){const o=n();if(o.length<=0)throw new Error("Empty value provided for input HTTP label: "+r+".");e=e.replace(s,i?o.split("/").map(a=>Bn(a)).join("/"):Bn(o))}else throw new Error("No value provided for input HTTP label: "+r+".");return e},Jd=e=>({...e,useFipsEndpoint:e.useFipsEndpoint??!1,useDualstackEndpoint:e.useDualstackEndpoint??!1,forcePathStyle:e.forcePathStyle??!1,useAccelerateEndpoint:e.useAccelerateEndpoint??!1,useGlobalEndpoint:e.useGlobalEndpoint??!1,disableMultiregionAccessPoints:e.disableMultiregionAccessPoints??!1,defaultSigningName:"s3"}),Qd="@aws-sdk/client-s3",el="AWS SDK for JavaScript S3 Client for Node.js, Browser and React Native",tl="3.383.0",rl={build:"concurrently 'yarn:build:cjs' 'yarn:build:es' 'yarn:build:types'","build:cjs":"tsc -p tsconfig.cjs.json","build:docs":"typedoc","build:es":"tsc -p tsconfig.es.json","build:include:deps":"lerna run --scope $npm_package_name --include-dependencies build","build:types":"tsc -p tsconfig.types.json","build:types:downlevel":"downlevel-dts dist-types dist-types/ts3.4",clean:"rimraf ./dist-* && rimraf *.tsbuildinfo","extract:docs":"api-extractor run --local","generate:client":"node ../../scripts/generate-clients/single-service --solo s3",test:"yarn test:unit","test:e2e":"ts-mocha test/**/*.ispec.ts && karma start karma.conf.js","test:unit":"ts-mocha test/**/*.spec.ts"},nl="./dist-cjs/index.js",sl="./dist-types/index.d.ts",il="./dist-es/index.js",ol=!1,al={"@aws-crypto/sha1-browser":"3.0.0","@aws-crypto/sha256-browser":"3.0.0","@aws-crypto/sha256-js":"3.0.0","@aws-sdk/client-sts":"3.382.0","@aws-sdk/credential-provider-node":"3.382.0","@aws-sdk/middleware-bucket-endpoint":"3.378.0","@aws-sdk/middleware-expect-continue":"3.378.0","@aws-sdk/middleware-flexible-checksums":"3.383.0","@aws-sdk/middleware-host-header":"3.379.1","@aws-sdk/middleware-location-constraint":"3.379.1","@aws-sdk/middleware-logger":"3.378.0","@aws-sdk/middleware-recursion-detection":"3.378.0","@aws-sdk/middleware-sdk-s3":"3.379.1","@aws-sdk/middleware-signing":"3.379.1","@aws-sdk/middleware-ssec":"3.378.0","@aws-sdk/middleware-user-agent":"3.382.0","@aws-sdk/signature-v4-multi-region":"3.378.0","@aws-sdk/types":"3.378.0","@aws-sdk/util-endpoints":"3.382.0","@aws-sdk/util-user-agent-browser":"3.378.0","@aws-sdk/util-user-agent-node":"3.378.0","@aws-sdk/xml-builder":"3.310.0","@smithy/config-resolver":"^2.0.1","@smithy/eventstream-serde-browser":"^2.0.1","@smithy/eventstream-serde-config-resolver":"^2.0.1","@smithy/eventstream-serde-node":"^2.0.1","@smithy/fetch-http-handler":"^2.0.1","@smithy/hash-blob-browser":"^2.0.1","@smithy/hash-node":"^2.0.1","@smithy/hash-stream-node":"^2.0.1","@smithy/invalid-dependency":"^2.0.1","@smithy/md5-js":"^2.0.1","@smithy/middleware-content-length":"^2.0.1","@smithy/middleware-endpoint":"^2.0.1","@smithy/middleware-retry":"^2.0.1","@smithy/middleware-serde":"^2.0.1","@smithy/middleware-stack":"^2.0.0","@smithy/node-config-provider":"^2.0.1","@smithy/node-http-handler":"^2.0.1","@smithy/protocol-http":"^2.0.1","@smithy/smithy-client":"^2.0.1","@smithy/types":"^2.0.2","@smithy/url-parser":"^2.0.1","@smithy/util-base64":"^2.0.0","@smithy/util-body-length-browser":"^2.0.0","@smithy/util-body-length-node":"^2.0.0","@smithy/util-defaults-mode-browser":"^2.0.1","@smithy/util-defaults-mode-node":"^2.0.1","@smithy/util-retry":"^2.0.0","@smithy/util-stream":"^2.0.1","@smithy/util-utf8":"^2.0.0","@smithy/util-waiter":"^2.0.1","fast-xml-parser":"4.2.5",tslib:"^2.5.0"},cl={"@smithy/service-client-documentation-generator":"^2.0.0","@tsconfig/node14":"1.0.3","@types/chai":"^4.2.11","@types/mocha":"^8.0.4","@types/node":"^14.14.31",concurrently:"7.0.0","downlevel-dts":"0.10.1",rimraf:"3.0.2",typedoc:"0.23.23",typescript:"~4.9.5"},ul={node:">=14.0.0"},dl={"<4.0":{"dist-types/*":["dist-types/ts3.4/*"]}},ll=["dist-*/**"],hl={name:"AWS SDK for JavaScript Team",url:"https://aws.amazon.com/javascript/"},fl="Apache-2.0",pl={"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.browser"},gl="https://github.com/aws/aws-sdk-js-v3/tree/main/clients/client-s3",ml={type:"git",url:"https://github.com/aws/aws-sdk-js-v3.git",directory:"clients/client-s3"},yl={name:Qd,description:el,version:tl,scripts:rl,main:nl,types:sl,module:il,sideEffects:ol,dependencies:al,devDependencies:cl,engines:ul,typesVersions:dl,files:ll,author:hl,license:fl,browser:pl,"react-native":{"./dist-es/runtimeConfig":"./dist-es/runtimeConfig.native"},homepage:gl,repository:ml};var io={},Je={},Qe={},et={},Ln;function oo(){if(Ln)return et;Ln=1,Object.defineProperty(et,"__esModule",{value:!0}),et.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return et.isEmptyData=e,et}var jn={},Dn;function ao(){return Dn||(Dn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_1=e.SHA_1_HMAC_ALGO=e.SHA_1_HASH=void 0,e.SHA_1_HASH={name:"SHA-1"},e.SHA_1_HMAC_ALGO={name:"HMAC",hash:e.SHA_1_HASH},e.EMPTY_DATA_SHA_1=new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9])}(jn)),jn}const bl={};function wl(){return typeof window<"u"?window:typeof self<"u"?self:bl}const vl=Object.freeze(Object.defineProperty({__proto__:null,locateWindow:wl},Symbol.toStringTag,{value:"Module"})),We=Nr(vl);var Fn;function co(){if(Fn)return Qe;Fn=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.Sha1=void 0;var e=oo(),t=ao(),r=Ut,n=We,s=function(){function a(c){this.secret=c,this.reset()}return a.prototype.update=function(c){var u=this;(0,e.isEmptyData)(c)||(this.operation=this.operation.then(function(d){return d.onerror=function(){u.operation=Promise.reject(new Error("Error encountered updating hash"))},d.process(o(c)),d}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(c){return new Promise(function(u,d){c.onerror=function(){d(new Error("Error encountered finalizing hash"))},c.oncomplete=function(){c.result&&u(new Uint8Array(c.result)),d(new Error("Error encountered finalizing hash"))},c.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=i(this.secret).then(function(c){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_1_HMAC_ALGO,c)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-1"))},a}();Qe.Sha1=s;function i(a){return new Promise(function(c,u){var d=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_1_HMAC_ALGO,!1,["sign"]);d.oncomplete=function(){d.result&&c(d.result),u(new Error("ImportKey completed without importing key."))},d.onerror=function(){u(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return Qe}var tt={},Hn;function uo(){if(Hn)return tt;Hn=1,Object.defineProperty(tt,"__esModule",{value:!0}),tt.Sha1=void 0;var e=Ut,t=oo(),r=ao(),n=We,s=function(){function o(a){this.toHash=new Uint8Array(0),a!==void 0&&(this.key=new Promise(function(c,u){(0,n.locateWindow)().crypto.subtle.importKey("raw",i(a),r.SHA_1_HMAC_ALGO,!1,["sign"]).then(c,u)}),this.key.catch(function(){}))}return o.prototype.update=function(a){if(!(0,t.isEmptyData)(a)){var c=i(a),u=new Uint8Array(this.toHash.byteLength+c.byteLength);u.set(this.toHash,0),u.set(c,this.toHash.byteLength),this.toHash=u}},o.prototype.digest=function(){var a=this;return this.key?this.key.then(function(c){return(0,n.locateWindow)().crypto.subtle.sign(r.SHA_1_HMAC_ALGO,c,a.toHash).then(function(u){return new Uint8Array(u)})}):(0,t.isEmptyData)(this.toHash)?Promise.resolve(r.EMPTY_DATA_SHA_1):Promise.resolve().then(function(){return(0,n.locateWindow)().crypto.subtle.digest(r.SHA_1_HASH,a.toHash)}).then(function(c){return Promise.resolve(new Uint8Array(c))})},o.prototype.reset=function(){this.toHash=new Uint8Array(0)},o}();tt.Sha1=s;function i(o){return typeof o=="string"?(0,e.fromUtf8)(o):ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(o)}return tt}var zn={},le={},qn;function Sl(){if(qn)return le;qn=1,Object.defineProperty(le,"__esModule",{value:!0}),le.supportsZeroByteGCM=le.supportsSubtleCrypto=le.supportsSecureRandom=le.supportsWebCrypto=void 0;var e=ge,t=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function r(o){if(n(o)&&typeof o.crypto.subtle=="object"){var a=o.crypto.subtle;return s(a)}return!1}le.supportsWebCrypto=r;function n(o){if(typeof o=="object"&&typeof o.crypto=="object"){var a=o.crypto.getRandomValues;return typeof a=="function"}return!1}le.supportsSecureRandom=n;function s(o){return o&&t.every(function(a){return typeof o[a]=="function"})}le.supportsSubtleCrypto=s;function i(o){return e.__awaiter(this,void 0,void 0,function(){var a,c;return e.__generator(this,function(u){switch(u.label){case 0:if(!s(o))return[2,!1];u.label=1;case 1:return u.trys.push([1,4,,5]),[4,o.generateKey({name:"AES-GCM",length:128},!1,["encrypt"])];case 2:return a=u.sent(),[4,o.encrypt({name:"AES-GCM",iv:new Uint8Array(Array(12)),additionalData:new Uint8Array(Array(16)),tagLength:128},a,new Uint8Array(0))];case 3:return c=u.sent(),[2,c.byteLength===16];case 4:return u.sent(),[2,!1];case 5:return[2]}})})}return le.supportsZeroByteGCM=i,le}var Vn;function lo(){return Vn||(Vn=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ge;t.__exportStar(Sl(),e)}(zn)),zn}var Wn={},Kn={},Gn;function Al(){return Gn||(Gn=1,Object.defineProperty(Kn,"__esModule",{value:!0})),Kn}var Zn={},Xn;function El(){return Xn||(Xn=1,Object.defineProperty(Zn,"__esModule",{value:!0})),Zn}var Yn={},Jn;function xl(){return Jn||(Jn=1,Object.defineProperty(Yn,"__esModule",{value:!0})),Yn}var Qn={},es;function kl(){return es||(es=1,Object.defineProperty(Qn,"__esModule",{value:!0})),Qn}var rt={},ts;function Cl(){if(ts)return rt;ts=1,Object.defineProperty(rt,"__esModule",{value:!0}),rt.isMsWindow=void 0;var e=["decrypt","digest","encrypt","exportKey","generateKey","importKey","sign","verify"];function t(n){return"MSInputMethodContext"in n&&"msCrypto"in n}function r(n){if(t(n)&&n.msCrypto.subtle!==void 0){var s=n.msCrypto,i=s.getRandomValues,o=s.subtle;return e.map(function(a){return o[a]}).concat(i).every(function(a){return typeof a=="function"})}return!1}return rt.isMsWindow=r,rt}var rs;function ho(){return rs||(rs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ge;t.__exportStar(Al(),e),t.__exportStar(El(),e),t.__exportStar(xl(),e),t.__exportStar(kl(),e),t.__exportStar(Cl(),e)}(Wn)),Wn}var ns;function Pl(){if(ns)return Je;ns=1,Object.defineProperty(Je,"__esModule",{value:!0}),Je.Sha1=void 0;var e=co(),t=uo(),r=lo(),n=ho(),s=We,i=Oe(),o=function(){function a(c){if((0,r.supportsWebCrypto)((0,s.locateWindow)()))this.hash=new t.Sha1(c);else if((0,n.isMsWindow)((0,s.locateWindow)()))this.hash=new e.Sha1(c);else throw new Error("SHA1 not supported")}return a.prototype.update=function(c,u){this.hash.update((0,i.convertToBuffer)(c))},a.prototype.digest=function(){return this.hash.digest()},a.prototype.reset=function(){this.hash.reset()},a}();return Je.Sha1=o,Je}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha1=e.Ie11Sha1=void 0;var t=ge;t.__exportStar(Pl(),e);var r=co();Object.defineProperty(e,"Ie11Sha1",{enumerable:!0,get:function(){return r.Sha1}});var n=uo();Object.defineProperty(e,"WebCryptoSha1",{enumerable:!0,get:function(){return n.Sha1}})})(io);var fo={},nt={},st={},it={},ss;function Rl(){if(ss)return it;ss=1,Object.defineProperty(it,"__esModule",{value:!0}),it.isEmptyData=void 0;function e(t){return typeof t=="string"?t.length===0:t.byteLength===0}return it.isEmptyData=e,it}var is={},os;function po(){return os||(os=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EMPTY_DATA_SHA_256=e.SHA_256_HMAC_ALGO=e.SHA_256_HASH=void 0,e.SHA_256_HASH={name:"SHA-256"},e.SHA_256_HMAC_ALGO={name:"HMAC",hash:e.SHA_256_HASH},e.EMPTY_DATA_SHA_256=new Uint8Array([227,176,196,66,152,252,28,20,154,251,244,200,153,111,185,36,39,174,65,228,100,155,147,76,164,149,153,27,120,82,184,85])}(is)),is}var as;function go(){if(as)return st;as=1,Object.defineProperty(st,"__esModule",{value:!0}),st.Sha256=void 0;var e=Rl(),t=po(),r=Ut,n=We,s=function(){function a(c){this.secret=c,this.reset()}return a.prototype.update=function(c){var u=this;(0,e.isEmptyData)(c)||(this.operation=this.operation.then(function(d){return d.onerror=function(){u.operation=Promise.reject(new Error("Error encountered updating hash"))},d.process(o(c)),d}),this.operation.catch(function(){}))},a.prototype.digest=function(){return this.operation.then(function(c){return new Promise(function(u,d){c.onerror=function(){d(new Error("Error encountered finalizing hash"))},c.oncomplete=function(){c.result&&u(new Uint8Array(c.result)),d(new Error("Error encountered finalizing hash"))},c.finish()})})},a.prototype.reset=function(){this.secret?(this.operation=i(this.secret).then(function(c){return(0,n.locateWindow)().msCrypto.subtle.sign(t.SHA_256_HMAC_ALGO,c)}),this.operation.catch(function(){})):this.operation=Promise.resolve((0,n.locateWindow)().msCrypto.subtle.digest("SHA-256"))},a}();st.Sha256=s;function i(a){return new Promise(function(c,u){var d=(0,n.locateWindow)().msCrypto.subtle.importKey("raw",o(a),t.SHA_256_HMAC_ALGO,!1,["sign"]);d.oncomplete=function(){d.result&&c(d.result),u(new Error("ImportKey completed without importing key."))},d.onerror=function(){u(new Error("ImportKey failed to import key."))}})}function o(a){return typeof a=="string"?(0,r.fromUtf8)(a):ArrayBuffer.isView(a)?new Uint8Array(a.buffer,a.byteOffset,a.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(a)}return st}var ot={},cs;function mo(){if(cs)return ot;cs=1,Object.defineProperty(ot,"__esModule",{value:!0}),ot.Sha256=void 0;var e=Oe(),t=po(),r=We,n=function(){function s(i){this.toHash=new Uint8Array(0),this.secret=i,this.reset()}return s.prototype.update=function(i){if(!(0,e.isEmptyData)(i)){var o=(0,e.convertToBuffer)(i),a=new Uint8Array(this.toHash.byteLength+o.byteLength);a.set(this.toHash,0),a.set(o,this.toHash.byteLength),this.toHash=a}},s.prototype.digest=function(){var i=this;return this.key?this.key.then(function(o){return(0,r.locateWindow)().crypto.subtle.sign(t.SHA_256_HMAC_ALGO,o,i.toHash).then(function(a){return new Uint8Array(a)})}):(0,e.isEmptyData)(this.toHash)?Promise.resolve(t.EMPTY_DATA_SHA_256):Promise.resolve().then(function(){return(0,r.locateWindow)().crypto.subtle.digest(t.SHA_256_HASH,i.toHash)}).then(function(o){return Promise.resolve(new Uint8Array(o))})},s.prototype.reset=function(){var i=this;this.toHash=new Uint8Array(0),this.secret&&this.secret!==void 0&&(this.key=new Promise(function(o,a){(0,r.locateWindow)().crypto.subtle.importKey("raw",(0,e.convertToBuffer)(i.secret),t.SHA_256_HMAC_ALGO,!1,["sign"]).then(o,a)}),this.key.catch(function(){}))},s}();return ot.Sha256=n,ot}var us={},at={},ue={},ds;function yo(){return ds||(ds=1,Object.defineProperty(ue,"__esModule",{value:!0}),ue.MAX_HASHABLE_LENGTH=ue.INIT=ue.KEY=ue.DIGEST_LENGTH=ue.BLOCK_SIZE=void 0,ue.BLOCK_SIZE=64,ue.DIGEST_LENGTH=32,ue.KEY=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),ue.INIT=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],ue.MAX_HASHABLE_LENGTH=Math.pow(2,53)-1),ue}var ct={},ls;function Tl(){if(ls)return ct;ls=1,Object.defineProperty(ct,"__esModule",{value:!0}),ct.RawSha256=void 0;var e=yo(),t=function(){function r(){this.state=Int32Array.from(e.INIT),this.temp=new Int32Array(64),this.buffer=new Uint8Array(64),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}return r.prototype.update=function(n){if(this.finished)throw new Error("Attempted to update an already finished hash.");var s=0,i=n.byteLength;if(this.bytesHashed+=i,this.bytesHashed*8>e.MAX_HASHABLE_LENGTH)throw new Error("Cannot hash more than 2^53 - 1 bits");for(;i>0;)this.buffer[this.bufferLength++]=n[s++],i--,this.bufferLength===e.BLOCK_SIZE&&(this.hashBuffer(),this.bufferLength=0)},r.prototype.digest=function(){if(!this.finished){var n=this.bytesHashed*8,s=new DataView(this.buffer.buffer,this.buffer.byteOffset,this.buffer.byteLength),i=this.bufferLength;if(s.setUint8(this.bufferLength++,128),i%e.BLOCK_SIZE>=e.BLOCK_SIZE-8){for(var o=this.bufferLength;o<e.BLOCK_SIZE;o++)s.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(var o=this.bufferLength;o<e.BLOCK_SIZE-8;o++)s.setUint8(o,0);s.setUint32(e.BLOCK_SIZE-8,Math.floor(n/4294967296),!0),s.setUint32(e.BLOCK_SIZE-4,n),this.hashBuffer(),this.finished=!0}for(var a=new Uint8Array(e.DIGEST_LENGTH),o=0;o<8;o++)a[o*4]=this.state[o]>>>24&255,a[o*4+1]=this.state[o]>>>16&255,a[o*4+2]=this.state[o]>>>8&255,a[o*4+3]=this.state[o]>>>0&255;return a},r.prototype.hashBuffer=function(){for(var n=this,s=n.buffer,i=n.state,o=i[0],a=i[1],c=i[2],u=i[3],d=i[4],p=i[5],f=i[6],m=i[7],g=0;g<e.BLOCK_SIZE;g++){if(g<16)this.temp[g]=(s[g*4]&255)<<24|(s[g*4+1]&255)<<16|(s[g*4+2]&255)<<8|s[g*4+3]&255;else{var A=this.temp[g-2],N=(A>>>17|A<<15)^(A>>>19|A<<13)^A>>>10;A=this.temp[g-15];var me=(A>>>7|A<<25)^(A>>>18|A<<14)^A>>>3;this.temp[g]=(N+this.temp[g-7]|0)+(me+this.temp[g-16]|0)}var we=(((d>>>6|d<<26)^(d>>>11|d<<21)^(d>>>25|d<<7))+(d&p^~d&f)|0)+(m+(e.KEY[g]+this.temp[g]|0)|0)|0,je=((o>>>2|o<<30)^(o>>>13|o<<19)^(o>>>22|o<<10))+(o&a^o&c^a&c)|0;m=f,f=p,p=d,d=u+we|0,u=c,c=a,a=o,o=we+je|0}i[0]+=o,i[1]+=a,i[2]+=c,i[3]+=u,i[4]+=d,i[5]+=p,i[6]+=f,i[7]+=m},r}();return ct.RawSha256=t,ct}var hs;function _l(){if(hs)return at;hs=1,Object.defineProperty(at,"__esModule",{value:!0}),at.Sha256=void 0;var e=ge,t=yo(),r=Tl(),n=Oe(),s=function(){function o(a){this.secret=a,this.hash=new r.RawSha256,this.reset()}return o.prototype.update=function(a){if(!((0,n.isEmptyData)(a)||this.error))try{this.hash.update((0,n.convertToBuffer)(a))}catch(c){this.error=c}},o.prototype.digestSync=function(){if(this.error)throw this.error;return this.outer?(this.outer.finished||this.outer.update(this.hash.digest()),this.outer.digest()):this.hash.digest()},o.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(a){return[2,this.digestSync()]})})},o.prototype.reset=function(){if(this.hash=new r.RawSha256,this.secret){this.outer=new r.RawSha256;var a=i(this.secret),c=new Uint8Array(t.BLOCK_SIZE);c.set(a);for(var u=0;u<t.BLOCK_SIZE;u++)a[u]^=54,c[u]^=92;this.hash.update(a),this.outer.update(c);for(var u=0;u<a.byteLength;u++)a[u]=0}},o}();at.Sha256=s;function i(o){var a=(0,n.convertToBuffer)(o);if(a.byteLength>t.BLOCK_SIZE){var c=new r.RawSha256;c.update(a),a=c.digest()}var u=new Uint8Array(t.BLOCK_SIZE);return u.set(a),u}return at}var fs;function Ol(){return fs||(fs=1,function(e){Object.defineProperty(e,"__esModule",{value:!0});var t=ge;t.__exportStar(_l(),e)}(us)),us}var ps;function Ml(){if(ps)return nt;ps=1,Object.defineProperty(nt,"__esModule",{value:!0}),nt.Sha256=void 0;var e=go(),t=mo(),r=Ol(),n=lo(),s=ho(),i=We,o=Oe(),a=function(){function c(u){(0,n.supportsWebCrypto)((0,i.locateWindow)())?this.hash=new t.Sha256(u):(0,s.isMsWindow)((0,i.locateWindow)())?this.hash=new e.Sha256(u):this.hash=new r.Sha256(u)}return c.prototype.update=function(u,d){this.hash.update((0,o.convertToBuffer)(u))},c.prototype.digest=function(){return this.hash.digest()},c.prototype.reset=function(){this.hash.reset()},c}();return nt.Sha256=a,nt}(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WebCryptoSha256=e.Ie11Sha256=void 0;var t=ge;t.__exportStar(Ml(),e);var r=go();Object.defineProperty(e,"Ie11Sha256",{enumerable:!0,get:function(){return r.Sha256}});var n=mo();Object.defineProperty(e,"WebCryptoSha256",{enumerable:!0,get:function(){return n.Sha256}})})(fo);const Nl={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},bo={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},L={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},re={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},Re={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class y{static getFirstMatch(t,r){const n=r.match(t);return n&&n.length>0&&n[1]||""}static getSecondMatch(t,r){const n=r.match(t);return n&&n.length>1&&n[2]||""}static matchAndReturnConst(t,r,n){if(t.test(r))return n}static getWindowsVersionName(t){switch(t){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),r[0]===10)switch(r[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(t){const r=t.split(".").splice(0,2).map(n=>parseInt(n,10)||0);if(r.push(0),!(r[0]===1&&r[1]<5)){if(r[0]===1&&r[1]<6)return"Cupcake";if(r[0]===1&&r[1]>=6)return"Donut";if(r[0]===2&&r[1]<2)return"Eclair";if(r[0]===2&&r[1]===2)return"Froyo";if(r[0]===2&&r[1]>2)return"Gingerbread";if(r[0]===3)return"Honeycomb";if(r[0]===4&&r[1]<1)return"Ice Cream Sandwich";if(r[0]===4&&r[1]<4)return"Jelly Bean";if(r[0]===4&&r[1]>=4)return"KitKat";if(r[0]===5)return"Lollipop";if(r[0]===6)return"Marshmallow";if(r[0]===7)return"Nougat";if(r[0]===8)return"Oreo";if(r[0]===9)return"Pie"}}static getVersionPrecision(t){return t.split(".").length}static compareVersions(t,r,n=!1){const s=y.getVersionPrecision(t),i=y.getVersionPrecision(r);let o=Math.max(s,i),a=0;const c=y.map([t,r],u=>{const d=o-y.getVersionPrecision(u),p=u+new Array(d+1).join(".0");return y.map(p.split("."),f=>new Array(20-f.length).join("0")+f).reverse()});for(n&&(a=o-Math.min(s,i)),o-=1;o>=a;){if(c[0][o]>c[1][o])return 1;if(c[0][o]===c[1][o]){if(o===a)return 0;o-=1}else if(c[0][o]<c[1][o])return-1}}static map(t,r){const n=[];let s;if(Array.prototype.map)return Array.prototype.map.call(t,r);for(s=0;s<t.length;s+=1)n.push(r(t[s]));return n}static find(t,r){let n,s;if(Array.prototype.find)return Array.prototype.find.call(t,r);for(n=0,s=t.length;n<s;n+=1){const i=t[n];if(r(i,n))return i}}static assign(t,...r){const n=t;let s,i;if(Object.assign)return Object.assign(t,...r);for(s=0,i=r.length;s<i;s+=1){const o=r[s];typeof o=="object"&&o!==null&&Object.keys(o).forEach(a=>{n[a]=o[a]})}return t}static getBrowserAlias(t){return Nl[t]}static getBrowserTypeByAlias(t){return bo[t]||""}}const I=/version\/(\d+(\.?_?\d+)+)/i,Il=[{test:[/googlebot/i],describe(e){const t={name:"Googlebot"},r=y.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){const t={name:"Opera"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){const t={name:"Opera"},r=y.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){const t={name:"Samsung Internet for Android"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){const t={name:"NAVER Whale Browser"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){const t={name:"MZ Browser"},r=y.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){const t={name:"Focus"},r=y.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){const t={name:"Swing"},r=y.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){const t={name:"Opera Coast"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){const t={name:"Opera Touch"},r=y.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){const t={name:"Yandex Browser"},r=y.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){const t={name:"UC Browser"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){const t={name:"Maxthon"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){const t={name:"Epiphany"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){const t={name:"Puffin"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){const t={name:"Sleipnir"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){const t={name:"K-Meleon"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){const t={name:"WeChat"},r=y.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){const t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=y.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){const t={name:"Internet Explorer"},r=y.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){const t={name:"Microsoft Edge"},r=y.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){const t={name:"Microsoft Edge"},r=y.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){const t={name:"Vivaldi"},r=y.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){const t={name:"SeaMonkey"},r=y.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){const t={name:"Sailfish"},r=y.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){const t={name:"Amazon Silk"},r=y.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){const t={name:"PhantomJS"},r=y.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){const t={name:"SlimerJS"},r=y.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t={name:"BlackBerry"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){const t={name:"WebOS Browser"},r=y.getFirstMatch(I,e)||y.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){const t={name:"Bada"},r=y.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){const t={name:"Tizen"},r=y.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){const t={name:"QupZilla"},r=y.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){const t={name:"Firefox"},r=y.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){const t={name:"Electron"},r=y.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){const t={name:"Miui"},r=y.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){const t={name:"Chromium"},r=y.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){const t={name:"Chrome"},r=y.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){const t={name:"Google Search"},r=y.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t={name:"Android Browser"},r=y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){const t={name:"PlayStation 4"},r=y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){const t={name:"Safari"},r=y.getFirstMatch(I,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){const t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,n=e.search("\\(")!==-1?r:t;return{name:y.getFirstMatch(n,e),version:y.getSecondMatch(n,e)}}}],Ul=[{test:[/Roku\/DVP/],describe(e){const t=y.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:re.Roku,version:t}}},{test:[/windows phone/i],describe(e){const t=y.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:re.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){const t=y.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=y.getWindowsVersionName(t);return{name:re.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){const t={name:re.iOS},r=y.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){const t=y.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=y.getMacOSVersionName(t),n={name:re.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){const t=y.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:re.iOS,version:t}}},{test(e){const t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){const t=y.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=y.getAndroidVersionName(t),n={name:re.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){const t=y.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:re.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){const t=y.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||y.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||y.getFirstMatch(/\bbb(\d+)/i,e);return{name:re.BlackBerry,version:t}}},{test:[/bada/i],describe(e){const t=y.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:re.Bada,version:t}}},{test:[/tizen/i],describe(e){const t=y.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:re.Tizen,version:t}}},{test:[/linux/i],describe(){return{name:re.Linux}}},{test:[/CrOS/],describe(){return{name:re.ChromeOS}}},{test:[/PlayStation 4/],describe(e){const t=y.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:re.PlayStation4,version:t}}}],Bl=[{test:[/googlebot/i],describe(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe(e){const t=y.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:L.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe(){return{type:L.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe(){return{type:L.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(){return{type:L.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe(){return{type:L.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe(){return{type:L.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe(){return{type:L.tablet}}},{test(e){const t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){const t=y.getFirstMatch(/(ipod|iphone)/i,e);return{type:L.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe(){return{type:L.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe(){return{type:L.mobile}}},{test(e){return e.getBrowserName(!0)==="blackberry"},describe(){return{type:L.mobile,vendor:"BlackBerry"}}},{test(e){return e.getBrowserName(!0)==="bada"},describe(){return{type:L.mobile}}},{test(e){return e.getBrowserName()==="windows phone"},describe(){return{type:L.mobile,vendor:"Microsoft"}}},{test(e){const t=Number(String(e.getOSVersion()).split(".")[0]);return e.getOSName(!0)==="android"&&t>=3},describe(){return{type:L.tablet}}},{test(e){return e.getOSName(!0)==="android"},describe(){return{type:L.mobile}}},{test(e){return e.getOSName(!0)==="macos"},describe(){return{type:L.desktop,vendor:"Apple"}}},{test(e){return e.getOSName(!0)==="windows"},describe(){return{type:L.desktop}}},{test(e){return e.getOSName(!0)==="linux"},describe(){return{type:L.desktop}}},{test(e){return e.getOSName(!0)==="playstation 4"},describe(){return{type:L.tv}}},{test(e){return e.getOSName(!0)==="roku"},describe(){return{type:L.tv}}}],$l=[{test(e){return e.getBrowserName(!0)==="microsoft edge"},describe(e){if(/\sedg\//i.test(e))return{name:Re.Blink};const t=y.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:Re.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){const t={name:Re.Trident},r=y.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){return e.test(/presto/i)},describe(e){const t={name:Re.Presto},r=y.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){const t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){const t={name:Re.Gecko},r=y.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe(){return{name:Re.Blink}}},{test:[/(apple)?webkit/i],describe(e){const t={name:Re.WebKit},r=y.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class gs{constructor(t,r=!1){if(t==null||t==="")throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},r!==!0&&this.parse()}getUA(){return this._ua}test(t){return t.test(this._ua)}parseBrowser(){this.parsedResult.browser={};const t=y.find(Il,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};const t=y.find(Ul,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os}getOSName(t){const{name:r}=this.getOS();return t?String(r).toLowerCase()||"":r||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(t=!1){const{type:r}=this.getPlatform();return t?String(r).toLowerCase()||"":r||""}parsePlatform(){this.parsedResult.platform={};const t=y.find(Bl,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};const t=y.find($l,r=>{if(typeof r.test=="function")return r.test(this);if(r.test instanceof Array)return r.test.some(n=>this.test(n));throw new Error("Browser's test function is not valid")});return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return y.assign({},this.parsedResult)}satisfies(t){const r={};let n=0;const s={};let i=0;if(Object.keys(t).forEach(o=>{const a=t[o];typeof a=="string"?(s[o]=a,i+=1):typeof a=="object"&&(r[o]=a,n+=1)}),n>0){const o=Object.keys(r),a=y.find(o,u=>this.isOS(u));if(a){const u=this.satisfies(r[a]);if(u!==void 0)return u}const c=y.find(o,u=>this.isPlatform(u));if(c){const u=this.satisfies(r[c]);if(u!==void 0)return u}}if(i>0){const o=Object.keys(s),a=y.find(o,c=>this.isBrowser(c,!0));if(a!==void 0)return this.compareVersion(s[a])}}isBrowser(t,r=!1){const n=this.getBrowserName().toLowerCase();let s=t.toLowerCase();const i=y.getBrowserTypeByAlias(s);return r&&i&&(s=i.toLowerCase()),s===n}compareVersion(t){let r=[0],n=t,s=!1;const i=this.getBrowserVersion();if(typeof i=="string")return t[0]===">"||t[0]==="<"?(n=t.substr(1),t[1]==="="?(s=!0,n=t.substr(2)):r=[],t[0]===">"?r.push(1):r.push(-1)):t[0]==="="?n=t.substr(1):t[0]==="~"&&(s=!0,n=t.substr(1)),r.indexOf(y.compareVersions(i,n,s))>-1}isOS(t){return this.getOSName(!0)===String(t).toLowerCase()}isPlatform(t){return this.getPlatformType(!0)===String(t).toLowerCase()}isEngine(t){return this.getEngineName(!0)===String(t).toLowerCase()}is(t,r=!1){return this.isBrowser(t,r)||this.isOS(t)||this.isPlatform(t)}some(t=[]){return t.some(r=>this.is(r))}}/*!
 * Bowser - a browser detector
 * https://github.com/lancedikson/bowser
 * MIT License | (c) Dustin Diaz 2012-2015
 * MIT License | (c) Denis Demchenko 2015-2019
 */class wo{static getParser(t,r=!1){if(typeof t!="string")throw new Error("UserAgent should be a string");return new gs(t,r)}static parse(t){return new gs(t).getResult()}static get BROWSER_MAP(){return bo}static get ENGINE_MAP(){return Re}static get OS_MAP(){return re}static get PLATFORMS_MAP(){return L}}const Ll=({serviceId:e,clientVersion:t})=>async()=>{var r,n,s,i,o;const a=typeof window<"u"&&(r=window==null?void 0:window.navigator)!=null&&r.userAgent?wo.parse(window.navigator.userAgent):void 0,c=[["aws-sdk-js",t],["ua","2.0"],[`os/${((n=a==null?void 0:a.os)==null?void 0:n.name)||"other"}`,(s=a==null?void 0:a.os)==null?void 0:s.version],["lang/js"],["md/browser",`${((i=a==null?void 0:a.browser)==null?void 0:i.name)??"unknown"}_${((o=a==null?void 0:a.browser)==null?void 0:o.version)??"unknown"}`]];return e&&c.push([`api/${e}`,t]),c};function jl(e){let t=0,r=0,n=null,s=null;const i=a=>{if(typeof a!="number")throw new Error("Attempted to allocate an event message where size was not a number: "+a);t=a,r=4,n=new Uint8Array(a),new DataView(n.buffer).setUint32(0,a,!1)},o=async function*(){const a=e[Symbol.asyncIterator]();for(;;){const{value:c,done:u}=await a.next();if(u){if(t)if(t===r)yield n;else throw new Error("Truncated event message received.");else return;return}const d=c.length;let p=0;for(;p<d;){if(!n){const m=d-p;s||(s=new Uint8Array(4));const g=Math.min(4-r,m);if(s.set(c.slice(p,p+g),r),r+=g,p+=g,r<4)break;i(new DataView(s.buffer).getUint32(0,!1)),s=null}const f=Math.min(t-r,d-p);n.set(c.slice(p,p+f),r),r+=f,p+=f,t&&t===r&&(yield n,n=null,t=0,r=0)}}};return{[Symbol.asyncIterator]:o}}function Dl(e,t){return async function(r){const{value:n}=r.headers[":message-type"];if(n==="error"){const s=new Error(r.headers[":error-message"].value||"UnknownError");throw s.name=r.headers[":error-code"].value,s}else if(n==="exception"){const s=r.headers[":exception-type"].value,i={[s]:r},o=await e(i);if(o.$unknown){const a=new Error(t(r.body));throw a.name=s,a}throw o[s]}else if(n==="event"){const s={[r.headers[":event-type"].value]:r},i=await e(s);return i.$unknown?void 0:i}else throw Error(`Unrecognizable event type: ${r.headers[":event-type"].value}`)}}let Fl=class{constructor({utf8Encoder:e,utf8Decoder:t}){this.eventStreamCodec=new lc(e,t),this.utfEncoder=e}deserialize(e,t){const r=jl(e);return new pc({messageStream:new hc({inputStream:r,decoder:this.eventStreamCodec}),deserializer:Dl(t,this.utfEncoder)})}serialize(e,t){return new fc({messageStream:new gc({inputStream:e,serializer:t}),encoder:this.eventStreamCodec,includeEndFrame:!0})}};const Hl=e=>({[Symbol.asyncIterator]:async function*(){const t=e.getReader();try{for(;;){const{done:r,value:n}=await t.read();if(r)return;yield n}}finally{t.releaseLock()}}}),zl=e=>{const t=e[Symbol.asyncIterator]();return new ReadableStream({async pull(r){const{done:n,value:s}=await t.next();if(n)return r.close();r.enqueue(s)}})};class ql{constructor({utf8Encoder:t,utf8Decoder:r}){this.universalMarshaller=new Fl({utf8Decoder:r,utf8Encoder:t})}deserialize(t,r){const n=Vl(t)?Hl(t):t;return this.universalMarshaller.deserialize(n,r)}serialize(t,r){const n=this.universalMarshaller.serialize(t,r);return typeof ReadableStream=="function"?zl(n):n}}const Vl=e=>typeof ReadableStream=="function"&&e instanceof ReadableStream,Wl=e=>new ql(e);function Kl(e,t,r=1024*1024){return new Promise((n,s)=>{const i=new FileReader;i.addEventListener("error",s),i.addEventListener("abort",s);const o=e.size;let a=0;function c(){if(a>=o){n();return}i.readAsArrayBuffer(e.slice(a,Math.min(o,a+r)))}i.addEventListener("load",u=>{const d=u.target.result;t(new Uint8Array(d)),a+=d.byteLength,c()}),c()})}const Gl=async function(e,t){const r=new e;return await Kl(t,n=>{r.update(n)}),r.digest()},Zl=e=>()=>Promise.reject(e),xe=64,Xl=16,Yl=[1732584193,4023233417,2562383102,271733878];class Jl{constructor(){this.reset()}update(t){if(Ql(t))return;if(this.finished)throw new Error("Attempted to update an already finished hash.");const r=eh(t);let n=0,{byteLength:s}=r;for(this.bytesHashed+=s;s>0;)this.buffer.setUint8(this.bufferLength++,r[n++]),s--,this.bufferLength===xe&&(this.hashBuffer(),this.bufferLength=0)}async digest(){if(!this.finished){const{buffer:r,bufferLength:n,bytesHashed:s}=this,i=s*8;if(r.setUint8(this.bufferLength++,128),n%xe>=xe-8){for(let o=this.bufferLength;o<xe;o++)r.setUint8(o,0);this.hashBuffer(),this.bufferLength=0}for(let o=this.bufferLength;o<xe-8;o++)r.setUint8(o,0);r.setUint32(xe-8,i>>>0,!0),r.setUint32(xe-4,Math.floor(i/4294967296),!0),this.hashBuffer(),this.finished=!0}const t=new DataView(new ArrayBuffer(Xl));for(let r=0;r<4;r++)t.setUint32(r*4,this.state[r],!0);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}hashBuffer(){const{buffer:t,state:r}=this;let n=r[0],s=r[1],i=r[2],o=r[3];n=Y(n,s,i,o,t.getUint32(0,!0),7,3614090360),o=Y(o,n,s,i,t.getUint32(4,!0),12,3905402710),i=Y(i,o,n,s,t.getUint32(8,!0),17,606105819),s=Y(s,i,o,n,t.getUint32(12,!0),22,3250441966),n=Y(n,s,i,o,t.getUint32(16,!0),7,4118548399),o=Y(o,n,s,i,t.getUint32(20,!0),12,1200080426),i=Y(i,o,n,s,t.getUint32(24,!0),17,2821735955),s=Y(s,i,o,n,t.getUint32(28,!0),22,4249261313),n=Y(n,s,i,o,t.getUint32(32,!0),7,1770035416),o=Y(o,n,s,i,t.getUint32(36,!0),12,2336552879),i=Y(i,o,n,s,t.getUint32(40,!0),17,4294925233),s=Y(s,i,o,n,t.getUint32(44,!0),22,2304563134),n=Y(n,s,i,o,t.getUint32(48,!0),7,1804603682),o=Y(o,n,s,i,t.getUint32(52,!0),12,4254626195),i=Y(i,o,n,s,t.getUint32(56,!0),17,2792965006),s=Y(s,i,o,n,t.getUint32(60,!0),22,1236535329),n=J(n,s,i,o,t.getUint32(4,!0),5,4129170786),o=J(o,n,s,i,t.getUint32(24,!0),9,3225465664),i=J(i,o,n,s,t.getUint32(44,!0),14,643717713),s=J(s,i,o,n,t.getUint32(0,!0),20,3921069994),n=J(n,s,i,o,t.getUint32(20,!0),5,3593408605),o=J(o,n,s,i,t.getUint32(40,!0),9,38016083),i=J(i,o,n,s,t.getUint32(60,!0),14,3634488961),s=J(s,i,o,n,t.getUint32(16,!0),20,3889429448),n=J(n,s,i,o,t.getUint32(36,!0),5,568446438),o=J(o,n,s,i,t.getUint32(56,!0),9,3275163606),i=J(i,o,n,s,t.getUint32(12,!0),14,4107603335),s=J(s,i,o,n,t.getUint32(32,!0),20,1163531501),n=J(n,s,i,o,t.getUint32(52,!0),5,2850285829),o=J(o,n,s,i,t.getUint32(8,!0),9,4243563512),i=J(i,o,n,s,t.getUint32(28,!0),14,1735328473),s=J(s,i,o,n,t.getUint32(48,!0),20,2368359562),n=Q(n,s,i,o,t.getUint32(20,!0),4,4294588738),o=Q(o,n,s,i,t.getUint32(32,!0),11,2272392833),i=Q(i,o,n,s,t.getUint32(44,!0),16,1839030562),s=Q(s,i,o,n,t.getUint32(56,!0),23,4259657740),n=Q(n,s,i,o,t.getUint32(4,!0),4,2763975236),o=Q(o,n,s,i,t.getUint32(16,!0),11,1272893353),i=Q(i,o,n,s,t.getUint32(28,!0),16,4139469664),s=Q(s,i,o,n,t.getUint32(40,!0),23,3200236656),n=Q(n,s,i,o,t.getUint32(52,!0),4,681279174),o=Q(o,n,s,i,t.getUint32(0,!0),11,3936430074),i=Q(i,o,n,s,t.getUint32(12,!0),16,3572445317),s=Q(s,i,o,n,t.getUint32(24,!0),23,76029189),n=Q(n,s,i,o,t.getUint32(36,!0),4,3654602809),o=Q(o,n,s,i,t.getUint32(48,!0),11,3873151461),i=Q(i,o,n,s,t.getUint32(60,!0),16,530742520),s=Q(s,i,o,n,t.getUint32(8,!0),23,3299628645),n=ee(n,s,i,o,t.getUint32(0,!0),6,4096336452),o=ee(o,n,s,i,t.getUint32(28,!0),10,1126891415),i=ee(i,o,n,s,t.getUint32(56,!0),15,2878612391),s=ee(s,i,o,n,t.getUint32(20,!0),21,4237533241),n=ee(n,s,i,o,t.getUint32(48,!0),6,1700485571),o=ee(o,n,s,i,t.getUint32(12,!0),10,2399980690),i=ee(i,o,n,s,t.getUint32(40,!0),15,4293915773),s=ee(s,i,o,n,t.getUint32(4,!0),21,2240044497),n=ee(n,s,i,o,t.getUint32(32,!0),6,1873313359),o=ee(o,n,s,i,t.getUint32(60,!0),10,4264355552),i=ee(i,o,n,s,t.getUint32(24,!0),15,2734768916),s=ee(s,i,o,n,t.getUint32(52,!0),21,1309151649),n=ee(n,s,i,o,t.getUint32(16,!0),6,4149444226),o=ee(o,n,s,i,t.getUint32(44,!0),10,3174756917),i=ee(i,o,n,s,t.getUint32(8,!0),15,718787259),s=ee(s,i,o,n,t.getUint32(36,!0),21,3951481745),r[0]=n+r[0]&4294967295,r[1]=s+r[1]&4294967295,r[2]=i+r[2]&4294967295,r[3]=o+r[3]&4294967295}reset(){this.state=Uint32Array.from(Yl),this.buffer=new DataView(new ArrayBuffer(xe)),this.bufferLength=0,this.bytesHashed=0,this.finished=!1}}function Lt(e,t,r,n,s,i){return t=(t+e&4294967295)+(n+i&4294967295)&4294967295,(t<<s|t>>>32-s)+r&4294967295}function Y(e,t,r,n,s,i,o){return Lt(t&r|~t&n,e,t,s,i,o)}function J(e,t,r,n,s,i,o){return Lt(t&n|r&~n,e,t,s,i,o)}function Q(e,t,r,n,s,i,o){return Lt(t^r^n,e,t,s,i,o)}function ee(e,t,r,n,s,i,o){return Lt(r^(t|~n),e,t,s,i,o)}function Ql(e){return typeof e=="string"?e.length===0:e.byteLength===0}function eh(e){return typeof e=="string"?At(e):ArrayBuffer.isView(e)?new Uint8Array(e.buffer,e.byteOffset,e.byteLength/Uint8Array.BYTES_PER_ELEMENT):new Uint8Array(e)}const th=e=>{if(typeof e=="string"){let t=e.length;for(let r=t-1;r>=0;r--){const n=e.charCodeAt(r);n>127&&n<=2047?t++:n>2047&&n<=65535&&(t+=2),n>=56320&&n<=57343&&r--}return t}else{if(typeof e.byteLength=="number")return e.byteLength;if(typeof e.size=="number")return e.size}throw new Error(`Body Length computation failed for ${e}`)};class rh{constructor(t){this.sigv4Signer=new xr(t),this.signerOptions=t}async sign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().sign(t,r)}return this.sigv4Signer.sign(t,r)}async presign(t,r={}){if(r.signingRegion==="*"){if(this.signerOptions.runtime!=="node")throw new Error("This request requires signing with SigV4Asymmetric algorithm. It's only available in Node.js");return this.getSigv4aSigner().presign(t,r)}return this.sigv4Signer.presign(t,r)}getSigv4aSigner(){if(!this.sigv4aSigner){let t;try{if(t=typeof require=="function"&&require("@aws-sdk/signature-v4-crt").CrtSignerV4,typeof t!="function")throw new Error}catch(r){throw r.message=`${r.message}
Please check if you have installed "@aws-sdk/signature-v4-crt" package explicitly. 
For more information please go to https://github.com/aws/aws-sdk-js-v3#functionality-requiring-aws-common-runtime-crt`,r}this.sigv4aSigner=new t({...this.signerOptions,signingAlgorithm:1})}return this.sigv4aSigner}}const Fr="required",l="type",h="conditions",b="fn",w="argv",R="ref",Z="assign",x="url",k="properties",Se="authSchemes",Ae="disableDoubleEncoding",Ee="signingName",Me="signingRegion",C="headers",ms=!1,ye=!0,be="isSet",v="tree",te="booleanEquals",E="error",Nt="aws.partition",$="stringEquals",D="getAttr",de="name",ut="substring",vo="hardwareType",So="regionPrefix",ys="bucketAliasSuffix",Pr="outpostId",Le="isValidHostLabel",fe="not",Ao="parseURL",Hr="s3-outposts",S="endpoint",bs="aws.isVirtualHostableS3Bucket",qe="s3",Eo="{url#scheme}://{url#authority}{url#normalizedPath}{Bucket}",xo="{url#scheme}://{Bucket}.{url#authority}{url#path}",ko="https://{Bucket}.s3-accelerate.{partitionResult#dnsSuffix}",ws="https://{Bucket}.s3.{partitionResult#dnsSuffix}",Co="aws.parseArn",Po="bucketArn",Ro="arnType",It="",zr="s3-object-lambda",To="accesspoint",qr="accessPointName",vs="{url#scheme}://{accessPointName}-{bucketArn#accountId}.{url#authority}{url#path}",Ss="mrapPartition",As="outpostType",Es="arnPrefix",_o="{url#scheme}://{url#authority}{url#normalizedPath}{uri_encoded_bucket}",xs="https://s3.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",Rr="{url#scheme}://{url#authority}{url#path}",ks="https://s3.{partitionResult#dnsSuffix}",Xt={[Fr]:!1,[l]:"String"},De={[Fr]:!0,default:!1,[l]:"Boolean"},Yt={[Fr]:!1,[l]:"Boolean"},he={[b]:te,[w]:[{[R]:"Accelerate"},!0]},B={[b]:te,[w]:[{[R]:"UseFIPS"},!0]},U={[b]:te,[w]:[{[R]:"UseDualStack"},!0]},j={[b]:be,[w]:[{[R]:"Endpoint"}]},Oo={[b]:Nt,[w]:[{[R]:"Region"}],[Z]:"partitionResult"},Cs={[b]:$,[w]:[{[b]:D,[w]:[{[R]:"partitionResult"},de]},"aws-cn"]},Mo={[b]:be,[w]:[{[R]:"Bucket"}]},ve={[R]:"Bucket"},Ps={[R]:vo},Rs={[h]:[{[b]:fe,[w]:[j]}],[E]:"Expected a endpoint to be specified but no endpoint was found",[l]:E},P={[b]:fe,[w]:[j]},ne={[b]:Ao,[w]:[{[R]:"Endpoint"}],[Z]:"url"},Ct={[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:Hr,[Me]:"{Region}"}]},_={},Jt={[b]:te,[w]:[{[R]:"ForcePathStyle"},!1]},nh={[R]:"ForcePathStyle"},F={[b]:te,[w]:[{[R]:"Accelerate"},!1]},q={[b]:$,[w]:[{[R]:"Region"},"aws-global"]},V={[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:qe,[Me]:"us-east-1"}]},M={[b]:fe,[w]:[q]},W={[b]:te,[w]:[{[R]:"UseGlobalEndpoint"},!0]},Ts={[x]:"https://{Bucket}.s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:{[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:qe,[Me]:"{Region}"}]},[C]:{}},z={[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:qe,[Me]:"{Region}"}]},K={[b]:te,[w]:[{[R]:"UseGlobalEndpoint"},!1]},O={[b]:te,[w]:[{[R]:"UseDualStack"},!1]},_s={[x]:"https://{Bucket}.s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},T={[b]:te,[w]:[{[R]:"UseFIPS"},!1]},Os={[x]:"https://{Bucket}.s3-accelerate.dualstack.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},Ms={[x]:"https://{Bucket}.s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},Qt={[b]:te,[w]:[{[b]:D,[w]:[{[R]:"url"},"isIp"]},!0]},No={[R]:"url"},er={[b]:te,[w]:[{[b]:D,[w]:[No,"isIp"]},!1]},tr={[x]:Eo,[k]:z,[C]:{}},Tr={[x]:xo,[k]:z,[C]:{}},Ns={[S]:Tr,[l]:S},rr={[x]:ko,[k]:z,[C]:{}},Is={[x]:"https://{Bucket}.s3.{Region}.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},Pt={[E]:"Invalid region: region was not a valid DNS name.",[l]:E},ie={[R]:Po},Io={[R]:Ro},nr={[b]:D,[w]:[ie,"service"]},Vr={[R]:qr},Us={[h]:[U],[E]:"S3 Object Lambda does not support Dual-stack",[l]:E},Bs={[h]:[he],[E]:"S3 Object Lambda does not support S3 Accelerate",[l]:E},$s={[h]:[{[b]:be,[w]:[{[R]:"DisableAccessPoints"}]},{[b]:te,[w]:[{[R]:"DisableAccessPoints"},!0]}],[E]:"Access points are not supported for this operation",[l]:E},sr={[h]:[{[b]:be,[w]:[{[R]:"UseArnRegion"}]},{[b]:te,[w]:[{[R]:"UseArnRegion"},!1]},{[b]:fe,[w]:[{[b]:$,[w]:[{[b]:D,[w]:[ie,"region"]},"{Region}"]}]}],[E]:"Invalid configuration: region from ARN `{bucketArn#region}` does not match client region `{Region}` and UseArnRegion is `false`",[l]:E},Uo={[b]:D,[w]:[{[R]:"bucketPartition"},de]},Bo={[b]:D,[w]:[ie,"accountId"]},ir={[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:zr,[Me]:"{bucketArn#region}"}]},Ls={[E]:"Invalid ARN: The access point name may only contain a-z, A-Z, 0-9 and `-`. Found: `{accessPointName}`",[l]:E},or={[E]:"Invalid ARN: The account id may only contain a-z, A-Z, 0-9 and `-`. Found: `{bucketArn#accountId}`",[l]:E},ar={[E]:"Invalid region in ARN: `{bucketArn#region}` (invalid DNS name)",[l]:E},cr={[E]:"Client was configured for partition `{partitionResult#name}` but ARN (`{Bucket}`) has `{bucketPartition#name}`",[l]:E},js={[E]:"Invalid ARN: The ARN may only contain a single resource component after `accesspoint`.",[l]:E},Ds={[E]:"Invalid ARN: Expected a resource of the format `accesspoint:<accesspoint name>` but no name was provided",[l]:E},dt={[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:qe,[Me]:"{bucketArn#region}"}]},Fs={[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:Hr,[Me]:"{bucketArn#region}"}]},Hs={[b]:Co,[w]:[ve]},zs={[x]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:z,[C]:{}},qs={[x]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:z,[C]:{}},Vs={[x]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:z,[C]:{}},ur={[x]:_o,[k]:z,[C]:{}},Ws={[x]:"https://s3.{Region}.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:z,[C]:{}},Ks={[R]:"UseObjectLambdaEndpoint"},dr={[Se]:[{[Ae]:!0,[de]:"sigv4",[Ee]:zr,[Me]:"{Region}"}]},Gs={[x]:"https://s3-fips.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},Zs={[x]:"https://s3-fips.{Region}.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},Xs={[x]:"https://s3.dualstack.{Region}.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},lr={[x]:Rr,[k]:z,[C]:{}},Ys={[x]:"https://s3.{Region}.{partitionResult#dnsSuffix}",[k]:z,[C]:{}},hr=[{[R]:"Region"}],sh=[{[R]:"Endpoint"}],Js=[ve],Qs=[{[b]:Le,[w]:[{[R]:Pr},!1]}],ei=[{[b]:$,[w]:[{[R]:So},"beta"]}],lt=[j,ne],ti=[Mo],ke=[Oo],ri=[{[b]:Le,[w]:[{[R]:"Region"},!1]}],Ce=[{[b]:$,[w]:[{[R]:"Region"},"us-east-1"]}],fr=[{[b]:$,[w]:[Io,To]}],ni=[{[b]:D,[w]:[ie,"resourceId[1]"],[Z]:qr},{[b]:fe,[w]:[{[b]:$,[w]:[Vr,It]}]}],ih=[ie,"resourceId[1]"],si=[U],pr=[he],gr=[{[b]:fe,[w]:[{[b]:$,[w]:[{[b]:D,[w]:[ie,"region"]},It]}]}],ii=[{[b]:fe,[w]:[{[b]:be,[w]:[{[b]:D,[w]:[ie,"resourceId[2]"]}]}]}],oh=[ie,"resourceId[2]"],mr=[{[b]:Nt,[w]:[{[b]:D,[w]:[ie,"region"]}],[Z]:"bucketPartition"}],oi=[{[b]:$,[w]:[Uo,{[b]:D,[w]:[{[R]:"partitionResult"},de]}]}],yr=[{[b]:Le,[w]:[{[b]:D,[w]:[ie,"region"]},!0]}],br=[{[b]:Le,[w]:[Bo,!1]}],ai=[{[b]:Le,[w]:[Vr,!1]}],Rt=[B],ci=[{[b]:Le,[w]:[{[R]:"Region"},!0]}],ah={version:"1.0",parameters:{Bucket:Xt,Region:Xt,UseFIPS:De,UseDualStack:De,Endpoint:Xt,ForcePathStyle:De,Accelerate:De,UseGlobalEndpoint:De,UseObjectLambdaEndpoint:Yt,DisableAccessPoints:Yt,DisableMultiRegionAccessPoints:De,UseArnRegion:Yt},rules:[{[h]:[{[b]:be,[w]:hr}],[l]:v,rules:[{[h]:[he,B],error:"Accelerate cannot be used with FIPS",[l]:E},{[h]:[U,j],error:"Cannot set dual-stack in combination with a custom endpoint.",[l]:E},{[h]:[j,B],error:"A custom endpoint cannot be combined with FIPS",[l]:E},{[h]:[j,he],error:"A custom endpoint cannot be combined with S3 Accelerate",[l]:E},{[h]:[B,Oo,Cs],error:"Partition does not support FIPS",[l]:E},{[h]:[Mo,{[b]:ut,[w]:[ve,49,50,ye],[Z]:vo},{[b]:ut,[w]:[ve,8,12,ye],[Z]:So},{[b]:ut,[w]:[ve,0,7,ye],[Z]:ys},{[b]:ut,[w]:[ve,32,49,ye],[Z]:Pr},{[b]:Nt,[w]:hr,[Z]:"regionPartition"},{[b]:$,[w]:[{[R]:ys},"--op-s3"]}],[l]:v,rules:[{[h]:Qs,[l]:v,rules:[{[h]:[{[b]:$,[w]:[Ps,"e"]}],[l]:v,rules:[{[h]:ei,[l]:v,rules:[Rs,{[h]:lt,endpoint:{[x]:"https://{Bucket}.ec2.{url#authority}",[k]:Ct,[C]:_},[l]:S}]},{endpoint:{[x]:"https://{Bucket}.ec2.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:Ct,[C]:_},[l]:S}]},{[h]:[{[b]:$,[w]:[Ps,"o"]}],[l]:v,rules:[{[h]:ei,[l]:v,rules:[Rs,{[h]:lt,endpoint:{[x]:"https://{Bucket}.op-{outpostId}.{url#authority}",[k]:Ct,[C]:_},[l]:S}]},{endpoint:{[x]:"https://{Bucket}.op-{outpostId}.s3-outposts.{Region}.{regionPartition#dnsSuffix}",[k]:Ct,[C]:_},[l]:S}]},{error:'Unrecognized hardware type: "Expected hardware type o or e but got {hardwareType}"',[l]:E}]},{error:"Invalid ARN: The outpost Id must only contain a-z, A-Z, 0-9 and `-`.",[l]:E}]},{[h]:ti,[l]:v,rules:[{[h]:[j,{[b]:fe,[w]:[{[b]:be,[w]:[{[b]:Ao,[w]:sh}]}]}],error:"Custom endpoint `{Endpoint}` was not a valid URI",[l]:E},{[h]:[Jt,{[b]:bs,[w]:[ve,ms]}],[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:ri,[l]:v,rules:[{[h]:[he,Cs],error:"S3 Accelerate cannot be used in this region",[l]:E},{[h]:[U,B,F,P,q],endpoint:{[x]:"https://{Bucket}.s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:V,[C]:_},[l]:S},{[h]:[U,B,F,P,M,W],[l]:v,rules:[{endpoint:Ts,[l]:S}]},{[h]:[U,B,F,P,M,K],endpoint:Ts,[l]:S},{[h]:[O,B,F,P,q],endpoint:{[x]:"https://{Bucket}.s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:V,[C]:_},[l]:S},{[h]:[O,B,F,P,M,W],[l]:v,rules:[{endpoint:_s,[l]:S}]},{[h]:[O,B,F,P,M,K],endpoint:_s,[l]:S},{[h]:[U,T,he,P,q],endpoint:{[x]:"https://{Bucket}.s3-accelerate.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:V,[C]:_},[l]:S},{[h]:[U,T,he,P,M,W],[l]:v,rules:[{endpoint:Os,[l]:S}]},{[h]:[U,T,he,P,M,K],endpoint:Os,[l]:S},{[h]:[U,T,F,P,q],endpoint:{[x]:"https://{Bucket}.s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:V,[C]:_},[l]:S},{[h]:[U,T,F,P,M,W],[l]:v,rules:[{endpoint:Ms,[l]:S}]},{[h]:[U,T,F,P,M,K],endpoint:Ms,[l]:S},{[h]:[O,T,F,j,ne,Qt,q],endpoint:{[x]:Eo,[k]:V,[C]:_},[l]:S},{[h]:[O,T,F,j,ne,er,q],endpoint:{[x]:xo,[k]:V,[C]:_},[l]:S},{[h]:[O,T,F,j,ne,Qt,M,W],[l]:v,rules:[{[h]:Ce,endpoint:tr,[l]:S},{endpoint:tr,[l]:S}]},{[h]:[O,T,F,j,ne,er,M,W],[l]:v,rules:[{[h]:Ce,endpoint:Tr,[l]:S},Ns]},{[h]:[O,T,F,j,ne,Qt,M,K],endpoint:tr,[l]:S},{[h]:[O,T,F,j,ne,er,M,K],endpoint:Tr,[l]:S},{[h]:[O,T,he,P,q],endpoint:{[x]:ko,[k]:V,[C]:_},[l]:S},{[h]:[O,T,he,P,M,W],[l]:v,rules:[{[h]:Ce,endpoint:rr,[l]:S},{endpoint:rr,[l]:S}]},{[h]:[O,T,he,P,M,K],endpoint:rr,[l]:S},{[h]:[O,T,F,P,q],endpoint:{[x]:ws,[k]:V,[C]:_},[l]:S},{[h]:[O,T,F,P,M,W],[l]:v,rules:[{[h]:Ce,endpoint:{[x]:ws,[k]:z,[C]:_},[l]:S},{endpoint:Is,[l]:S}]},{[h]:[O,T,F,P,M,K],endpoint:Is,[l]:S}]},Pt]}]},{[h]:[j,ne,{[b]:$,[w]:[{[b]:D,[w]:[No,"scheme"]},"http"]},{[b]:bs,[w]:[ve,ye]},Jt,T,O,F],[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:ri,[l]:v,rules:[Ns]},Pt]}]},{[h]:[Jt,{[b]:Co,[w]:Js,[Z]:Po}],[l]:v,rules:[{[h]:[{[b]:D,[w]:[ie,"resourceId[0]"],[Z]:Ro},{[b]:fe,[w]:[{[b]:$,[w]:[Io,It]}]}],[l]:v,rules:[{[h]:[{[b]:$,[w]:[nr,zr]}],[l]:v,rules:[{[h]:fr,[l]:v,rules:[{[h]:ni,[l]:v,rules:[Us,Bs,{[h]:gr,[l]:v,rules:[$s,{[h]:ii,[l]:v,rules:[sr,{[h]:mr,[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:oi,[l]:v,rules:[{[h]:yr,[l]:v,rules:[{[h]:[{[b]:$,[w]:[Bo,It]}],error:"Invalid ARN: Missing account id",[l]:E},{[h]:br,[l]:v,rules:[{[h]:ai,[l]:v,rules:[{[h]:lt,endpoint:{[x]:vs,[k]:ir,[C]:_},[l]:S},{[h]:Rt,endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:ir,[C]:_},[l]:S},{endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.s3-object-lambda.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:ir,[C]:_},[l]:S}]},Ls]},or]},ar]},cr]}]}]},js]},{error:"Invalid ARN: bucket ARN is missing a region",[l]:E}]},Ds]},{error:"Invalid ARN: Object Lambda ARNs only support `accesspoint` arn types, but found: `{arnType}`",[l]:E}]},{[h]:fr,[l]:v,rules:[{[h]:ni,[l]:v,rules:[{[h]:gr,[l]:v,rules:[{[h]:fr,[l]:v,rules:[{[h]:gr,[l]:v,rules:[$s,{[h]:ii,[l]:v,rules:[sr,{[h]:mr,[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:[{[b]:$,[w]:[Uo,"{partitionResult#name}"]}],[l]:v,rules:[{[h]:yr,[l]:v,rules:[{[h]:[{[b]:$,[w]:[nr,qe]}],[l]:v,rules:[{[h]:br,[l]:v,rules:[{[h]:ai,[l]:v,rules:[{[h]:pr,error:"Access Points do not support S3 Accelerate",[l]:E},{[h]:[B,U],endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:dt,[C]:_},[l]:S},{[h]:[B,O],endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint-fips.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:dt,[C]:_},[l]:S},{[h]:[T,U],endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.dualstack.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:dt,[C]:_},[l]:S},{[h]:[T,O,j,ne],endpoint:{[x]:vs,[k]:dt,[C]:_},[l]:S},{[h]:[T,O],endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.s3-accesspoint.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:dt,[C]:_},[l]:S}]},Ls]},or]},{error:"Invalid ARN: The ARN was not for the S3 service, found: {bucketArn#service}",[l]:E}]},ar]},cr]}]}]},js]}]}]},{[h]:[{[b]:Le,[w]:[Vr,ye]}],[l]:v,rules:[{[h]:si,error:"S3 MRAP does not support dual-stack",[l]:E},{[h]:Rt,error:"S3 MRAP does not support FIPS",[l]:E},{[h]:pr,error:"S3 MRAP does not support S3 Accelerate",[l]:E},{[h]:[{[b]:te,[w]:[{[R]:"DisableMultiRegionAccessPoints"},ye]}],error:"Invalid configuration: Multi-Region Access Point ARNs are disabled.",[l]:E},{[h]:[{[b]:Nt,[w]:hr,[Z]:Ss}],[l]:v,rules:[{[h]:[{[b]:$,[w]:[{[b]:D,[w]:[{[R]:Ss},de]},{[b]:D,[w]:[ie,"partition"]}]}],[l]:v,rules:[{endpoint:{[x]:"https://{accessPointName}.accesspoint.s3-global.{mrapPartition#dnsSuffix}",[k]:{[Se]:[{[Ae]:ye,name:"sigv4a",[Ee]:qe,signingRegionSet:["*"]}]},[C]:_},[l]:S}]},{error:"Client was configured for partition `{mrapPartition#name}` but bucket referred to partition `{bucketArn#partition}`",[l]:E}]}]},{error:"Invalid Access Point Name",[l]:E}]},Ds]},{[h]:[{[b]:$,[w]:[nr,Hr]}],[l]:v,rules:[{[h]:si,error:"S3 Outposts does not support Dual-stack",[l]:E},{[h]:Rt,error:"S3 Outposts does not support FIPS",[l]:E},{[h]:pr,error:"S3 Outposts does not support S3 Accelerate",[l]:E},{[h]:[{[b]:be,[w]:[{[b]:D,[w]:[ie,"resourceId[4]"]}]}],error:"Invalid Arn: Outpost Access Point ARN contains sub resources",[l]:E},{[h]:[{[b]:D,[w]:ih,[Z]:Pr}],[l]:v,rules:[{[h]:Qs,[l]:v,rules:[sr,{[h]:mr,[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:oi,[l]:v,rules:[{[h]:yr,[l]:v,rules:[{[h]:br,[l]:v,rules:[{[h]:[{[b]:D,[w]:oh,[Z]:As}],[l]:v,rules:[{[h]:[{[b]:D,[w]:[ie,"resourceId[3]"],[Z]:qr}],[l]:v,rules:[{[h]:[{[b]:$,[w]:[{[R]:As},To]}],[l]:v,rules:[{[h]:lt,endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.{url#authority}",[k]:Fs,[C]:_},[l]:S},{endpoint:{[x]:"https://{accessPointName}-{bucketArn#accountId}.{outpostId}.s3-outposts.{bucketArn#region}.{bucketPartition#dnsSuffix}",[k]:Fs,[C]:_},[l]:S}]},{error:"Expected an outpost type `accesspoint`, found {outpostType}",[l]:E}]},{error:"Invalid ARN: expected an access point name",[l]:E}]},{error:"Invalid ARN: Expected a 4-component resource",[l]:E}]},or]},ar]},cr]}]}]},{error:"Invalid ARN: The outpost Id may only contain a-z, A-Z, 0-9 and `-`. Found: `{outpostId}`",[l]:E}]},{error:"Invalid ARN: The Outpost Id was not set",[l]:E}]},{error:"Invalid ARN: Unrecognized format: {Bucket} (type: {arnType})",[l]:E}]},{error:"Invalid ARN: No ARN type specified",[l]:E}]},{[h]:[{[b]:ut,[w]:[ve,0,4,ms],[Z]:Es},{[b]:$,[w]:[{[R]:Es},"arn:"]},{[b]:fe,[w]:[{[b]:be,[w]:[Hs]}]}],error:"Invalid ARN: `{Bucket}` was not a valid ARN",[l]:E},{[h]:[{[b]:te,[w]:[nh,ye]},Hs],error:"Path-style addressing cannot be used with ARN buckets",[l]:E},{[h]:[{[b]:"uriEncode",[w]:Js,[Z]:"uri_encoded_bucket"}],[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:[F],[l]:v,rules:[{[h]:[U,P,B,q],endpoint:{[x]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:V,[C]:_},[l]:S},{[h]:[U,P,B,M,W],[l]:v,rules:[{endpoint:zs,[l]:S}]},{[h]:[U,P,B,M,K],endpoint:zs,[l]:S},{[h]:[O,P,B,q],endpoint:{[x]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:V,[C]:_},[l]:S},{[h]:[O,P,B,M,W],[l]:v,rules:[{endpoint:qs,[l]:S}]},{[h]:[O,P,B,M,K],endpoint:qs,[l]:S},{[h]:[U,P,T,q],endpoint:{[x]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}/{uri_encoded_bucket}",[k]:V,[C]:_},[l]:S},{[h]:[U,P,T,M,W],[l]:v,rules:[{endpoint:Vs,[l]:S}]},{[h]:[U,P,T,M,K],endpoint:Vs,[l]:S},{[h]:[O,j,ne,T,q],endpoint:{[x]:_o,[k]:V,[C]:_},[l]:S},{[h]:[O,j,ne,T,M,W],[l]:v,rules:[{[h]:Ce,endpoint:ur,[l]:S},{endpoint:ur,[l]:S}]},{[h]:[O,j,ne,T,M,K],endpoint:ur,[l]:S},{[h]:[O,P,T,q],endpoint:{[x]:xs,[k]:V,[C]:_},[l]:S},{[h]:[O,P,T,M,W],[l]:v,rules:[{[h]:Ce,endpoint:{[x]:xs,[k]:z,[C]:_},[l]:S},{endpoint:Ws,[l]:S}]},{[h]:[O,P,T,M,K],endpoint:Ws,[l]:S}]},{error:"Path-style addressing cannot be used with S3 Accelerate",[l]:E}]}]}]},{[h]:[{[b]:be,[w]:[Ks]},{[b]:te,[w]:[Ks,ye]}],[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:ci,[l]:v,rules:[Us,Bs,{[h]:lt,endpoint:{[x]:Rr,[k]:dr,[C]:_},[l]:S},{[h]:Rt,endpoint:{[x]:"https://s3-object-lambda-fips.{Region}.{partitionResult#dnsSuffix}",[k]:dr,[C]:_},[l]:S},{endpoint:{[x]:"https://s3-object-lambda.{Region}.{partitionResult#dnsSuffix}",[k]:dr,[C]:_},[l]:S}]},Pt]}]},{[h]:[{[b]:fe,[w]:ti}],[l]:v,rules:[{[h]:ke,[l]:v,rules:[{[h]:ci,[l]:v,rules:[{[h]:[B,U,P,q],endpoint:{[x]:"https://s3-fips.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:V,[C]:_},[l]:S},{[h]:[B,U,P,M,W],[l]:v,rules:[{endpoint:Gs,[l]:S}]},{[h]:[B,U,P,M,K],endpoint:Gs,[l]:S},{[h]:[B,O,P,q],endpoint:{[x]:"https://s3-fips.us-east-1.{partitionResult#dnsSuffix}",[k]:V,[C]:_},[l]:S},{[h]:[B,O,P,M,W],[l]:v,rules:[{endpoint:Zs,[l]:S}]},{[h]:[B,O,P,M,K],endpoint:Zs,[l]:S},{[h]:[T,U,P,q],endpoint:{[x]:"https://s3.dualstack.us-east-1.{partitionResult#dnsSuffix}",[k]:V,[C]:_},[l]:S},{[h]:[T,U,P,M,W],[l]:v,rules:[{endpoint:Xs,[l]:S}]},{[h]:[T,U,P,M,K],endpoint:Xs,[l]:S},{[h]:[T,O,j,ne,q],endpoint:{[x]:Rr,[k]:V,[C]:_},[l]:S},{[h]:[T,O,j,ne,M,W],[l]:v,rules:[{[h]:Ce,endpoint:lr,[l]:S},{endpoint:lr,[l]:S}]},{[h]:[T,O,j,ne,M,K],endpoint:lr,[l]:S},{[h]:[T,O,P,q],endpoint:{[x]:ks,[k]:V,[C]:_},[l]:S},{[h]:[T,O,P,M,W],[l]:v,rules:[{[h]:Ce,endpoint:{[x]:ks,[k]:z,[C]:_},[l]:S},{endpoint:Ys,[l]:S}]},{[h]:[T,O,P,M,K],endpoint:Ys,[l]:S}]},Pt]}]}]},{error:"A region must be set when sending requests to S3.",[l]:E}]},ch=ah,uh=(e,t={})=>yu(ch,{endpointParams:e,logger:t.logger}),dh=e=>({apiVersion:"2006-03-01",base64Decoder:(e==null?void 0:e.base64Decoder)??Lr,base64Encoder:(e==null?void 0:e.base64Encoder)??jr,disableHostPrefix:(e==null?void 0:e.disableHostPrefix)??!1,endpointProvider:(e==null?void 0:e.endpointProvider)??uh,getAwsChunkedEncodingStream:(e==null?void 0:e.getAwsChunkedEncodingStream)??_d,logger:(e==null?void 0:e.logger)??new kd,sdkStreamMixin:(e==null?void 0:e.sdkStreamMixin)??$d,serviceId:(e==null?void 0:e.serviceId)??"S3",signerConstructor:(e==null?void 0:e.signerConstructor)??rh,signingEscapePath:(e==null?void 0:e.signingEscapePath)??!1,urlParser:(e==null?void 0:e.urlParser)??_t,useArnRegion:(e==null?void 0:e.useArnRegion)??!1,utf8Decoder:(e==null?void 0:e.utf8Decoder)??At,utf8Encoder:(e==null?void 0:e.utf8Encoder)??Bt}),lh=["in-region","cross-region","mobile","standard","legacy"],hh=({defaultsMode:e}={})=>Ai(async()=>{const t=typeof e=="function"?await e():e;switch(t==null?void 0:t.toLowerCase()){case"auto":return Promise.resolve(fh()?"mobile":"standard");case"mobile":case"in-region":case"cross-region":case"standard":case"legacy":return Promise.resolve(t==null?void 0:t.toLocaleLowerCase());case void 0:return Promise.resolve("legacy");default:throw new Error(`Invalid parameter for "defaultsMode", expect ${lh.join(", ")}, got ${t}`)}}),fh=()=>{var e,t;const r=typeof window<"u"&&(e=window==null?void 0:window.navigator)!=null&&e.userAgent?wo.parse(window.navigator.userAgent):void 0,n=(t=r==null?void 0:r.platform)==null?void 0:t.type;return n==="tablet"||n==="mobile"},ph=e=>{const t=hh(e),r=()=>t().then(Kd),n=dh(e);return{...n,...e,runtime:"browser",defaultsMode:t,bodyLengthChecker:(e==null?void 0:e.bodyLengthChecker)??th,credentialDefaultProvider:(e==null?void 0:e.credentialDefaultProvider)??(s=>()=>Promise.reject(new Error("Credential is missing"))),defaultUserAgentProvider:(e==null?void 0:e.defaultUserAgentProvider)??Ll({serviceId:n.serviceId,clientVersion:yl.version}),eventStreamSerdeProvider:(e==null?void 0:e.eventStreamSerdeProvider)??Wl,maxAttempts:(e==null?void 0:e.maxAttempts)??$r,md5:(e==null?void 0:e.md5)??Jl,region:(e==null?void 0:e.region)??Zl("Region is missing"),requestHandler:(e==null?void 0:e.requestHandler)??new Nd(r),retryMode:(e==null?void 0:e.retryMode)??(async()=>(await r()).retryMode||Zu),sha1:(e==null?void 0:e.sha1)??io.Sha1,sha256:(e==null?void 0:e.sha256)??fo.Sha256,streamCollector:(e==null?void 0:e.streamCollector)??ro,streamHasher:(e==null?void 0:e.streamHasher)??Gl,useDualstackEndpoint:(e==null?void 0:e.useDualstackEndpoint)??(()=>Promise.resolve(Eu)),useFipsEndpoint:(e==null?void 0:e.useFipsEndpoint)??(()=>Promise.resolve(xu))}};class gh extends Cd{constructor(t){const r=ph(t),n=Jd(r),s=ku(n),i=Gu(s),o=yd(i),a=o,c=Dc(a),u=ma(c),d=Wc(u),p=Cu(d);super(p),this.config=p,this.middlewareStack.use(Ed(this.config)),this.middlewareStack.use(Tu(this.config)),this.middlewareStack.use(na(this.config)),this.middlewareStack.use(oa(this.config)),this.middlewareStack.use(la(this.config)),this.middlewareStack.use(Vc(this.config)),this.middlewareStack.use(va(this.config)),this.middlewareStack.use(ea(this.config)),this.middlewareStack.use(Au(this.config))}destroy(){super.destroy()}}var Wr={},jt={};(function(e){const t=":A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",r=t+"\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040",n="["+t+"]["+r+"]*",s=new RegExp("^"+n+"$"),i=function(a,c){const u=[];let d=c.exec(a);for(;d;){const p=[];p.startIndex=c.lastIndex-d[0].length;const f=d.length;for(let m=0;m<f;m++)p.push(d[m]);u.push(p),d=c.exec(a)}return u},o=function(a){const c=s.exec(a);return!(c===null||typeof c>"u")};e.isExist=function(a){return typeof a<"u"},e.isEmptyObject=function(a){return Object.keys(a).length===0},e.merge=function(a,c,u){if(c){const d=Object.keys(c),p=d.length;for(let f=0;f<p;f++)u==="strict"?a[d[f]]=[c[d[f]]]:a[d[f]]=c[d[f]]}},e.getValue=function(a){return e.isExist(a)?a:""},e.isName=o,e.getAllMatches=i,e.nameRegexp=n})(jt);const Kr=jt,mh={allowBooleanAttributes:!1,unpairedTags:[]};Wr.validate=function(e,t){t=Object.assign({},mh,t);const r=[];let n=!1,s=!1;e[0]==="\uFEFF"&&(e=e.substr(1));for(let i=0;i<e.length;i++)if(e[i]==="<"&&e[i+1]==="?"){if(i+=2,i=di(e,i),i.err)return i}else if(e[i]==="<"){let o=i;if(i++,e[i]==="!"){i=li(e,i);continue}else{let a=!1;e[i]==="/"&&(a=!0,i++);let c="";for(;i<e.length&&e[i]!==">"&&e[i]!==" "&&e[i]!=="	"&&e[i]!==`
`&&e[i]!=="\r";i++)c+=e[i];if(c=c.trim(),c[c.length-1]==="/"&&(c=c.substring(0,c.length-1),i--),!xh(c)){let p;return c.trim().length===0?p="Invalid space after '<'.":p="Tag '"+c+"' is an invalid name.",H("InvalidTag",p,se(e,i))}const u=wh(e,i);if(u===!1)return H("InvalidAttr","Attributes for '"+c+"' have open quote.",se(e,i));let d=u.value;if(i=u.index,d[d.length-1]==="/"){const p=i-d.length;d=d.substring(0,d.length-1);const f=hi(d,t);if(f===!0)n=!0;else return H(f.err.code,f.err.msg,se(e,p+f.err.line))}else if(a)if(u.tagClosed){if(d.trim().length>0)return H("InvalidTag","Closing tag '"+c+"' can't have attributes or invalid starting.",se(e,o));{const p=r.pop();if(c!==p.tagName){let f=se(e,p.tagStartPos);return H("InvalidTag","Expected closing tag '"+p.tagName+"' (opened in line "+f.line+", col "+f.col+") instead of closing tag '"+c+"'.",se(e,o))}r.length==0&&(s=!0)}}else return H("InvalidTag","Closing tag '"+c+"' doesn't have proper closing.",se(e,i));else{const p=hi(d,t);if(p!==!0)return H(p.err.code,p.err.msg,se(e,i-d.length+p.err.line));if(s===!0)return H("InvalidXml","Multiple possible root nodes found.",se(e,i));t.unpairedTags.indexOf(c)!==-1||r.push({tagName:c,tagStartPos:o}),n=!0}for(i++;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="!"){i++,i=li(e,i);continue}else if(e[i+1]==="?"){if(i=di(e,++i),i.err)return i}else break;else if(e[i]==="&"){const p=Ah(e,i);if(p==-1)return H("InvalidChar","char '&' is not expected.",se(e,i));i=p}else if(s===!0&&!ui(e[i]))return H("InvalidXml","Extra text at the end",se(e,i));e[i]==="<"&&i--}}else{if(ui(e[i]))continue;return H("InvalidChar","char '"+e[i]+"' is not expected.",se(e,i))}if(n){if(r.length==1)return H("InvalidTag","Unclosed tag '"+r[0].tagName+"'.",se(e,r[0].tagStartPos));if(r.length>0)return H("InvalidXml","Invalid '"+JSON.stringify(r.map(i=>i.tagName),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1})}else return H("InvalidXml","Start tag expected.",1);return!0};function ui(e){return e===" "||e==="	"||e===`
`||e==="\r"}function di(e,t){const r=t;for(;t<e.length;t++)if(e[t]=="?"||e[t]==" "){const n=e.substr(r,t-r);if(t>5&&n==="xml")return H("InvalidXml","XML declaration allowed only at the start of the document.",se(e,t));if(e[t]=="?"&&e[t+1]==">"){t++;break}else continue}return t}function li(e,t){if(e.length>t+5&&e[t+1]==="-"&&e[t+2]==="-"){for(t+=3;t<e.length;t++)if(e[t]==="-"&&e[t+1]==="-"&&e[t+2]===">"){t+=2;break}}else if(e.length>t+8&&e[t+1]==="D"&&e[t+2]==="O"&&e[t+3]==="C"&&e[t+4]==="T"&&e[t+5]==="Y"&&e[t+6]==="P"&&e[t+7]==="E"){let r=1;for(t+=8;t<e.length;t++)if(e[t]==="<")r++;else if(e[t]===">"&&(r--,r===0))break}else if(e.length>t+9&&e[t+1]==="["&&e[t+2]==="C"&&e[t+3]==="D"&&e[t+4]==="A"&&e[t+5]==="T"&&e[t+6]==="A"&&e[t+7]==="["){for(t+=8;t<e.length;t++)if(e[t]==="]"&&e[t+1]==="]"&&e[t+2]===">"){t+=2;break}}return t}const yh='"',bh="'";function wh(e,t){let r="",n="",s=!1;for(;t<e.length;t++){if(e[t]===yh||e[t]===bh)n===""?n=e[t]:n!==e[t]||(n="");else if(e[t]===">"&&n===""){s=!0;break}r+=e[t]}return n!==""?!1:{value:r,index:t,tagClosed:s}}const vh=new RegExp(`(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['"])(([\\s\\S])*?)\\5)?`,"g");function hi(e,t){const r=Kr.getAllMatches(e,vh),n={};for(let s=0;s<r.length;s++){if(r[s][1].length===0)return H("InvalidAttr","Attribute '"+r[s][2]+"' has no space in starting.",ht(r[s]));if(r[s][3]!==void 0&&r[s][4]===void 0)return H("InvalidAttr","Attribute '"+r[s][2]+"' is without value.",ht(r[s]));if(r[s][3]===void 0&&!t.allowBooleanAttributes)return H("InvalidAttr","boolean attribute '"+r[s][2]+"' is not allowed.",ht(r[s]));const i=r[s][2];if(!Eh(i))return H("InvalidAttr","Attribute '"+i+"' is an invalid name.",ht(r[s]));if(!n.hasOwnProperty(i))n[i]=1;else return H("InvalidAttr","Attribute '"+i+"' is repeated.",ht(r[s]))}return!0}function Sh(e,t){let r=/\d/;for(e[t]==="x"&&(t++,r=/[\da-fA-F]/);t<e.length;t++){if(e[t]===";")return t;if(!e[t].match(r))break}return-1}function Ah(e,t){if(t++,e[t]===";")return-1;if(e[t]==="#")return t++,Sh(e,t);let r=0;for(;t<e.length;t++,r++)if(!(e[t].match(/\w/)&&r<20)){if(e[t]===";")break;return-1}return t}function H(e,t,r){return{err:{code:e,msg:t,line:r.line||r,col:r.col}}}function Eh(e){return Kr.isName(e)}function xh(e){return Kr.isName(e)}function se(e,t){const r=e.substring(0,t).split(/\r?\n/);return{line:r.length,col:r[r.length-1].length+1}}function ht(e){return e.startIndex+e[1].length}var Gr={};const $o={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0,eNotation:!0},tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1,transformAttributeName:!1,updateTag:function(e,t,r){return e}},kh=function(e){return Object.assign({},$o,e)};Gr.buildOptions=kh;Gr.defaultOptions=$o;class Ch{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,r){t==="__proto__"&&(t="#__proto__"),this.child.push({[t]:r})}addChild(t){t.tagname==="__proto__"&&(t.tagname="#__proto__"),t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}var Ph=Ch;const Rh=jt;function Th(e,t){const r={};if(e[t+3]==="O"&&e[t+4]==="C"&&e[t+5]==="T"&&e[t+6]==="Y"&&e[t+7]==="P"&&e[t+8]==="E"){t=t+9;let n=1,s=!1,i=!1,o="";for(;t<e.length;t++)if(e[t]==="<"&&!i){if(s&&Mh(e,t))t+=7,[entityName,val,t]=_h(e,t+1),val.indexOf("&")===-1&&(r[Bh(entityName)]={regx:RegExp(`&${entityName};`,"g"),val});else if(s&&Nh(e,t))t+=8;else if(s&&Ih(e,t))t+=8;else if(s&&Uh(e,t))t+=9;else if(Oh)i=!0;else throw new Error("Invalid DOCTYPE");n++,o=""}else if(e[t]===">"){if(i?e[t-1]==="-"&&e[t-2]==="-"&&(i=!1,n--):n--,n===0)break}else e[t]==="["?s=!0:o+=e[t];if(n!==0)throw new Error("Unclosed DOCTYPE")}else throw new Error("Invalid Tag instead of DOCTYPE");return{entities:r,i:t}}function _h(e,t){let r="";for(;t<e.length&&e[t]!=="'"&&e[t]!=='"';t++)r+=e[t];if(r=r.trim(),r.indexOf(" ")!==-1)throw new Error("External entites are not supported");const n=e[t++];let s="";for(;t<e.length&&e[t]!==n;t++)s+=e[t];return[r,s,t]}function Oh(e,t){return e[t+1]==="!"&&e[t+2]==="-"&&e[t+3]==="-"}function Mh(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="N"&&e[t+4]==="T"&&e[t+5]==="I"&&e[t+6]==="T"&&e[t+7]==="Y"}function Nh(e,t){return e[t+1]==="!"&&e[t+2]==="E"&&e[t+3]==="L"&&e[t+4]==="E"&&e[t+5]==="M"&&e[t+6]==="E"&&e[t+7]==="N"&&e[t+8]==="T"}function Ih(e,t){return e[t+1]==="!"&&e[t+2]==="A"&&e[t+3]==="T"&&e[t+4]==="T"&&e[t+5]==="L"&&e[t+6]==="I"&&e[t+7]==="S"&&e[t+8]==="T"}function Uh(e,t){return e[t+1]==="!"&&e[t+2]==="N"&&e[t+3]==="O"&&e[t+4]==="T"&&e[t+5]==="A"&&e[t+6]==="T"&&e[t+7]==="I"&&e[t+8]==="O"&&e[t+9]==="N"}function Bh(e){if(Rh.isName(e))return e;throw new Error(`Invalid entity name ${e}`)}var $h=Th;const Lh=/^[-+]?0x[a-fA-F0-9]+$/,jh=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt);!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const Dh={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};function Fh(e,t={}){if(t=Object.assign({},Dh,t),!e||typeof e!="string")return e;let r=e.trim();if(t.skipLike!==void 0&&t.skipLike.test(r))return e;if(t.hex&&Lh.test(r))return Number.parseInt(r,16);{const n=jh.exec(r);if(n){const s=n[1],i=n[2];let o=Hh(n[3]);const a=n[4]||n[6];if(!t.leadingZeros&&i.length>0&&s&&r[2]!=="."||!t.leadingZeros&&i.length>0&&!s&&r[1]!==".")return e;{const c=Number(r),u=""+c;return u.search(/[eE]/)!==-1||a?t.eNotation?c:e:r.indexOf(".")!==-1?u==="0"&&o===""||u===o||s&&u==="-"+o?c:e:i?o===u||s+o===u?c:e:r===u||r===s+u?c:e}}else return e}}function Hh(e){return e&&e.indexOf(".")!==-1&&(e=e.replace(/0+$/,""),e==="."?e="0":e[0]==="."?e="0"+e:e[e.length-1]==="."&&(e=e.substr(0,e.length-1))),e}var zh=Fh;const Zr=jt,ft=Ph,qh=$h,Vh=zh;"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,Zr.nameRegexp);let Wh=class{constructor(e){this.options=e,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.ampEntity={regex:/&(amp|#38|#x26);/g,val:"&"},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:"¢"},pound:{regex:/&(pound|#163);/g,val:"£"},yen:{regex:/&(yen|#165);/g,val:"¥"},euro:{regex:/&(euro|#8364);/g,val:"€"},copyright:{regex:/&(copy|#169);/g,val:"©"},reg:{regex:/&(reg|#174);/g,val:"®"},inr:{regex:/&(inr|#8377);/g,val:"₹"}},this.addExternalEntities=Kh,this.parseXml=Jh,this.parseTextData=Gh,this.resolveNameSpace=Zh,this.buildAttributesMap=Yh,this.isItStopNode=rf,this.replaceEntitiesValue=ef,this.readStopNodeData=sf,this.saveTextToParentTag=tf,this.addChild=Qh}};function Kh(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];this.lastEntities[n]={regex:new RegExp("&"+n+";","g"),val:e[n]}}}function Gh(e,t,r,n,s,i,o){if(e!==void 0&&(this.options.trimValues&&!n&&(e=e.trim()),e.length>0)){o||(e=this.replaceEntitiesValue(e));const a=this.options.tagValueProcessor(t,e,r,s,i);return a==null?e:typeof a!=typeof e||a!==e?a:this.options.trimValues?Or(e,this.options.parseTagValue,this.options.numberParseOptions):e.trim()===e?Or(e,this.options.parseTagValue,this.options.numberParseOptions):e}}function Zh(e){if(this.options.removeNSPrefix){const t=e.split(":"),r=e.charAt(0)==="/"?"/":"";if(t[0]==="xmlns")return"";t.length===2&&(e=r+t[1])}return e}const Xh=new RegExp(`([^\\s=]+)\\s*(=\\s*(['"])([\\s\\S]*?)\\3)?`,"gm");function Yh(e,t,r){if(!this.options.ignoreAttributes&&typeof e=="string"){const n=Zr.getAllMatches(e,Xh),s=n.length,i={};for(let o=0;o<s;o++){const a=this.resolveNameSpace(n[o][1]);let c=n[o][4],u=this.options.attributeNamePrefix+a;if(a.length)if(this.options.transformAttributeName&&(u=this.options.transformAttributeName(u)),u==="__proto__"&&(u="#__proto__"),c!==void 0){this.options.trimValues&&(c=c.trim()),c=this.replaceEntitiesValue(c);const d=this.options.attributeValueProcessor(a,c,t);d==null?i[u]=c:typeof d!=typeof c||d!==c?i[u]=d:i[u]=Or(c,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(i[u]=!0)}if(!Object.keys(i).length)return;if(this.options.attributesGroupName){const o={};return o[this.options.attributesGroupName]=i,o}return i}}const Jh=function(e){e=e.replace(/\r\n?/g,`
`);const t=new ft("!xml");let r=t,n="",s="";for(let i=0;i<e.length;i++)if(e[i]==="<")if(e[i+1]==="/"){const o=Be(e,">",i,"Closing Tag is not closed.");let a=e.substring(i+2,o).trim();if(this.options.removeNSPrefix){const d=a.indexOf(":");d!==-1&&(a=a.substr(d+1))}this.options.transformTagName&&(a=this.options.transformTagName(a)),r&&(n=this.saveTextToParentTag(n,r,s));const c=s.substring(s.lastIndexOf(".")+1);if(a&&this.options.unpairedTags.indexOf(a)!==-1)throw new Error(`Unpaired tag can not be used as closing tag: </${a}>`);let u=0;c&&this.options.unpairedTags.indexOf(c)!==-1?(u=s.lastIndexOf(".",s.lastIndexOf(".")-1),this.tagsNodeStack.pop()):u=s.lastIndexOf("."),s=s.substring(0,u),r=this.tagsNodeStack.pop(),n="",i=o}else if(e[i+1]==="?"){let o=_r(e,i,!1,"?>");if(!o)throw new Error("Pi Tag is not closed.");if(n=this.saveTextToParentTag(n,r,s),!(this.options.ignoreDeclaration&&o.tagName==="?xml"||this.options.ignorePiTags)){const a=new ft(o.tagName);a.add(this.options.textNodeName,""),o.tagName!==o.tagExp&&o.attrExpPresent&&(a[":@"]=this.buildAttributesMap(o.tagExp,s,o.tagName)),this.addChild(r,a,s)}i=o.closeIndex+1}else if(e.substr(i+1,3)==="!--"){const o=Be(e,"-->",i+4,"Comment is not closed.");if(this.options.commentPropName){const a=e.substring(i+4,o-2);n=this.saveTextToParentTag(n,r,s),r.add(this.options.commentPropName,[{[this.options.textNodeName]:a}])}i=o}else if(e.substr(i+1,2)==="!D"){const o=qh(e,i);this.docTypeEntities=o.entities,i=o.i}else if(e.substr(i+1,2)==="!["){const o=Be(e,"]]>",i,"CDATA is not closed.")-2,a=e.substring(i+9,o);if(n=this.saveTextToParentTag(n,r,s),this.options.cdataPropName)r.add(this.options.cdataPropName,[{[this.options.textNodeName]:a}]);else{let c=this.parseTextData(a,r.tagname,s,!0,!1,!0);c==null&&(c=""),r.add(this.options.textNodeName,c)}i=o+2}else{let o=_r(e,i,this.options.removeNSPrefix),a=o.tagName,c=o.tagExp,u=o.attrExpPresent,d=o.closeIndex;this.options.transformTagName&&(a=this.options.transformTagName(a)),r&&n&&r.tagname!=="!xml"&&(n=this.saveTextToParentTag(n,r,s,!1));const p=r;if(p&&this.options.unpairedTags.indexOf(p.tagname)!==-1&&(r=this.tagsNodeStack.pop(),s=s.substring(0,s.lastIndexOf("."))),a!==t.tagname&&(s+=s?"."+a:a),this.isItStopNode(this.options.stopNodes,s,a)){let f="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)i=o.closeIndex;else if(this.options.unpairedTags.indexOf(a)!==-1)i=o.closeIndex;else{const g=this.readStopNodeData(e,a,d+1);if(!g)throw new Error(`Unexpected end of ${a}`);i=g.i,f=g.tagContent}const m=new ft(a);a!==c&&u&&(m[":@"]=this.buildAttributesMap(c,s,a)),f&&(f=this.parseTextData(f,a,s,!0,u,!0,!0)),s=s.substr(0,s.lastIndexOf(".")),m.add(this.options.textNodeName,f),this.addChild(r,m,s)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){a[a.length-1]==="/"?(a=a.substr(0,a.length-1),c=a):c=c.substr(0,c.length-1),this.options.transformTagName&&(a=this.options.transformTagName(a));const f=new ft(a);a!==c&&u&&(f[":@"]=this.buildAttributesMap(c,s,a)),this.addChild(r,f,s),s=s.substr(0,s.lastIndexOf("."))}else{const f=new ft(a);this.tagsNodeStack.push(r),a!==c&&u&&(f[":@"]=this.buildAttributesMap(c,s,a)),this.addChild(r,f,s),r=f}n="",i=d}}else n+=e[i];return t.child};function Qh(e,t,r){const n=this.options.updateTag(t.tagname,r,t[":@"]);n===!1||(typeof n=="string"&&(t.tagname=n),e.addChild(t))}const ef=function(e){if(this.options.processEntities){for(let t in this.docTypeEntities){const r=this.docTypeEntities[t];e=e.replace(r.regx,r.val)}for(let t in this.lastEntities){const r=this.lastEntities[t];e=e.replace(r.regex,r.val)}if(this.options.htmlEntities)for(let t in this.htmlEntities){const r=this.htmlEntities[t];e=e.replace(r.regex,r.val)}e=e.replace(this.ampEntity.regex,this.ampEntity.val)}return e};function tf(e,t,r,n){return e&&(n===void 0&&(n=Object.keys(t.child).length===0),e=this.parseTextData(e,t.tagname,r,!1,t[":@"]?Object.keys(t[":@"]).length!==0:!1,n),e!==void 0&&e!==""&&t.add(this.options.textNodeName,e),e=""),e}function rf(e,t,r){const n="*."+r;for(const s in e){const i=e[s];if(n===i||t===i)return!0}return!1}function nf(e,t,r=">"){let n,s="";for(let i=t;i<e.length;i++){let o=e[i];if(n)o===n&&(n="");else if(o==='"'||o==="'")n=o;else if(o===r[0])if(r[1]){if(e[i+1]===r[1])return{data:s,index:i}}else return{data:s,index:i};else o==="	"&&(o=" ");s+=o}}function Be(e,t,r,n){const s=e.indexOf(t,r);if(s===-1)throw new Error(n);return s+t.length-1}function _r(e,t,r,n=">"){const s=nf(e,t+1,n);if(!s)return;let i=s.data;const o=s.index,a=i.search(/\s/);let c=i,u=!0;if(a!==-1&&(c=i.substr(0,a).replace(/\s\s*$/,""),i=i.substr(a+1)),r){const d=c.indexOf(":");d!==-1&&(c=c.substr(d+1),u=c!==s.data.substr(d+1))}return{tagName:c,tagExp:i,closeIndex:o,attrExpPresent:u}}function sf(e,t,r){const n=r;let s=1;for(;r<e.length;r++)if(e[r]==="<")if(e[r+1]==="/"){const i=Be(e,">",r,`${t} is not closed`);if(e.substring(r+2,i).trim()===t&&(s--,s===0))return{tagContent:e.substring(n,r),i};r=i}else if(e[r+1]==="?")r=Be(e,"?>",r+1,"StopNode is not closed.");else if(e.substr(r+1,3)==="!--")r=Be(e,"-->",r+3,"StopNode is not closed.");else if(e.substr(r+1,2)==="![")r=Be(e,"]]>",r,"StopNode is not closed.")-2;else{const i=_r(e,r,">");i&&((i&&i.tagName)===t&&i.tagExp[i.tagExp.length-1]!=="/"&&s++,r=i.closeIndex)}}function Or(e,t,r){if(t&&typeof e=="string"){const n=e.trim();return n==="true"?!0:n==="false"?!1:Vh(e,r)}else return Zr.isExist(e)?e:""}var of=Wh,Lo={};function af(e,t){return jo(e,t)}function jo(e,t,r){let n;const s={};for(let i=0;i<e.length;i++){const o=e[i],a=cf(o);let c="";if(r===void 0?c=a:c=r+"."+a,a===t.textNodeName)n===void 0?n=o[a]:n+=""+o[a];else{if(a===void 0)continue;if(o[a]){let u=jo(o[a],t,c);const d=df(u,t);o[":@"]?uf(u,o[":@"],c,t):Object.keys(u).length===1&&u[t.textNodeName]!==void 0&&!t.alwaysCreateTextNode?u=u[t.textNodeName]:Object.keys(u).length===0&&(t.alwaysCreateTextNode?u[t.textNodeName]="":u=""),s[a]!==void 0&&s.hasOwnProperty(a)?(Array.isArray(s[a])||(s[a]=[s[a]]),s[a].push(u)):t.isArray(a,c,d)?s[a]=[u]:s[a]=u}}}return typeof n=="string"?n.length>0&&(s[t.textNodeName]=n):n!==void 0&&(s[t.textNodeName]=n),s}function cf(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function uf(e,t,r,n){if(t){const s=Object.keys(t),i=s.length;for(let o=0;o<i;o++){const a=s[o];n.isArray(a,r+"."+a,!0,!0)?e[a]=[t[a]]:e[a]=t[a]}}}function df(e,t){const{textNodeName:r}=t,n=Object.keys(e).length;return!!(n===0||n===1&&(e[r]||typeof e[r]=="boolean"||e[r]===0))}Lo.prettify=af;const{buildOptions:lf}=Gr,hf=of,{prettify:ff}=Lo,pf=Wr;let gf=class{constructor(e){this.externalEntities={},this.options=lf(e)}parse(e,t){if(typeof e!="string")if(e.toString)e=e.toString();else throw new Error("XML data is accepted in String or Bytes[] form.");if(t){t===!0&&(t={});const s=pf.validate(e,t);if(s!==!0)throw Error(`${s.err.msg}:${s.err.line}:${s.err.col}`)}const r=new hf(this.options);r.addExternalEntities(this.externalEntities);const n=r.parseXml(e);return this.options.preserveOrder||n===void 0?n:ff(n,this.options)}addEntity(e,t){if(t.indexOf("&")!==-1)throw new Error("Entity value can't have '&'");if(e.indexOf("&")!==-1||e.indexOf(";")!==-1)throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");if(t==="&")throw new Error("An entity with value '&' is not permitted");this.externalEntities[e]=t}};var mf=gf;const yf=`
`;function bf(e,t){let r="";return t.format&&t.indentBy.length>0&&(r=yf),Do(e,t,"",r)}function Do(e,t,r,n){let s="",i=!1;for(let o=0;o<e.length;o++){const a=e[o],c=wf(a);let u="";if(r.length===0?u=c:u=`${r}.${c}`,c===t.textNodeName){let g=a[c];vf(u,t)||(g=t.tagValueProcessor(c,g),g=Fo(g,t)),i&&(s+=n),s+=g,i=!1;continue}else if(c===t.cdataPropName){i&&(s+=n),s+=`<![CDATA[${a[c][0][t.textNodeName]}]]>`,i=!1;continue}else if(c===t.commentPropName){s+=n+`<!--${a[c][0][t.textNodeName]}-->`,i=!0;continue}else if(c[0]==="?"){const g=fi(a[":@"],t),A=c==="?xml"?"":n;let N=a[c][0][t.textNodeName];N=N.length!==0?" "+N:"",s+=A+`<${c}${N}${g}?>`,i=!0;continue}let d=n;d!==""&&(d+=t.indentBy);const p=fi(a[":@"],t),f=n+`<${c}${p}`,m=Do(a[c],t,u,d);t.unpairedTags.indexOf(c)!==-1?t.suppressUnpairedNode?s+=f+">":s+=f+"/>":(!m||m.length===0)&&t.suppressEmptyNode?s+=f+"/>":m&&m.endsWith(">")?s+=f+`>${m}${n}</${c}>`:(s+=f+">",m&&n!==""&&(m.includes("/>")||m.includes("</"))?s+=n+t.indentBy+m+n:s+=m,s+=`</${c}>`),i=!0}return s}function wf(e){const t=Object.keys(e);for(let r=0;r<t.length;r++){const n=t[r];if(n!==":@")return n}}function fi(e,t){let r="";if(e&&!t.ignoreAttributes)for(let n in e){let s=t.attributeValueProcessor(n,e[n]);s=Fo(s,t),s===!0&&t.suppressBooleanAttributes?r+=` ${n.substr(t.attributeNamePrefix.length)}`:r+=` ${n.substr(t.attributeNamePrefix.length)}="${s}"`}return r}function vf(e,t){e=e.substr(0,e.length-t.textNodeName.length-1);let r=e.substr(e.lastIndexOf(".")+1);for(let n in t.stopNodes)if(t.stopNodes[n]===e||t.stopNodes[n]==="*."+r)return!0;return!1}function Fo(e,t){if(e&&e.length>0&&t.processEntities)for(let r=0;r<t.entities.length;r++){const n=t.entities[r];e=e.replace(n.regex,n.val)}return e}var Sf=bf;const Af=Sf,Ef={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(e,t){return t},attributeValueProcessor:function(e,t){return t},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],oneListGroup:!1};function Ne(e){this.options=Object.assign({},Ef,e),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=Cf),this.processTextOrObjNode=xf,this.options.format?(this.indentate=kf,this.tagEndChar=`>
`,this.newLine=`
`):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine="")}Ne.prototype.build=function(e){return this.options.preserveOrder?Af(e,this.options):(Array.isArray(e)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(e={[this.options.arrayNodeName]:e}),this.j2x(e,0).val)};Ne.prototype.j2x=function(e,t){let r="",n="";for(let s in e)if(!(typeof e[s]>"u"))if(e[s]===null)s[0]==="?"?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar;else if(e[s]instanceof Date)n+=this.buildTextValNode(e[s],s,"",t);else if(typeof e[s]!="object"){const i=this.isAttribute(s);if(i)r+=this.buildAttrPairStr(i,""+e[s]);else if(s===this.options.textNodeName){let o=this.options.tagValueProcessor(s,""+e[s]);n+=this.replaceEntitiesValue(o)}else n+=this.buildTextValNode(e[s],s,"",t)}else if(Array.isArray(e[s])){const i=e[s].length;let o="";for(let a=0;a<i;a++){const c=e[s][a];typeof c>"u"||(c===null?s[0]==="?"?n+=this.indentate(t)+"<"+s+"?"+this.tagEndChar:n+=this.indentate(t)+"<"+s+"/"+this.tagEndChar:typeof c=="object"?this.options.oneListGroup?o+=this.j2x(c,t+1).val:o+=this.processTextOrObjNode(c,s,t):o+=this.buildTextValNode(c,s,"",t))}this.options.oneListGroup&&(o=this.buildObjectNode(o,s,"",t)),n+=o}else if(this.options.attributesGroupName&&s===this.options.attributesGroupName){const i=Object.keys(e[s]),o=i.length;for(let a=0;a<o;a++)r+=this.buildAttrPairStr(i[a],""+e[s][i[a]])}else n+=this.processTextOrObjNode(e[s],s,t);return{attrStr:r,val:n}};Ne.prototype.buildAttrPairStr=function(e,t){return t=this.options.attributeValueProcessor(e,""+t),t=this.replaceEntitiesValue(t),this.options.suppressBooleanAttributes&&t==="true"?" "+e:" "+e+'="'+t+'"'};function xf(e,t,r){const n=this.j2x(e,r+1);return e[this.options.textNodeName]!==void 0&&Object.keys(e).length===1?this.buildTextValNode(e[this.options.textNodeName],t,n.attrStr,r):this.buildObjectNode(n.val,t,n.attrStr,r)}Ne.prototype.buildObjectNode=function(e,t,r,n){if(e==="")return t[0]==="?"?this.indentate(n)+"<"+t+r+"?"+this.tagEndChar:this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar;{let s="</"+t+this.tagEndChar,i="";return t[0]==="?"&&(i="?",s=""),r&&e.indexOf("<")===-1?this.indentate(n)+"<"+t+r+i+">"+e+s:this.options.commentPropName!==!1&&t===this.options.commentPropName&&i.length===0?this.indentate(n)+`<!--${e}-->`+this.newLine:this.indentate(n)+"<"+t+r+i+this.tagEndChar+e+this.indentate(n)+s}};Ne.prototype.closeTag=function(e){let t="";return this.options.unpairedTags.indexOf(e)!==-1?this.options.suppressUnpairedNode||(t="/"):this.options.suppressEmptyNode?t="/":t=`></${e}`,t};Ne.prototype.buildTextValNode=function(e,t,r,n){if(this.options.cdataPropName!==!1&&t===this.options.cdataPropName)return this.indentate(n)+`<![CDATA[${e}]]>`+this.newLine;if(this.options.commentPropName!==!1&&t===this.options.commentPropName)return this.indentate(n)+`<!--${e}-->`+this.newLine;if(t[0]==="?")return this.indentate(n)+"<"+t+r+"?"+this.tagEndChar;{let s=this.options.tagValueProcessor(t,e);return s=this.replaceEntitiesValue(s),s===""?this.indentate(n)+"<"+t+r+this.closeTag(t)+this.tagEndChar:this.indentate(n)+"<"+t+r+">"+s+"</"+t+this.tagEndChar}};Ne.prototype.replaceEntitiesValue=function(e){if(e&&e.length>0&&this.options.processEntities)for(let t=0;t<this.options.entities.length;t++){const r=this.options.entities[t];e=e.replace(r.regex,r.val)}return e};function kf(e){return this.options.indentBy.repeat(e)}function Cf(e){return e.startsWith(this.options.attributeNamePrefix)?e.substr(this.attrPrefixLen):!1}var Pf=Ne;const Rf=Wr,Tf=mf,_f=Pf;var Of={XMLParser:Tf,XMLValidator:Rf,XMLBuilder:_f};class Xr extends Dr{constructor(t){super(t),Object.setPrototypeOf(this,Xr.prototype)}}var pi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(pi||(pi={}));var gi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.ObjectSizeGreaterThan!==void 0?r.ObjectSizeGreaterThan(t.ObjectSizeGreaterThan):t.ObjectSizeLessThan!==void 0?r.ObjectSizeLessThan(t.ObjectSizeLessThan):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(gi||(gi={}));var mi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.AccessPointArn!==void 0?r.AccessPointArn(t.AccessPointArn):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(mi||(mi={}));var yi;(function(e){e.visit=(t,r)=>t.Prefix!==void 0?r.Prefix(t.Prefix):t.Tag!==void 0?r.Tag(t.Tag):t.And!==void 0?r.And(t.And):r._(t.$unknown[0],t.$unknown[1])})(yi||(yi={}));const Mf=e=>({...e,...e.SSEKMSKeyId&&{SSEKMSKeyId:bt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:bt}}),Nf=e=>({...e,...e.SSECustomerKey&&{SSECustomerKey:bt},...e.SSEKMSKeyId&&{SSEKMSKeyId:bt},...e.SSEKMSEncryptionContext&&{SSEKMSEncryptionContext:bt}}),If=async(e,t)=>{const{hostname:r,protocol:n="https",port:s,path:i}=await t.endpoint(),o=Mt({},pt,{"content-type":e.ContentType||"application/octet-stream","x-amz-acl":e.ACL,"cache-control":e.CacheControl,"content-disposition":e.ContentDisposition,"content-encoding":e.ContentEncoding,"content-language":e.ContentLanguage,"content-length":[()=>pt(e.ContentLength),()=>e.ContentLength.toString()],"content-md5":e.ContentMD5,"x-amz-sdk-checksum-algorithm":e.ChecksumAlgorithm,"x-amz-checksum-crc32":e.ChecksumCRC32,"x-amz-checksum-crc32c":e.ChecksumCRC32C,"x-amz-checksum-sha1":e.ChecksumSHA1,"x-amz-checksum-sha256":e.ChecksumSHA256,expires:[()=>pt(e.Expires),()=>Hd(e.Expires).toString()],"x-amz-grant-full-control":e.GrantFullControl,"x-amz-grant-read":e.GrantRead,"x-amz-grant-read-acp":e.GrantReadACP,"x-amz-grant-write-acp":e.GrantWriteACP,"x-amz-server-side-encryption":e.ServerSideEncryption,"x-amz-storage-class":e.StorageClass,"x-amz-website-redirect-location":e.WebsiteRedirectLocation,"x-amz-server-side-encryption-customer-algorithm":e.SSECustomerAlgorithm,"x-amz-server-side-encryption-customer-key":e.SSECustomerKey,"x-amz-server-side-encryption-customer-key-md5":e.SSECustomerKeyMD5,"x-amz-server-side-encryption-aws-kms-key-id":e.SSEKMSKeyId,"x-amz-server-side-encryption-context":e.SSEKMSEncryptionContext,"x-amz-server-side-encryption-bucket-key-enabled":[()=>pt(e.BucketKeyEnabled),()=>e.BucketKeyEnabled.toString()],"x-amz-request-payer":e.RequestPayer,"x-amz-tagging":e.Tagging,"x-amz-object-lock-mode":e.ObjectLockMode,"x-amz-object-lock-retain-until-date":[()=>pt(e.ObjectLockRetainUntilDate),()=>(e.ObjectLockRetainUntilDate.toISOString().split(".")[0]+"Z").toString()],"x-amz-object-lock-legal-hold":e.ObjectLockLegalHoldStatus,"x-amz-expected-bucket-owner":e.ExpectedBucketOwner,...e.Metadata!==void 0&&Object.keys(e.Metadata).reduce((p,f)=>(p[`x-amz-meta-${f.toLowerCase()}`]=e.Metadata[f],p),{})});let a=`${i!=null&&i.endsWith("/")?i.slice(0,-1):i||""}/{Key+}`;a=$n(a,e,"Bucket",()=>e.Bucket,"{Bucket}",!1),a=$n(a,e,"Key",()=>e.Key,"{Key+}",!0);const c=Mt({"x-id":[,"PutObject"]});let u;e.Body!==void 0&&(u=e.Body);let d;return e.Body!==void 0&&(d=e.Body,u=d),new ae({protocol:n,hostname:r,port:s,method:"PUT",headers:o,path:a,query:c,body:u})},Uf=async(e,t)=>{if(e.statusCode!==200&&e.statusCode>=300)return Bf(e,t);const r=Mt({$metadata:Lf(e),Expiration:[,e.headers["x-amz-expiration"]],ETag:[,e.headers.etag],ChecksumCRC32:[,e.headers["x-amz-checksum-crc32"]],ChecksumCRC32C:[,e.headers["x-amz-checksum-crc32c"]],ChecksumSHA1:[,e.headers["x-amz-checksum-sha1"]],ChecksumSHA256:[,e.headers["x-amz-checksum-sha256"]],ServerSideEncryption:[,e.headers["x-amz-server-side-encryption"]],VersionId:[,e.headers["x-amz-version-id"]],SSECustomerAlgorithm:[,e.headers["x-amz-server-side-encryption-customer-algorithm"]],SSECustomerKeyMD5:[,e.headers["x-amz-server-side-encryption-customer-key-md5"]],SSEKMSKeyId:[,e.headers["x-amz-server-side-encryption-aws-kms-key-id"]],SSEKMSEncryptionContext:[,e.headers["x-amz-server-side-encryption-context"]],BucketKeyEnabled:[()=>e.headers["x-amz-server-side-encryption-bucket-key-enabled"]!==void 0,()=>jd(e.headers["x-amz-server-side-encryption-bucket-key-enabled"])],RequestCharged:[,e.headers["x-amz-request-charged"]]});return await no(e.body,t),r},Bf=async(e,t)=>{const r={...e,body:await Ff(e.body,t)},n=Hf(e,r.body),s=r.body;return $f({output:e,parsedBody:s,errorCode:n})},$f=Vd(Xr),Lf=e=>({httpStatusCode:e.statusCode,requestId:e.headers["x-amzn-requestid"]??e.headers["x-amzn-request-id"]??e.headers["x-amz-request-id"],extendedRequestId:e.headers["x-amz-id-2"],cfId:e.headers["x-amz-cf-id"]}),jf=(e,t)=>no(e,t).then(r=>t.utf8Encoder(r)),pt=e=>e!=null&&e!==""&&(!Object.getOwnPropertyNames(e).includes("length")||e.length!=0)&&(!Object.getOwnPropertyNames(e).includes("size")||e.size!=0),Df=(e,t)=>jf(e,t).then(r=>{if(r.length){const n=new Of.XMLParser({attributeNamePrefix:"",htmlEntities:!0,ignoreAttributes:!1,ignoreDeclaration:!0,parseTagValue:!1,trimValues:!1,tagValueProcessor:(c,u)=>u.trim()===""&&u.includes(`
`)?"":void 0});n.addEntity("#xD","\r"),n.addEntity("#10",`
`);const s=n.parse(r),i="#text",o=Object.keys(s)[0],a=s[o];return a[i]&&(a[o]=a[i],delete a[i]),so(a)}return{}}),Ff=async(e,t)=>{const r=await Df(e,t);return r.Error&&(r.Error.message=r.Error.message??r.Error.Message),r},Hf=(e,t)=>{if((t==null?void 0:t.Code)!==void 0)return t.Code;if(e.statusCode==404)return"NotFound"};function zf(e){return t=>async r=>{let n={...r.input};const s=[{target:"SSECustomerKey",hash:"SSECustomerKeyMD5"},{target:"CopySourceSSECustomerKey",hash:"CopySourceSSECustomerKeyMD5"}];for(const i of s){const o=n[i.target];if(o){const a=ArrayBuffer.isView(o)?new Uint8Array(o.buffer,o.byteOffset,o.byteLength):typeof o=="string"?e.utf8Decoder(o):new Uint8Array(o),c=e.base64Encoder(a),u=new e.md5;u.update(a),n={...n,[i.target]:c,[i.hash]:e.base64Encoder(await u.digest())}}}return t({...r,input:n})}}const qf={name:"ssecMiddleware",step:"initialize",tags:["SSE"],override:!0},Vf=e=>({applyToStack:t=>{t.add(zf(e),qf)}});var X;(function(e){e.MD5="MD5",e.CRC32="CRC32",e.CRC32C="CRC32C",e.SHA1="SHA1",e.SHA256="SHA256"})(X||(X={}));var bi;(function(e){e.HEADER="header",e.TRAILER="trailer"})(bi||(bi={}));const Mr=[X.CRC32,X.CRC32C,X.SHA1,X.SHA256],Wf=[X.CRC32,X.CRC32C,X.SHA1,X.SHA256],Kf=(e,{requestChecksumRequired:t,requestAlgorithmMember:r})=>{if(!r||!e[r])return t?X.MD5:void 0;const n=e[r];if(!Mr.includes(n))throw new Error(`The checksum algorithm "${n}" is not supported by the client. Select one of ${Mr}.`);return n},Ho=e=>e===X.MD5?"content-md5":`x-amz-checksum-${e.toLowerCase()}`,Gf=(e,t)=>{const r=e.toLowerCase();for(const n of Object.keys(t))if(r===n.toLowerCase())return!0;return!1},zo=e=>e!==void 0&&typeof e!="string"&&!ArrayBuffer.isView(e)&&!Ii(e);var wi={},gt={},vi;function Zf(){if(vi)return gt;vi=1,Object.defineProperty(gt,"__esModule",{value:!0}),gt.AwsCrc32c=void 0;var e=ge,t=Oe(),r=qo(),n=function(){function s(){this.crc32c=new r.Crc32c}return s.prototype.update=function(i){(0,t.isEmptyData)(i)||this.crc32c.update((0,t.convertToBuffer)(i))},s.prototype.digest=function(){return e.__awaiter(this,void 0,void 0,function(){return e.__generator(this,function(i){return[2,(0,t.numToUint8)(this.crc32c.digest())]})})},s.prototype.reset=function(){this.crc32c=new r.Crc32c},s}();return gt.AwsCrc32c=n,gt}var Si;function qo(){return Si||(Si=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.AwsCrc32c=e.Crc32c=e.crc32c=void 0;var t=ge,r=Oe();function n(c){return new s().update(c).digest()}e.crc32c=n;var s=function(){function c(){this.checksum=4294967295}return c.prototype.update=function(u){var d,p;try{for(var f=t.__values(u),m=f.next();!m.done;m=f.next()){var g=m.value;this.checksum=this.checksum>>>8^o[(this.checksum^g)&255]}}catch(A){d={error:A}}finally{try{m&&!m.done&&(p=f.return)&&p.call(f)}finally{if(d)throw d.error}}return this},c.prototype.digest=function(){return(this.checksum^4294967295)>>>0},c}();e.Crc32c=s;var i=[0,4067132163,3778769143,324072436,3348797215,904991772,648144872,3570033899,2329499855,2024987596,1809983544,2575936315,1296289744,3207089363,2893594407,1578318884,274646895,3795141740,4049975192,51262619,3619967088,632279923,922689671,3298075524,2592579488,1760304291,2075979607,2312596564,1562183871,2943781820,3156637768,1313733451,549293790,3537243613,3246849577,871202090,3878099393,357341890,102525238,4101499445,2858735121,1477399826,1264559846,3107202533,1845379342,2677391885,2361733625,2125378298,820201905,3263744690,3520608582,598981189,4151959214,85089709,373468761,3827903834,3124367742,1213305469,1526817161,2842354314,2107672161,2412447074,2627466902,1861252501,1098587580,3004210879,2688576843,1378610760,2262928035,1955203488,1742404180,2511436119,3416409459,969524848,714683780,3639785095,205050476,4266873199,3976438427,526918040,1361435347,2739821008,2954799652,1114974503,2529119692,1691668175,2005155131,2247081528,3690758684,697762079,986182379,3366744552,476452099,3993867776,4250756596,255256311,1640403810,2477592673,2164122517,1922457750,2791048317,1412925310,1197962378,3037525897,3944729517,427051182,170179418,4165941337,746937522,3740196785,3451792453,1070968646,1905808397,2213795598,2426610938,1657317369,3053634322,1147748369,1463399397,2773627110,4215344322,153784257,444234805,3893493558,1021025245,3467647198,3722505002,797665321,2197175160,1889384571,1674398607,2443626636,1164749927,3070701412,2757221520,1446797203,137323447,4198817972,3910406976,461344835,3484808360,1037989803,781091935,3705997148,2460548119,1623424788,1939049696,2180517859,1429367560,2807687179,3020495871,1180866812,410100952,3927582683,4182430767,186734380,3756733383,763408580,1053836080,3434856499,2722870694,1344288421,1131464017,2971354706,1708204729,2545590714,2229949006,1988219213,680717673,3673779818,3383336350,1002577565,4010310262,493091189,238226049,4233660802,2987750089,1082061258,1395524158,2705686845,1972364758,2279892693,2494862625,1725896226,952904198,3399985413,3656866545,731699698,4283874585,222117402,510512622,3959836397,3280807620,837199303,582374963,3504198960,68661723,4135334616,3844915500,390545967,1230274059,3141532936,2825850620,1510247935,2395924756,2091215383,1878366691,2644384480,3553878443,565732008,854102364,3229815391,340358836,3861050807,4117890627,119113024,1493875044,2875275879,3090270611,1247431312,2660249211,1828433272,2141937292,2378227087,3811616794,291187481,34330861,4032846830,615137029,3603020806,3314634738,939183345,1776939221,2609017814,2295496738,2058945313,2926798794,1545135305,1330124605,3173225534,4084100981,17165430,307568514,3762199681,888469610,3332340585,3587147933,665062302,2042050490,2346497209,2559330125,1793573966,3190661285,1279665062,1595330642,2910671697],o=(0,r.uint32ArrayFrom)(i),a=Zf();Object.defineProperty(e,"AwsCrc32c",{enumerable:!0,get:function(){return a.AwsCrc32c}})}(wi)),wi}var Xf=qo();const Vo=(e,t)=>({[X.MD5]:t.md5,[X.CRC32]:Ir.AwsCrc32,[X.CRC32C]:Xf.AwsCrc32c,[X.SHA1]:t.sha1,[X.SHA256]:t.sha256})[e],Wo=(e,t)=>{const r=new e;return r.update(Fe(t||"")),r.digest()},Yf=async(e,{streamHasher:t,checksumAlgorithmFn:r,base64Encoder:n})=>{const s=zo(e)?t(r,e):Wo(r,e);return n(await s)},Jf=(e=[])=>{const t=[];for(const r of Wf)!e.includes(r)||!Mr.includes(r)||t.push(r);return t},Qf=async(e,{config:t,responseAlgorithms:r})=>{const n=Jf(r),{body:s,headers:i}=e;for(const o of n){const a=Ho(o),c=i[a];if(c){const u=Vo(o,t),{streamHasher:d,base64Encoder:p}=t,f=await Yf(s,{streamHasher:d,checksumAlgorithmFn:u,base64Encoder:p});if(f===c)break;throw new Error(`Checksum mismatch: expected "${f}" but received "${c}" in response header "${a}".`)}}},ep=(e,t)=>r=>async n=>{if(!ae.isInstance(n.request))return r(n);const{request:s}=n,{body:i,headers:o}=s,{base64Encoder:a,streamHasher:c}=e,{input:u,requestChecksumRequired:d,requestAlgorithmMember:p}=t,f=Kf(u,{requestChecksumRequired:d,requestAlgorithmMember:p});let m=i,g=o;if(f){const we=Ho(f),je=Vo(f,e);if(zo(i)){const{getAwsChunkedEncodingStream:Dt,bodyLengthChecker:Ko}=e;m=Dt(i,{base64Encoder:a,bodyLengthChecker:Ko,checksumLocationName:we,checksumAlgorithmFn:je,streamHasher:c}),g={...o,"content-encoding":o["content-encoding"]?`${o["content-encoding"]},aws-chunked`:"aws-chunked","transfer-encoding":"chunked","x-amz-decoded-content-length":o["content-length"],"x-amz-content-sha256":"STREAMING-UNSIGNED-PAYLOAD-TRAILER","x-amz-trailer":we},delete g["content-length"]}else if(!Gf(we,o)){const Dt=await Wo(je,i);g={...o,[we]:a(Dt)}}}const A=await r({...n,request:{...s,headers:g,body:m}}),{requestValidationModeMember:N,responseAlgorithms:me}=t;return N&&u[N]==="ENABLED"&&await Qf(A.response,{config:e,responseAlgorithms:me}),A},tp={name:"flexibleChecksumsMiddleware",step:"build",tags:["BODY_CHECKSUM"],override:!0},rp=(e,t)=>({applyToStack:r=>{r.add(ep(e,t),tp)}});class Yr extends Ld{static getEndpointParameterInstructions(){return{Bucket:{type:"contextParams",name:"Bucket"},ForcePathStyle:{type:"clientContextParams",name:"forcePathStyle"},UseArnRegion:{type:"clientContextParams",name:"useArnRegion"},DisableMultiRegionAccessPoints:{type:"clientContextParams",name:"disableMultiregionAccessPoints"},Accelerate:{type:"clientContextParams",name:"useAccelerateEndpoint"},UseGlobalEndpoint:{type:"builtInParams",name:"useGlobalEndpoint"},UseFIPS:{type:"builtInParams",name:"useFipsEndpoint"},Endpoint:{type:"builtInParams",name:"endpoint"},Region:{type:"builtInParams",name:"region"},UseDualStack:{type:"builtInParams",name:"useDualstackEndpoint"}}}constructor(t){super(),this.input=t}resolveMiddleware(t,r,n){this.middlewareStack.use(Vu(r,this.serialize,this.deserialize)),this.middlewareStack.use(Ku(r,Yr.getEndpointParameterInstructions())),this.middlewareStack.use(ga()),this.middlewareStack.use(Vf(r)),this.middlewareStack.use(rp(r,{input:this.input,requestAlgorithmMember:"ChecksumAlgorithm",requestChecksumRequired:!1}));const s=t.concat(this.middlewareStack),{logger:i}=r,o={logger:i,clientName:"S3Client",commandName:"PutObjectCommand",inputFilterSensitiveLog:Nf,outputFilterSensitiveLog:Mf},{requestHandler:a}=r;return s.resolve(c=>a.handle(c.request,n||{}),o)}serialize(t,r){return If(t,r)}deserialize(t,r){return Uf(t,r)}}const np=Go.create({});async function sp(e,t,r){return e.getSignedUrl||console.error("请先配置uploader.getSignedUrl，该方法应该从后端获取签名url"),await e.getSignedUrl(e.bucket,t,e,r)}async function ip(e,t){const{file:r,onProgress:n,options:s}=e,i=await sp(s,t,"put"),o=decodeURIComponent(i);return await np.put(o,r,{onUploadProgress:a=>{const{loaded:c,total:u}=a;n({percent:Math.round(c*100/u)})}})}async function op(e){const{file:t,fileName:r,onProgress:n,options:s}=e,i=s,o=new gh({...(i==null?void 0:i.sdkOpts)||{}}),a=await Zo(t,r,i);async function c(){const u={url:i.sdkOpts.endpoint+"/"+i.bucket+"/"+a,key:a};return i.successHandle?await i.successHandle(u):u}if(i.getSignedUrl)await ip(e,a);else{const u={Bucket:i.bucket,Key:a};await o.send(new Yr({Body:t,...u}))}return await c()}async function dp(e){const{getConfig:t}=Xo(),r=t("s3"),n=e.options,s=Jr.merge(Jr.cloneDeep(r),n);return e.options=s,await op(e)}export{sp as buildSignedUrl,dp as upload,ip as uploadUsingSignedUrl};
