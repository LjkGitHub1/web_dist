import{j as I,u as P,e as w,S as x,_ as B}from"./index.ab2bd5b7.js";import{a as g,aC as D,aG as E,aD as d,a0 as S,r as U,J as M,m as f,I as O,n as c,l as j,$ as G,w as H,al as J,o as v,c as Q,X as o,R as h,Z as _,Q as R,S as V,Y as y,T as X,aH as Y,U as Z,u as $,aA as b}from"./vue.562ccee8.js";const q={class:"layout-parent"},z=g({name:"layoutParentView"}),se=g({...z,setup(F){const K=b(()=>B(()=>import("./iframes.c1eaa6f1.js"),["assets/iframes.c1eaa6f1.js","assets/vue.562ccee8.js"])),t=D(),A=E(),T=I(),k=P(),{keepAliveNames:i,cachedViews:n}=d(T),{themeConfig:u}=d(k),e=S({refreshRouterViewKey:"",iframeRefreshKey:"",keepAliveNameList:[],iframeList:[]}),m=U(!0);M("refreshView",function(){m.value=!1,c(()=>{m.value=!0})});const l=f(()=>u.value.animation),L=f(()=>(console.log(n.value),u.value.isTagsview?n.value:e.keepAliveNameList)),p=f(()=>t.meta.isIframe),N=async()=>{A.getRoutes().forEach(a=>{a.meta.isIframe&&(a.meta.isIframeOpen=!1,a.meta.loading=!0,e.iframeList.push({...a}))})};return O(()=>{e.keepAliveNameList=i.value,w.on("onTagsViewRefreshRouterView",a=>{e.keepAliveNameList=i.value.filter(s=>t.name!==s),e.refreshRouterViewKey="",e.iframeRefreshKey="",c(()=>{e.refreshRouterViewKey=a,e.iframeRefreshKey=a,e.keepAliveNameList=i.value})})}),j(()=>{N(),c(()=>{setTimeout(()=>{if(u.value.isCacheTagsView){let a=x.get("tagsViewList")||[];n.value=a.filter(s=>{var r;return(r=s.meta)==null?void 0:r.isKeepAlive}).map(s=>s.name)}},0)})}),G(()=>{w.off("onTagsViewRefreshRouterView",()=>{})}),H(()=>t.fullPath,()=>{e.refreshRouterViewKey=decodeURI(t.fullPath)},{immediate:!0}),(a,s)=>{const r=J("router-view");return v(),Q("div",q,[o(r,null,{default:h(({Component:C})=>[o(_,{name:l.value,mode:"out-in"},{default:h(()=>[m.value?(v(),R(Y,{key:0,include:L.value},[V((v(),R(X(C),{key:e.refreshRouterViewKey,class:"w100"})),[[y,!p.value]])],1032,["include"])):Z("",!0)]),_:2},1032,["name"])]),_:1}),o(_,{name:l.value,mode:"out-in"},{default:h(()=>[V(o($(K),{class:"w100",refreshKey:e.iframeRefreshKey,name:l.value,list:e.iframeList},null,8,["refreshKey","name","list"]),[[y,p.value]])]),_:1},8,["name"])])}}});export{se as default};
