import{g as W}from"./index.es.d2375c1e.js";import{G as X,H as j,w}from"./index.ab2bd5b7.js";import{_ as N}from"./index.vue_vue_type_script_setup_true_name_svgIcon_lang.6e64cb5c.js";import{l as q,m as A,a as J}from"./api.cb0b4d38.js";import{a as K,r as p,w as Y,al as i,at as Z,o as r,c as C,X as a,u as D,H as ee,b as M,R as n,V as y,W as T,S as v,Q as k,F as te,ak as ae,ah as ne}from"./vue.562ccee8.js";import{_ as oe}from"./_plugin-vue_export-helper.c27b6911.js";const le={class:"menu-tree-com"},se={class:"mtc-head"},ie={key:0,class:"text-center font-black font-normal"},ce={key:1,class:"text-center font-black text-red-700 font-normal"},re={class:"mtc-tags"},de=K({__name:"index",props:{treeData:{default:()=>[]}},emits:["treeClick","deleteDept","updateDept"],setup(ue,{expose:V,emit:B}){const E=W(ae),R={children:"children",label:"name",icon:"icon",isLeaf:(t,e)=>!e.data.is_catalog},g=p(),h=B;let u=p(""),f=p(!1),l=p({}),b=p(null);Y(u,t=>{g.value.filter(t)});const S=(t,e)=>t?ne(e).name.indexOf(t)!==-1:!0,U=(t,e)=>{t.level!==0&&q({parent:t.data.id}).then(c=>{e(c.data)})},$=(t,e)=>{l.value=t,b.value=e,h("treeClick",t)},z=t=>{if(t==="update"){if(!l.value.id){w("请选择菜单！");return}h("updateDept",t,l.value)}else h("updateDept",t)},F=()=>{if(!l.value.id){w("请选择菜单！");return}h("deleteDept",l.value.id,()=>{l.value={}})},L=async t=>{var s;if(!l.value.id){w("请选择菜单！");return}if(f.value)return;const e=((s=b.value)==null?void 0:s.parent.childNodes)||[],c=e.findIndex(m=>m.data.id===l.value.id),x=e.find(m=>m.data.id===l.value.id);if(t==="up"){if(c===0)return;e.splice(c-1,0,x),e.splice(c+1,1),f.value=!0,await A({menu_id:l.value.id}),f.value=!1}t==="down"&&(e.splice(c+2,0,x),e.splice(c,1),f.value=!0,await J({menu_id:l.value.id}),f.value=!1)};return V({treeRef:g}),(t,e)=>{const c=i("el-input"),x=i("Menu"),s=i("el-icon"),m=i("QuestionFilled"),d=i("el-tooltip"),I=i("Plus"),P=i("Edit"),Q=i("Top"),H=i("Bottom"),G=i("Delete"),_=Z("auth");return r(),C(te,null,[a(c,{modelValue:D(u),"onUpdate:modelValue":e[0]||(e[0]=o=>ee(u)?u.value=o:u=o),"prefix-icon":D(X),placeholder:"请输入菜单名称"},null,8,["modelValue","prefix-icon"]),M("div",le,[M("div",se,[a(s,{size:"16",color:"#606266",class:"mtc-head-icon"},{default:n(()=>[a(x)]),_:1}),e[6]||(e[6]=y(" 菜单列表 ")),a(d,{effect:"dark",placement:"right",content:"1.红色菜单代表状态禁用; 2.添加菜单，如果是目录，组件地址为空即可; 3.添加根节点菜单，父级ID为空即可; 4.支持拖拽菜单;"},{default:n(()=>[a(s,{size:"16",color:"var(--el-color-primary)",class:"mtc-tooltip"},{default:n(()=>[a(m)]),_:1})]),_:1})]),a(D(j),{ref_key:"treeRef",ref:g,data:t.treeData,props:R,"filter-node-method":S,load:U,lazy:"",indent:45,onNodeClick:$,"highlight-current":""},{default:n(({node:o,data:O})=>[a(D(E),{node:o,showLabelLine:!1,indent:32},{default:n(()=>[O.status?(r(),C("span",ie,[a(N,{name:o.data.icon,color:"var(--el-color-primary)"},null,8,["name"]),y("  "+T(o.label),1)])):(r(),C("span",ce,[a(N,{name:o.data.icon},null,8,["name"]),y(" "+T(o.label),1)]))]),_:2},1032,["node"])]),_:1},8,["data"]),M("div",re,[a(d,{effect:"dark",content:"新增"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[1]||(e[1]=o=>z("create")),class:"mtc-tags-icon"},{default:n(()=>[a(I)]),_:1})),[[_,"menu:Create"]])]),_:1}),a(d,{effect:"dark",content:"编辑"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[2]||(e[2]=o=>z("update")),class:"mtc-tags-icon"},{default:n(()=>[a(P)]),_:1})),[[_,"menu:Update"]])]),_:1}),a(d,{effect:"dark",content:"上移"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[3]||(e[3]=o=>L("up")),class:"mtc-tags-icon"},{default:n(()=>[a(Q)]),_:1})),[[_,"menu:MoveUp"]])]),_:1}),a(d,{effect:"dark",content:"下移"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[4]||(e[4]=o=>L("down")),class:"mtc-tags-icon"},{default:n(()=>[a(H)]),_:1})),[[_,"menu:MoveDown"]])]),_:1}),a(d,{effect:"dark",content:"删除"},{default:n(()=>[v((r(),k(s,{size:"16",onClick:e[5]||(e[5]=o=>F()),class:"mtc-tags-icon"},{default:n(()=>[a(G)]),_:1})),[[_,"menu:Delete"]])]),_:1})])])],64)}}});const he=oe(de,[["__scopeId","data-v-027d3c6f"]]);export{he as default};
