import{a3 as v,R as k}from"./index.ab2bd5b7.js";import{a as F,m as V,r as w,w as R,o as t,c as o,F as d,ab as p,b as g,W as y,O as u,Q as x,R as U,T as B}from"./vue.562ccee8.js";const C=F({name:"FsFilesFormat",props:{modelValue:{},color:{default:""},type:{default:"tag"},a:{},tag:{},buildUrl:{},buildUrls:{},getFileName:{}},setup(a,b){const{ui:i}=k(),f=V(()=>a.getFileName||function(e){return typeof e!="string"?(console.warn("获取文件名失败，请配置getFileName"),e):(e==null?void 0:e.lastIndexOf("/"))>=0?e.substring(e.lastIndexOf("/")+1):e});function n(e){return{url:void 0,value:e,name:f.value(e),color:a.color}}async function m(e){if(a.buildUrls){const l=e.map(s=>s.value),h=await a.buildUrls(l);for(let s=0;s<e.length;s++)e[s].url=h[s]}else if(a.buildUrl)for(let l of e)l.url=await a.buildUrl(l.value);else for(let l=0;l<e.length;l++)e[l].url=e[l].value}async function r(){if(a.modelValue==null||a.modelValue==="")return[];let e=[];if(typeof a.modelValue=="string")e=[n(a.modelValue)];else if(a.modelValue instanceof Array){e=[];for(const l of a.modelValue)e.push(n(l))}return await m(e),e}const c=w([]);return R(()=>a.modelValue,async()=>{c.value=await r()},{immediate:!0}),{ui:i,itemsRef:c}}}),N={class:"fs-files-format"},O=["href"],_=["href"];function D(a,b,i,f,n,m){return t(),o("div",N,[a.type==="text"?(t(!0),o(d,{key:0},p(a.itemsRef,r=>(t(),o("span",{key:r.url,class:"fs-files-item"},[g("a",u({href:r.url,target:"_blank"},a.a),y(r.name),17,O)]))),128)):(t(!0),o(d,{key:1},p(a.itemsRef,r=>(t(),x(B(a.ui.tag.name),u({key:r.url,class:"fs-tag-item",type:r.color},a.tag),{default:U(()=>[g("a",u({href:r.url,target:"_blank"},a.a),y(r.name),17,_)]),_:2},1040,["type"]))),128))])}const A=v(C,[["render",D]]);export{A as default};
